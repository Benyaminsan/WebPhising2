/*! For license information please see catalog.bundle.min.js.LICENSE.txt */
!function(){var e={2002:function(e,t,r){var a={"./catalogConstants.js":7718,"./experimentConstants.js":6280,"./menuConstants.js":582};function n(e){var t=o(e);return r(t)}function o(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=o,e.exports=n,n.id=2002},9630:function(e,t,r){var a={"./breadcrumbsController.js":7450,"./catalogContentController.js":8137,"./catalogController.js":3772,"./itemCardController.js":9661,"./itemsContainerController.js":5630,"./searchOptionsController.js":4607};function n(e){var t=o(e);return r(t)}function o(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=o,e.exports=n,n.id=9630},7481:function(e,t,r){var a={"./accordionMenuDirective.js":673,"./catalogBreadcrumbsDirective.js":1443,"./catalogPageDirective.js":9645,"./creatorFiltersDirective.js":7473,"./imageLoadDirective.js":7210,"./itemCardDirective.js":4094,"./itemsContainerDirective.js":9766,"./mobileSearchBarDirective.js":7566,"./mobileSearchOptionsDirective.js":6214,"./priceFiltersDirective.js":5156,"./salesTypeFilterDirective.js":8112,"./searchBarDirective.js":6085,"./searchOptionsDirective.js":9068,"./shimmerContainerDirective.js":1969,"./shimmerMenuDirective.js":2601,"./showUnavailableFilterDirective.js":5478,"./sortFilterDirective.js":727};function n(e){var t=o(e);return r(t)}function o(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=o,e.exports=n,n.id=7481},6811:function(e,t,r){var a={"./range.js":1847};function n(e){var t=o(e);return r(t)}function o(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=o,e.exports=n,n.id=6811},7344:function(e,t,r){var a={"./catalogLayoutService.js":2523,"./catalogService.js":9875,"./experimentationService.js":7591,"./metricsService.js":575,"./universalAppConfigurationService.js":751,"./utilityService.js":7820,"./vngPaymentsService.js":5051};function n(e){var t=o(e);return r(t)}function o(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=o,e.exports=n,n.id=7344},3634:function(e,t,r){var a={"./directives/templates/catalogBreadcrumbs.html":8935,"./directives/templates/catalogPage.html":3461,"./directives/templates/creatorFilters.html":4515,"./directives/templates/itemCard.html":4209,"./directives/templates/itemsContainer.html":3771,"./directives/templates/mobileSearchBar.html":4507,"./directives/templates/mobileSearchOptions.html":6003,"./directives/templates/priceFilters.html":6904,"./directives/templates/salesTypeFilter.html":4526,"./directives/templates/searchBar.html":4801,"./directives/templates/searchOptions.html":640,"./directives/templates/shimmerContainer.html":6083,"./directives/templates/shimmerMenu.html":4137,"./directives/templates/showUnavailableFilter.html":904,"./directives/templates/sortFilter.html":9326};function n(e){var t=o(e);return r(t)}function o(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=o,e.exports=n,n.id=3634},3544:function(e){function t(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function r(e){return e.split("/").pop().replace(".html","")}var a={importFilesUnderPath:function(e){e.keys().forEach(e)},templateCacheGenerator:function(e,a,n,o){return e.module(a,[]).run(["$templateCache",function(e){n&&n.keys().forEach((function(a){var o=t(r(a));e.put(o,n(a))})),o&&o.keys().forEach((function(a){var n=t(r(a));e.put(n,o(a).replace(/<\/?script[^>]*>/gi,""))}))}])}};e.exports=a},9597:function(e,t,r){"use strict";var a=r(792),n=r(5734),o=r.n(n)().module("catalog",["robloxApp","cursorPagination","infiniteScroll","thumbnails","modal"]).config(["$locationProvider","languageResourceProvider",function(e,t){e.html5Mode({enabled:!0,requireBase:!1});var r=new a.TranslationResourceProvider,n=r.getTranslationResource("Feature.Catalog"),o=r.getTranslationResource("Purchasing.PurchaseDialog");t.setTranslationResources([n,o])}]);t.Z=o},7718:function(e,t,r){"use strict";r.r(t);var a=r(792),n=r(9597),o={layout:{initialized:!1,isNavigationMenuLoaded:!1,isSearchItemsLoaded:!1,customText:"custom",accordionMenuIdPrefix:"#category-",showNoResultsMessage:!1,showErrorMessage:!1,isSearchOptionsOpen:!1,isSearchBarFixed:!1,loading:!1,adsInitialized:!1,showFirstLast:!1,isItemDetailsLoaded:!1,isAssetThumbnailLoaded:!1,isBundleThumbnailLoaded:!1,isItemDetailsLoadingFailed:!1,preventLocationChange:!1},defaults:{subcategory:"0"},allGearSubcategoryId:"0",itemType:{asset:1,bundle:2},templateUrls:{cardItemTemplate:"item-card",catalogBreadcrumbsTemplate:"catalog-breadcrumbs",creatorFiltersTemplate:"creator-filters",mobileSearchBarTemplate:"mobile-search-bar",catalogPageTemplate:"catalog-page",mobileSearchOptionsTemplate:"mobile-search-options",priceFiltersTemplate:"price-filters",searchBarTemplate:"search-bar",searchOptionsTemplate:"search-options",showUnavailableFilterTemplate:"show-unavailable-filter",itemsContainer:"items-container",shimmerContainer:"shimmer-container",shimmerMenu:"shimmer-menu",salesTypeFilterTemplate:"sales-type-filter",sortFilterTemplate:"sort-filter"},buyRobuxUrl:"".concat(a.EnvironmentUrls.websiteUrl,"/upgrades/robux?ctx=catalogNew"),fallbackVngShopUrl:a.EnvironmentUrls.vngGamesShopUrl,catalogUrl:"".concat(a.EnvironmentUrls.websiteUrl,"/catalog"),numberOfSearchItems:30,numberOfSearchItemsForFullScreen:60,numberOfSearchItemsExpanded:120,expandedCategoryList:["Recommended"],endpoints:{getMetadata:{url:"".concat(a.EnvironmentUrls.catalogApi,"/v1/catalog/metadata"),retryable:!0,withCredentials:!0},enrollAbTesting:{url:"".concat(a.EnvironmentUrls.abtestingApiSite,"/v1/enrollments"),retryable:!1,withCredentials:!0,timeout:500},getPageItems:{url:a.Endpoints?a.Endpoints.getAbsoluteUrl("/catalog/items"):"/catalog/items"},getSearchOptionsUrl:{url:a.Endpoints?a.Endpoints.getAbsoluteUrl("/catalog/search-options"):"/catalog/search-options"},getNavigationMenuItems:{url:"".concat(a.EnvironmentUrls.catalogApi,"/v1/search/navigation-menu-items"),retryable:!0},getSearchItems:{url:"".concat(a.EnvironmentUrls.catalogApi,"/v1/search/items"),retryable:!0},getCatalogItemDetails:{url:"".concat(a.EnvironmentUrls.catalogApi,"/v1/catalog/items/details"),retryable:!1,withCredentials:!0},getCatalogThumbnails:{url:"".concat(a.EnvironmentUrls.thumbnailsApi,"/v1/assets?format=Png"),retryable:!0,withCredentials:!0},getBundleThumbnails:{url:"".concat(a.EnvironmentUrls.thumbnailsApi,"/v1/bundles/thumbnails?format=Png"),retryable:!0,withCredentials:!0},performanceMeasurements:{url:"".concat(a.EnvironmentUrls.metricsApi,"/v1/performance/measurements"),retryable:!1,withCredentials:!0},avatarRequestSuggestion:{url:"".concat(a.EnvironmentUrls.apiGatewayUrl,"/autocomplete-avatar/v2/suggest"),withCredentials:!0,timeout:5e3},avatarRequestCdnSuggestion:{url:"".concat(a.EnvironmentUrls.apiGatewayCdnUrl,"/autocomplete-avatar/v2/suggest"),withCredentials:!0,timeout:5e3},postGetTopics:{url:"".concat(a.EnvironmentUrls.catalogApi,"/v1/topic/get-topics"),withCredentials:!0,timeout:5e3},getUserCurrency:{url:"/v1/users/{userId}/currency",withCredentials:!0,timeout:5e3},postMarketplaceItemDetails:{url:"".concat(a.EnvironmentUrls.apiGatewayUrl,"/marketplace-items/v1/items/details"),retryable:!1,withCredentials:!0},getVngBuyRobuxBehavior:{url:"".concat(a.EnvironmentUrls.universalAppConfigurationApi,"/v1/behaviors/vng-buy-robux/content"),withCredentials:!0},getSignedVngShopUrl:{url:"".concat(a.EnvironmentUrls.apiGatewayUrl,"/vng-payments/v1/getVngShopUrl"),withCredentials:!0}},getResellerDataUrl:function(e){return"".concat(a.EnvironmentUrls.economyApi,"/v1/assets/").concat(e,"/resellers?limit=10")},abTestingParams:{subjectType:"User",status:{enrolled:"Enrolled"},apiTimeout:500,variations:{fullScreenCatalogVariation:1}},defaultMetadata:{numberOfCatalogItemsToDisplayOnSplash:25,numberOfCatalogItemsToDisplayOnSplashOnPhone:15},categories:{featured:0},subCategories:{allFeaturedItems:0},queryNames:{category:"Category",subcategory:"Subcategory",pageNumber:"PageNumber",catalogContext:"CatalogContext",sortType:"SortType",sortAggregation:"SortAggregation",sortCurrency:"SortCurrency",currencyType:"CurrencyType",gears:"Gears",resultsPerPage:"ResultsPerPage",creatorId:"CreatorID",creatorName:"CreatorName",keyword:"Keyword",pxMin:"PxMin",pxMax:"PxMax",includeNotForSale:"IncludeNotForSale",legendExpanded:"LegendExpanded"},queryValueIsInt:["category","subcategory","catalogcontext","sorttype","sortaggregation","sortcurrency","currencytype","gears","creatorid","pxmin","pxmax"],itemTypes:{bundle:"Bundle",asset:"Asset"},priceStatus:{free:"Free",noResellers:"NoResellers"},itemRestrictionTypes:{thirteenPlus:"ThirteenPlus",limitedUnique:"LimitedUnique",limited:"Limited",rthro:"Rthro",dynamicHead:"Live",collectible:"Collectible"},itemRestrictionIcons:{thirteenPlus:"icon-thirteen-plus-label",limited:"icon-limited-label",limitedUnique:"icon-limited-unique-label",thirteenPlusLimited:"icon-thirteen-plus-limited-label",thirteenPlusLimitedUnique:"icon-thirteen-plus-limited-unique-label",rthroLabel:"icon-rthro-label",rthroLimitedLabel:"icon-rthro-limited-label",dynamicHead:"icon-default-dynamichead",collectible:"icon-limited-unique-label"},itemStatusClasses:{New:"status-new",Sale:"status-sale",XboxExclusive:"status-default has-text",AmazonExclusive:"status-default has-text",GooglePlayExclusive:"status-default has-text",IosExclusive:"status-default has-text"},itemStatusHasIcons:["SaleTimer"],itemStatusIcons:{SaleTimer:"icon-clock"},robloxSystemUserId:1,pageDirection:{prev:"prev",next:"next"},initializedPaginations:{currentPage:0,isEnabled:!1,direction:"next",startPaging:!1,previousPageCursor:null,nextPageCursor:null},thumbnailValidationStatus:{error:"Error",complete:"Completed",inReview:"InReview",pending:"Pending",blocked:"Blocked"},thumbnailValidationClasses:{error:"icon-error",inReview:"icon-in-review",pending:"icon-pending",blocked:"icon-blocked",placeholder:"icon-placeholder-asset"},userTypes:{user:"User",group:"Group"},errorMessages:{categoryName:"CatalogPageAjaxErrors",endpointNames:{getSearchItems:"SearchItems",getCatalogItemDetails:"CatalogItemDetails"}},englishLanguageCode:"en",autocompleteQueryAmount:10,autocompleteSuggestionEventData:{autocompleteSuggestionEventContext:"webAvatarShop",autocompleteSuggestionEventTimeoutDelay:200,searchAutocompleteEvent:"searchAutocomplete",searchTextTrimEvent:"searchTextTrim",catalogSearchEvent:"catalogSearch",searchClearEvent:"searchClear",searchSuggestionClickedEvent:"searchSuggestionClicked",pageName:"Avatar Shop",searchBox:"avatarShopDesktop",searchType:"avatarshopsearch",suggestionSource:"server"},layeredClothingSubcategories:[59,58,62,61,60,65,63,64],topics:{categoriesToShowTopics:[1,15],maxTopicsToRequest:40,numberOfItemsToSend:10,topicCarouselId:"topic-carousel",topicCarouselScrollValue:500},topicEventData:{topicEventContext:"webAvatarShop",topicSelectEventName:"selectCatalogTopic",topicDeselectEventName:"deselectCatalogTopic",topicClearEventName:"clearAllTopics"},itemTypeIds:{asset:1,bundle:2},topUp:{resetTime:6048e5,robuxThreshold:50,displayCategories:[1]}};n.Z.constant("catalogConstants",o),t.default=o},6280:function(e,t,r){"use strict";r.r(t);var a=r(792),n=a.EnvironmentUrls.apiGatewayUrl,o={getExperimentationValues:function(e,t,r){return{url:"".concat(n,"/product-experimentation-platform/v1/projects/").concat(e,"/layers/").concat(t,"/values?parameters=").concat(r.join(",")),withCredentials:!0}}};t.default={url:o,parameterNames:{avatarShopPage:["avatarShopPlacement","isItemDetailsEnabled"],avatarShopRecommendationsAndSearchWeb:[],avatarShopRecommendationsAndSearch:["infiniteScroll"],avatarMarketplaceGuidedFeatures:["topicsEnabledWeb"],avatarMarketplaceShoppingCart:[],avatarMarketplaceSorts:[]},layerNames:{avatarShopPage:"AvatarMarketplace.UI",avatarShopRecommendationsAndSearchWeb:"AvatarMarketplace.RecommendationsAndSearch.Web",avatarShopRecommendationsAndSearch:"AvatarMarketplace.RecommendationsAndSearch",avatarMarketplaceGuidedFeatures:"AvatarMarketplace.GuidedFeatures",avatarMarketplaceShoppingCart:"AvatarMarketplace.ShoppingCart",avatarMarketplaceSorts:"AvatarMarketplace.Sorts"},defaultProjectId:1}},582:function(e,t,r){"use strict";r.r(t);var a={categoryTypes:{Featured:0,All:1,Collectibles:2,Clothing:3,BodyParts:4,Gear:5,Models:6,Plugins:7,Decals:8,Audio:9,Meshes:10,Accessories:11,AvatarAnimations:12,CommunityCreations:13,Recommended:15},defaultGearSubcategoryId:0,mappingToApiParameters:{category:"category",subcategory:"subcategory",gears:"subcategory",sortaggregation:"sortAggregation",sortcurrency:"sortCurrency",sorttype:"sortType",creatortype:"creatorType",creatorid:"creatorTargetId",creatorname:"creatorName",pxmin:"minPrice",pxmax:"maxPrice",keyword:"keyword",includenotforsale:"includeNotForSale",triggeredbytopicdiscovery:"TriggeredByTopicDiscovery",topics:"topics",salestypefilter:"salesTypeFilter"}};r(9597).Z.constant("menuConstants",a),t.default=a},7450:function(e,t,r){"use strict";r.r(t);var a=r(9597);r(582);function n(e,t){t.isSortAvailable=function(){return t.isSearchableCategory(t.currentQuery.category)},t.showCreatorBreadcrumb=function(){return t.data.creatorBreadcrumb&&t.data.creatorBreadcrumb.length>0},t.showPriceBreadcrumb=function(){return t.showFreeBreadcrumb()||t.showCustomPriceBreadcrumb()},t.showFreeBreadcrumb=function(){return t.data.showFreeBreadcrumb},t.showCustomPriceBreadcrumb=function(){if(!t.data.currencyType||t.data.currencyType.currencyType!==t.library.customRobuxFilterId)return!1;if(!t.data.minPriceBreadcrumb&&!t.data.maxPriceBreadcrumb)return t.data.showFreeBreadcrumb=!0,!1;var e=t.data.minPriceBreadcrumb;return"number"==typeof e&&e%1==0},t.isNonDefaultSubcategorySelected=function(){var e=t.getCategoryOption(t.currentQuery.category);return!!(e&&e.subcategories&&t.currentQuery.subcategory)&&e.subcategories[0].subcategoryId!==t.currentQuery.subcategory.subcategoryId},t.clearSubcategory=function(){var e=t.getCategoryOption(t.currentQuery.category);if(e&&e.subcategories){var r=e.subcategories[0];t.currentQuery.subcategory=r}else t.currentQuery.subcategory=null;t.clearKeywordAndCreator()}}n.$inject=["$log","$scope"],a.Z.controller("breadcrumbsController",n),t.default=n},8137:function(e,t,r){"use strict";r.r(t);var a=r(5734),n=r.n(a),o=r(9597);function i(e,t){t.initializeScrollbar=function(){var e=n().element(document.getElementById("search-options-scrollbar-container"));null!==e&&void 0===t.simpleBar&&e.mCustomScrollbar({autoHideScrollbar:!0,autoExpandScrollbar:!1,scrollInertia:1,contentTouchScroll:1,mouseWheel:{preventDefault:!0}})},t.isInitializedPage=function(){var e=t.library,r=e.initialized,a=e.isPhone,n=e.isApp;return t.initializeScrollbar(),r&&!(a&&n)}}i.$inject=["$log","$scope"],o.Z.controller("catalogContentController",i),t.default=i},3772:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _r}});var a=r(792),n=r.n(a),o=r(292),i=r(5734),s=r.n(i),c=RobloxBadges,l=-1,u=function(e){addEventListener("pageshow",(function(t){t.persisted&&(l=t.timeStamp,e(t))}),!0)},d=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},p=function(){var e=d();return e&&e.activationStart||0},m=function(e,t){var r=d(),a="navigate";return l>=0?a="back-forward-cache":r&&(document.prerendering||p()>0?a="prerender":document.wasDiscarded?a="restore":r.type&&(a=r.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:a}},g=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var a=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return a.observe(Object.assign({type:e,buffered:!0},r||{})),a}}catch(e){}},f=function(e,t,r,a){var n,o;return function(i){t.value>=0&&(i||a)&&((o=t.value-(n||0))||void 0===n)&&(n=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,r),e(t))}},y=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},v=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},b=function(e){var t=!1;return function(r){t||(e(r),t=!0)}},h=-1,S=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},C=function(e){"hidden"===document.visibilityState&&h>-1&&(h="visibilitychange"===e.type?e.timeStamp:0,E())},T=function(){addEventListener("visibilitychange",C,!0),addEventListener("prerenderingchange",C,!0)},E=function(){removeEventListener("visibilitychange",C,!0),removeEventListener("prerenderingchange",C,!0)},I=function(){return h<0&&(h=S(),T(),u((function(){setTimeout((function(){h=S(),T()}),0)}))),{get firstHiddenTime(){return h}}},w=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},x=[1800,3e3],P=function(e,t){t=t||{},w((function(){var r,a=I(),n=m("FCP"),o=g("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<a.firstHiddenTime&&(n.value=Math.max(e.startTime-p(),0),n.entries.push(e),r(!0)))}))}));o&&(r=f(e,n,x,t.reportAllChanges),u((function(a){n=m("FCP"),r=f(e,n,x,t.reportAllChanges),y((function(){n.value=performance.now()-a.timeStamp,r(!0)}))})))}))},A=[.1,.25],k=function(e,t){t=t||{},P(b((function(){var r,a=m("CLS",0),n=0,o=[],i=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=o[0],r=o[o.length-1];n&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(n+=e.value,o.push(e)):(n=e.value,o=[e])}})),n>a.value&&(a.value=n,a.entries=o,r())},s=g("layout-shift",i);s&&(r=f(e,a,A,t.reportAllChanges),v((function(){i(s.takeRecords()),r(!0)})),u((function(){n=0,a=m("CLS",0),r=f(e,a,A,t.reportAllChanges),y((function(){return r()}))})),setTimeout(r,0))})))},N=(new Date,[2500,4e3]),F={},U=function(e,t){t=t||{},w((function(){var r,a=I(),n=m("LCP"),o=function(e){var t=e[e.length-1];t&&t.startTime<a.firstHiddenTime&&(n.value=Math.max(t.startTime-p(),0),n.entries=[t],r())},i=g("largest-contentful-paint",o);if(i){r=f(e,n,N,t.reportAllChanges);var s=b((function(){F[n.id]||(o(i.takeRecords()),i.disconnect(),F[n.id]=!0,r(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return setTimeout(s,0)}),!0)})),v(s),u((function(a){n=m("LCP"),r=f(e,n,N,t.reportAllChanges),y((function(){n.value=performance.now()-a.timeStamp,F[n.id]=!0,r(!0)}))}))}}))},R=[800,1800],O=function e(t){document.prerendering?w((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},D=function(e,t){t=t||{};var r=m("TTFB"),a=f(e,r,R,t.reportAllChanges);O((function(){var n=d();if(n){var o=n.responseStart;if(o<=0||o>performance.now())return;r.value=Math.max(o-p(),0),r.entries=[n],a(!0),u((function(){r=m("TTFB",0),(a=f(e,r,R,t.reportAllChanges))(!0)}))}}))},L=function(e,t){var r,a=function(t){e.logWebVitalsEvent(function(e){return{eventName:"webPerformance",metricName:e.name,metricValue:e.value}}(t))},n={},o=function(e){n[e.name]?n[e.name].push(e):n[e.name]=[e]},i=function(){Object.keys(n).forEach((function(e){var t=n[e];a(t.pop()),delete n[e]}))},s=window.setTimeout(i,(null==t?void 0:t.reportThreshold)||1e4);window.addEventListener("beforeunload",(function(){window.clearTimeout(s),i()})),D(a),P(a),r=a,window.performance&&window.addEventListener("load",(function(){var e=performance.getEntriesByType("navigation")[0];r({name:"DCL",value:e.domContentLoadedEventStart})})),function(e){window.performance&&window.addEventListener("load",(function(){var t=performance.getEntriesByType("navigation")[0];e({name:"LT",value:t.domComplete})}))}(a),k(o,{reportAllChanges:!0}),U(o,{reportAllChanges:!0})},B=r(9597),M=r(582),_=r(4720),j=r(7718);function V(e,t,r,n,o,i,s,c){a.EventStream&&a.EventStream.SendEventWithTarget(j.default.autocompleteSuggestionEventData.searchAutocompleteEvent,j.default.autocompleteSuggestionEventData.searchType,{algorithm:e,maxResults:s,timeoutDelay:j.default.autocompleteSuggestionEventData.autocompleteSuggestionEventTimeoutDelay,suggestions:t,kwd:r,previouskwd:n,page:_.pageName.PageNameProvider.getInternalPageName(),searchBox:j.default.autocompleteSuggestionEventData.searchBox,locale:o,searchType:j.default.autocompleteSuggestionEventData.searchType,latency:i,suggestionSource:j.default.autocompleteSuggestionEventData.suggestionSource,isPersonalizedBasedOnPreviousQuery:c},a.EventStream.TargetTypes.WWW)}function W(e,t){a.EventStream&&a.EventStream.SendEventWithTarget(j.default.autocompleteSuggestionEventData.searchTextTrimEvent,j.default.autocompleteSuggestionEventData.searchType,{kwd:e,resultingkwd:t,searchType:j.default.autocompleteSuggestionEventData.searchType},a.EventStream.TargetTypes.WWW)}function Q(e){a.EventStream&&a.EventStream.SendEventWithTarget(j.default.autocompleteSuggestionEventData.catalogSearchEvent,j.default.autocompleteSuggestionEventData.searchType,{autoCompleteFlag:e,previousPage:_.pageName.PageNameProvider.getInternalPageName()},a.EventStream.TargetTypes.WWW)}function G(e){a.EventStream&&a.EventStream.SendEventWithTarget(j.default.autocompleteSuggestionEventData.searchClearEvent,j.default.autocompleteSuggestionEventData.searchType,{kwd:e,searchType:j.default.autocompleteSuggestionEventData.searchType,page:_.pageName.PageNameProvider.getInternalPageName()},a.EventStream.TargetTypes.WWW)}function K(e,t,r,n){a.EventStream&&a.EventStream.SendEventWithTarget(j.default.autocompleteSuggestionEventData.searchSuggestionClickedEvent,j.default.autocompleteSuggestionEventData.searchType,{kwd:e,searchType:j.default.autocompleteSuggestionEventData.searchType,suggestionPosition:t,suggestionClicked:r,suggestions:n,maxResults:0},a.EventStream.TargetTypes.WWW)}function $(e,t,r,n,o,i,s){a.EventStream&&a.EventStream.SendEventWithTarget(j.default.topicEventData.topicSelectEventName,j.default.topicEventData.topicEventContext,{topic:e,rank:t+1,categoryName:r,subcategoryName:n,query:o,allTopics:i,previousSelectedTopics:s},a.EventStream.TargetTypes.WWW)}function q(e,t,r,n,o,i){a.EventStream&&a.EventStream.SendEventWithTarget(j.default.topicEventData.topicDeselectEventName,j.default.topicEventData.topicEventContext,{topic:e,rank:t+1,categoryName:r,subcategoryName:n,query:o,allTopics:i},a.EventStream.TargetTypes.WWW)}function z(e,t,r,n){a.EventStream&&a.EventStream.SendEventWithTarget(j.default.topicEventData.topicClearEventName,j.default.topicEventData.topicEventContext,{categoryName:e,subcategoryName:t,query:r,allTopics:n},a.EventStream.TargetTypes.WWW)}var H=r(6280),Z=React,X=r.n(Z),Y=ReactDOM,J=ReactStyleGuide,ee=RobloxThumbnails,te=RobloxItemPurchase,re=r(7124),ae=r(7904),ne=function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))},oe=function(e,t){var r,a,n,o,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){i.label=o[1];break}if(6===o[0]&&i.label<n[1]){i.label=n[1],n=o;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(o);break}n[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ie=(0,re.ex)(),se=ie.getCartState,ce=ie.onCartStateChange,le=ie.dispatch,ue=ie.getLatestCachedState;function de(){var e=this,t=(0,Z.useState)(ue()),r=t[0],a=t[1],n=r.items.map((function(e){return e.itemId})).sort();(0,Z.useEffect)((function(){var e=se();a(e),le((0,ae.ex)()).catch((function(){console.error("could not refresh cart state")}))}),[]),(0,Z.useEffect)((function(){var e=ce((function(e){return a(e)}));return function(){var t;return null===(t=null==e?void 0:e.remove)||void 0===t?void 0:t.call(e)}}),[]);var o=(0,Z.useCallback)((function(e){return n.includes(e)}),[JSON.stringify(n)]);return{dispatch:le,cart:r,isItemInCart:o,addItemToCart:function(t,r){return ne(e,void 0,void 0,(function(){return oe(this,(function(e){switch(e.label){case 0:return[4,le({type:"ADD_ITEM",item:t,displaySystemFeedback:r})];case 1:return e.sent(),[2,le((0,ae.ex)())]}}))}))},addItemsToCart:function(t,r){return ne(e,void 0,void 0,(function(){return oe(this,(function(e){switch(e.label){case 0:return[4,le({type:"ADD_ITEMS",items:t,displaySystemFeedback:r})];case 1:return e.sent(),[2,le((0,ae.ex)())]}}))}))},removeItemFromCart:function(t,r,a){return ne(e,void 0,void 0,(function(){return oe(this,(function(e){switch(e.label){case 0:return[4,le({type:"REMOVE_ITEM",item:{itemId:t,itemType:r},displaySystemFeedback:a})];case 1:return e.sent(),[2,le((0,ae.ex)())]}}))}))},removeItemsFromCart:function(t,r){return ne(e,void 0,void 0,(function(){return oe(this,(function(e){switch(e.label){case 0:return[4,le({type:"REMOVE_ITEMS",items:t,displaySystemFeedback:r})];case 1:return e.sent(),[2,le((0,ae.ex)())]}}))}))}}}var pe=r(3119),me=r(2722),ge=r(3527),fe=function(){return(fe=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},ye=ee.Thumbnail2d,ve=ee.DefaultThumbnailSize,be=ee.ThumbnailTypes,he=ee.ThumbnailFormat;function Se(e){e.item;var t=e.itemDetails,r=(0,me.jD)(t);if(void 0!==t.collectibleItemId){var a="ShopAndAllExperiences"===t.saleLocationType||"ShopOnly"===t.saleLocationType,n=t.hasResellers;if(!a&&!n)return X().createElement("div",{className:"item-price"},X().createElement("span",{className:"price-text text-alert"},pe.K6.labelItemNotForSale()))}if("number"==typeof r&&r>0)return X().createElement("div",{className:"item-price"},X().createElement("span",{className:"icon-robux-16x16"}),X().createElement("span",{className:"price-text text"},_.numberFormat.getNumberFormat(r)));if("number"==typeof r&&r<0)return X().createElement("div",{className:"item-price"},X().createElement("span",{className:"price-text text"},t.priceStatus));if("number"==typeof r&&0===r)return X().createElement("div",{className:"item-price"},X().createElement("span",{className:"price-text text"},pe.K6.labelFree()));var o=((null==t?void 0:t.itemRestrictions)||[]).some((function(e){return"Limited"===e||"LimitedUnique"===e||"Collectible"===e}));if(o){if(o&&!!(null==t?void 0:t.lowestPrice)&&"number"!=typeof(null==t?void 0:t.lowestPrice))return X().createElement("div",{className:"item-price"},X().createElement("span",{className:"price-text text-alert"},pe.O$.labelNoResellers()))}else if("number"!=typeof r)return X().createElement("div",{className:"item-price"},X().createElement("span",{className:"price-text text-alert"},pe.K6.labelItemNotForSale()));return X().createElement("div",{className:"item-price"},X().createElement("span",{className:"price-text"}))}function Ce(e){var t,r=e.item,a=e.itemDetails,n=e.dispatch,o=e.onCheckboxClicked,i=e.selectedItemsRecord,s=(null==a?void 0:a.name)||r.itemName,c=null==a?void 0:a.creatorName;return X().createElement("div",{className:"cart-item-container"},X().createElement("div",{className:"cart-item"},X().createElement("div",{className:"thumbnail-container",onClick:function(){return o(r)},"aria-hidden":"true"},X().createElement(ye,{type:"bundle"===(null===(t=r.itemType)||void 0===t?void 0:t.toLowerCase())?be.bundleThumbnail:be.assetThumbnail,size:ve,targetId:r.itemId,containerClass:"cart-item-thumb",format:he.webp,altName:(s||"Cart Item")+(c?" by "+c:"")})),X().createElement("div",{className:"checkbox purchase-checkbox-container"},X().createElement("input",{className:"input-checkbox",id:"checkbox-"+r.itemId,type:"checkbox",checked:i[""+r.itemType.toLowerCase()+r.itemId],onChange:function(){o(r)},disabled:!1}),X().createElement("label",{htmlFor:"checkbox-"+r.itemId})),X().createElement("div",{className:"item-details-container"},X().createElement("a",{href:(0,me.vp)(r.itemId,s,r.itemType),target:"_self",className:"item-name"},s),X().createElement(Se,{item:r,itemDetails:a}))),X().createElement("div",{className:"rm-item-btn-container icon-actions-clear-sm"},X().createElement("button",{type:"button",onClick:function(){n((0,ae.ly)(r,!0)).catch((function(){console.error("Failed to remove item")}))}})))}function Te(e){var t,r=e.totalPrice,n=e.remainingBalance,i=e.items,s=e.selectedItemsList,c=e.systemFeedbackService,l=e.totalCartValue,u=e.itemDetails,d=e.dispatch,p=function(e){var t;if(e.itemRestrictions.includes("LimitedUnique")||e.itemRestrictions.includes("Limited"))return!0;if(void 0!==e.collectibleItemId&&void 0!==e.collectibleItemDetails&&e.itemRestrictions.includes("Collectible")){if(!(void 0!==e.collectibleItemDetails.unitsAvailableForConsumption&&e.collectibleItemDetails.unitsAvailableForConsumption>0))return!0;if(void 0!==e.collectibleItemDetails.lowestResalePrice&&e.collectibleItemDetails.lowestResalePrice>(null===(t=e.collectibleItemDetails)||void 0===t?void 0:t.price)||"ExperiencesDevApiOnly"===e.collectibleItemDetails.saleLocationType)return!0}return!1},m=(0,Z.useCallback)((function(e,t,r){var n={totalNumberOfItemsInCart:i.length,totalValueOfItemsInCart:l,totalNumberOfSelectedItemsInCheckout:t,totalValueOfSelectedItemsInCheckout:r,purchaseData:JSON.stringify(e),userId:a.CurrentUser.userId};o.eventStreamService.sendEvent({name:"shoppingCartPurchaseResult",type:"shoppingCartPurchaseResult",context:"shoppingCart"},n),o.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(o.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_CATALOG_CART_ROBUX_UPSELL,!0,o.paymentFlowAnalyticsService.ENUM_VIEW_NAME.ROBUX_UPSELL,o.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,o.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.BUY_ROBUX);var s=0,c=[];e.forEach((function(e){if("Success"===e.data.reason){var t=void 0;void 0!==e.data.itemData.assetId?(t=u[e.data.itemData.assetId],p(t)?void 0!==t.collectibleItemId&&void 0!==t.collectibleItemDetails.lowestResalePrice?s+=t.collectibleItemDetails.lowestResalePrice:void 0!==t.lowestPrice&&(s+=t.lowestPrice):void 0!==t&&t.price&&(s+=t.price),c.push({itemType:t.itemType,itemId:t.id,resalePurchase:p(t)}),d((0,ae.ly)({itemId:e.data.itemData.assetId,itemType:"Asset"})).catch((function(){console.error("Failed to remove item")}))):void 0!==e.data.itemData.bundleId&&(t=u[e.data.itemData.bundleId],p(t)?void 0!==t.collectibleItemId&&void 0!==t.collectibleItemDetails.lowestResalePrice?s+=t.collectibleItemDetails.lowestResalePrice:void 0!==t.lowestPrice&&(s+=t.lowestPrice):void 0!==t&&t.price&&(s+=t.price),c.push({itemType:t.itemType,itemId:t.id,resalePurchase:p(t)}),d((0,ae.ly)({itemId:e.data.itemData.bundleId,itemType:"Bundle"})).catch((function(){console.error("Failed to remove item")})))}}));var m={totalTransactionValue:s,transactionItems:JSON.stringify(c),purchaseType:"shopping-cart",userId:a.CurrentUser.userId};o.eventStreamService.sendEvent({name:"marketplaceWebPurchaseSuccess",type:"marketplaceWebPurchaseSuccess",context:"marketplaceWebPurchase"},m)}),[]),g=new Map;return X().createElement("div",{className:"shopping-cart-footer"},X().createElement("div",{className:"cart-total-section-container"},X().createElement("div",{className:"total-label"},pe.O$.labelTotalItems({itemCount:""+s.length})),X().createElement("div",{className:"total-price-container"},X().createElement("span",{className:"icon-robux-16x16"}),X().createElement("span",{className:"price-text"},r.toLocaleString()))),s.length>ge.ZP.maxSelectedItems&&X().createElement(J.Button,{className:"action-button batch-buy-purchase-button",variant:J.Button.variants.growth,size:J.Button.sizes.large,onClick:function(){c.warning(pe.O$.messagePurchaseLimit({purchaseLimit:""+ge.ZP.maxSelectedItems}),0,2e3)}},pe.O$.actionBuy()),s.length<=ge.ZP.maxSelectedItems&&X().createElement(te.BatchBuyPriceContainer,{items:(t=[],s.forEach((function(e){t.push({id:e.itemId,itemType:e.itemType})})),t),purchaseMetadata:g,onTransactionComplete:function(e){m(e,s.length,r)},systemFeedbackService:c}),X().createElement("div",{className:"balance-disclaimer-container"},n>=0?X().createElement("div",{className:"balance-disclaimer-text",dangerouslySetInnerHTML:{__html:pe.O$.messageRemainingBalance({remainingBalance:"<span class='icon-robux-16x16'></span><span class='text-robux'>"+(0,_.escapeHtml)()(n.toLocaleString())+"</span>"})}}):X().createElement("div",{className:"balance-disclaimer-text"},pe.O$.messageInsufficientFundsForTransaction())))}function Ee(e){var t,r=de(),a=r.cart,n=r.dispatch,o=a.items,i=a.currentUserBalance,s=a.itemDetails,c=Math.max(null!==(t=i)&&void 0!==t?t:0,0),l=(0,Z.useRef)(null),u=(0,Z.useState)({windowHeight:window.innerHeight,width:null,height:null,top:null,left:null}),d=u[0],p=u[1],m=(0,Z.useState)(0),g=m[0],f=m[1],y=(0,Z.useState)(0),v=y[0],b=y[1],h=(0,Z.useState)([]),S=h[0],C=h[1],T=(0,Z.useState)({}),E=T[0],I=T[1];(0,Z.useEffect)((function(){var e=(0,me.rW)();I(e.selectedItems)}),[]),(0,Z.useEffect)((function(){var e=(0,me.rW)();I(e.selectedItems)}),[o]),(0,Z.useEffect)((function(){var e,t,r=[];o.forEach((function(e){E[""+e.itemType.toLowerCase()+e.itemId]&&r.push(e)})),e=r,t=(0,me.gg)(a,e),f(t),b(c-g),C(r)}),[E]);var w=function(t){var r,a=null==t?void 0:t.target,n=null==l?void 0:l.current;if(a instanceof Element){if(n&&n.contains(a))return;if((0,me.YK)(a))return;null===(r=null==e?void 0:e.setIsCartOpen)||void 0===r||r.call(e,!1)}},x=(0,Z.useCallback)((function(e){if(e&&e instanceof HTMLElement){var t=function(e){var t,r,a,n=null===(t=null==e?void 0:e.getBoundingClientRect)||void 0===t?void 0:t.call(e);if(n&&(null==n?void 0:n.width)&&(null==n?void 0:n.height)){var o={windowHeight:window.innerHeight,width:null==n?void 0:n.width,height:null==n?void 0:n.height,top:null!==(r=null==n?void 0:n.top)&&void 0!==r?r:null==n?void 0:n.y,left:null!==(a=null==n?void 0:n.left)&&void 0!==a?a:null==n?void 0:n.x};p(o)}};t(e);var r=new IntersectionObserver((function(r){var a=null==r?void 0:r[0];(null==a?void 0:a.target)&&t(e)}),{root:null,rootMargin:"0px",threshold:[.9,.99,1]}),a=new ResizeObserver((function(r){t(e)}));r.observe(e),a.observe(document.body,{box:"border-box"})}}),[]),P=(0,Z.useMemo)((function(){var e=d.height,t=d.top;if("number"!=typeof e||"number"!=typeof t)return 600;var r=e+t;if(r>d.windowHeight){var a=r-d.windowHeight;return Math.max(460,e-a-20)}if(r<d.windowHeight-20){var n=d.windowHeight-20-t;if(n>=460)return Math.min(600,n)}return d.height?d.height:0}),[d.windowHeight,d.height,d.top]),A=function(t,r){var n=E,o=""+t.itemType.toLowerCase()+t.itemId,i=!1;(i=void 0===r?void 0===n[o]||!n[o]:r)&&S.length>=ge.ZP.maxSelectedItems&&(i=!1,e.systemFeedbackService.warning(pe.O$.messagePurchaseLimit({purchaseLimit:""+ge.ZP.maxSelectedItems}),0,2e3)),n[o]=i,I(fe({},n)),(0,me.F5)(fe(fe({},a),{selectedItems:E}))};(0,Z.useEffect)((function(){return window.addEventListener("click",w,!0),function(){window.removeEventListener("click",w,!0)}}),[]);var k="("+o.length+")";return X().createElement("div",{ref:l,className:"shopping-cart-modal-container"},X().createElement("div",{ref:x,className:"shopping-cart-modal",style:{height:P+"px"}},X().createElement("div",{className:"shopping-cart-title-container"},X().createElement("h2",{className:"shopping-cart-title"},X().createElement("span",{className:"shopping-cart-title-text"},pe.O$.labelShoppingCart())," ",X().createElement("span",{className:"shopping-cart-title-item-count"},k))),X().createElement(J.ScrollBar,{className:"rbx-scrollbar"},X().createElement("div",{className:"shopping-cart-items-list"},o.map((function(e){return X().createElement(Ce,{key:e.itemId,item:e,itemDetails:s[e.itemId],dispatch:n,onCheckboxClicked:A,selectedItemsRecord:E})})))),X().createElement(Te,{totalPrice:g,totalCartValue:(0,me.gg)(a,a.items),remainingBalance:v,items:o,selectedItemsList:S,systemFeedbackService:e.systemFeedbackService,itemDetails:s,dispatch:n})))}Ee.propTypes={};var Ie=Ee,we=r(6174);function xe(e){var t=e.totalCartItems,r=e.isCartOpen;return X().createElement("div",{className:"shopping-cart-icon-container"},X().createElement("div",{className:(r?"cart-open":"")+" shopping-cart-icon"}),X().createElement("span",{className:"cart-number-container"},X().createElement("span",{className:"cart-number"},t||0)))}var Pe=(0,J.createSystemFeedback)(),Ae=Pe[0],ke=Pe[1];function Ne(){var e=(0,Z.useState)(!1),t=e[0],r=e[1],a=de().cart;(0,we.mP)(ke);var n=a.items;return X().createElement(Z.Fragment,null,X().createElement(Ae,null),X().createElement("div",{className:"shopping-cart-btn-container"},X().createElement("button",{className:"shopping-cart-btn",onClick:function(){r(!t)},type:"button"},X().createElement(xe,{totalCartItems:null==n?void 0:n.length,isCartOpen:t})),!!t&&X().createElement(Ie,{setIsCartOpen:r,systemFeedbackService:ke})))}Ne.propTypes={};var Fe=Ne,Ue=function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))},Re=function(e,t){var r,a,n,o,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){i.label=o[1];break}if(6===o[0]&&i.label<n[1]){i.label=n[1],n=o;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(o);break}n[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};var Oe=function(e,t){return void 0===t&&(t=0),Ue(void 0,void 0,Promise,(function(){return Re(this,(function(r){switch(r.label){case 0:return function(e){var t=document.getElementById(e);return!!t&&(t.querySelector(".shopping-cart-btn-container")||(0,Y.render)(X().createElement(Fe,null),t),!0)}(e)?[3,2]:t>=20?[2,!1]:[4,(a=100,void 0===a&&(a=100),new Promise((function(e,t){setTimeout((function(){e(void 0)}),a)})))];case 1:return r.sent(),[2,Oe(e,t+1)];case 2:return[2,!0]}var a}))}))},De=ReactUtilities,Le=r(2779),Be=r.n(Le);var Me=function(e){var t=e.numberOfItemsToDisplay,r=Array.from({length:t},(function(e,t){return t}));return X().createElement("ul",{id:"catalog-react-shimmer-container",className:"hlist item-cards-stackable"},r.map((function(e,t){return X().createElement("li",{key:e,className:"list-item item-card"},X().createElement("div",{className:"item-card-container"},X().createElement("div",{className:"item-card-link"},X().createElement("div",{className:"item-card-thumb-container"},X().createElement("div",{className:"shimmer item-card-thumb-progressive-loading"}))),X().createElement("ul",{className:"item-card-caption-progressive-loading shimmer-lines"},X().createElement("li",{className:"placeholder shimmer-line"}),X().createElement("li",{className:"placeholder shimmer-line"}),X().createElement("li",{className:"placeholder shimmer-line"}))))})))},_e=function(e,t){var r=e.defaultCreatorId,a=(0,Z.useState)(),n=a[0],o=a[1],i=(0,Z.useState)(),s=i[0],c=i[1];(0,Z.useEffect)((function(){var e=t.creatorName,a=t.creator,n=!!a&&a.userId!==r;o(e||(n?null==a?void 0:a.name:null)),c(n)}),[t,r]);var l=(0,Z.useState)(!1),u=l[0],d=l[1];(0,Z.useEffect)((function(){d(!!(s&&n&&n.length>0))}),[s,n]);var p=(0,Z.useState)(),m=p[0];p[1];return{showCreatorBreadcrumb:u,isCreatorAGroup:m,creatorBreadcrumb:n}},je=function(e,t){var r=t.currencyType,a=t.minPrice,n=t.maxPrice,o=e.customRobuxFilterId,i=e.defaultCategoryId,s=e.freeFilterId,c=(0,Z.useState)(!1),l=c[0],u=c[1];(0,Z.useEffect)((function(){var e=!1;r&&r.currencyType===s?e=!0:r&&r.currencyType===o&&(a||0!==n||(e=!0)),u(e)}),[r,i,s,o,a,n]);var d=(0,Z.useState)(!1),p=d[0],m=d[1];return(0,Z.useEffect)((function(){var e=!1;(a||"number"==typeof n)&&(e=!0),r&&r.currencyType===o&&e?m(!0):m(!1)}),[r,i,s,o,a,n]),{showFreeBreadcrumb:l,showCustomPriceBreadcrumb:p}},Ve={defaults:{subcategory:"0"},allGearSubcategoryId:"0",buyRobuxUrl:a.EnvironmentUrls.websiteUrl+"/upgrades/robux?ctx=catalogNew",fallbackVngShopUrl:a.EnvironmentUrls.vngGamesShopUrl,catalogUrl:a.EnvironmentUrls.websiteUrl+"/catalog",numberOfSearchItems:30,numberOfSearchItemsForFullScreen:60,numberOfSearchItemsExpanded:120,expandedCategoryList:["Recommended"],endpoints:{getMetadata:{url:a.EnvironmentUrls.catalogApi+"/v1/catalog/metadata",retryable:!0,withCredentials:!0},getSearchOptionsUrl:{url:a.Endpoints?a.Endpoints.getAbsoluteUrl("/catalog/search-options"):"/catalog/search-options"},getNavigationMenuItems:{url:a.EnvironmentUrls.catalogApi+"/v1/search/navigation-menu-items",retryable:!0,withCredentials:!0},getSearchItems:{url:a.EnvironmentUrls.catalogApi+"/v1/search/items",retryable:!0,withCredentials:!0},getCatalogItemDetails:{url:a.EnvironmentUrls.catalogApi+"/v1/catalog/items/details",retryable:!1,withCredentials:!0},performanceMeasurements:{url:a.EnvironmentUrls.metricsApi+"/v1/performance/measurements",retryable:!1,withCredentials:!0},avatarRequestSuggestion:{url:a.EnvironmentUrls.apiGatewayUrl+"/autocomplete-avatar/v2/suggest",withCredentials:!0,timeout:5e3},avatarRequestCdnSuggestion:{url:a.EnvironmentUrls.apiGatewayCdnUrl+"/autocomplete-avatar/v2/suggest",withCredentials:!0,timeout:5e3},postGetTopics:{url:a.EnvironmentUrls.catalogApi+"/v1/topic/get-topics",withCredentials:!0,timeout:5e3},getUserCurrency:{url:"/v1/users/{userId}/currency",withCredentials:!0,timeout:5e3},postMarketplaceItemDetails:{url:a.EnvironmentUrls.apiGatewayUrl+"/marketplace-items/v1/items/details",retryable:!1,withCredentials:!0},getVngBuyRobuxBehavior:{url:a.EnvironmentUrls.universalAppConfigurationApi+"/v1/behaviors/vng-buy-robux/content",withCredentials:!0},getAppPolicyBehavior:{url:a.EnvironmentUrls.universalAppConfigurationApi+"/v1/behaviors/app-policy/content",withCredentials:!0},getSignedVngShopUrl:{url:a.EnvironmentUrls.apiGatewayUrl+"/vng-payments/v1/getVngShopUrl",withCredentials:!0}},getResellerDataUrl:function(e){return a.EnvironmentUrls.economyApi+"/v1/assets/"+e+"/resellers?limit=10"},itemTypes:{bundle:"Bundle",asset:"Asset"},priceStatus:{free:"Free",noResellers:"NoResellers"},itemRestrictionTypes:{thirteenPlus:"ThirteenPlus",limitedUnique:"LimitedUnique",limited:"Limited",rthro:"Rthro",dynamicHead:"Live",collectible:"Collectible"},itemRestrictionIcons:{thirteenPlus:"icon-thirteen-plus-label",limited:"icon-limited-label",limitedUnique:"icon-limited-unique-label",thirteenPlusLimited:"icon-thirteen-plus-limited-label",thirteenPlusLimitedUnique:"icon-thirteen-plus-limited-unique-label",rthroLabel:"icon-rthro-label",rthroLimitedLabel:"icon-rthro-limited-label",dynamicHead:"icon-default-dynamichead",collectible:"icon-limited-unique-label"},robloxSystemUserId:1,userTypes:{user:"User",group:"Group"},errorMessages:{categoryName:"CatalogPageAjaxErrors",endpointNames:{getSearchItems:"SearchItems",getCatalogItemDetails:"CatalogItemDetails"}},englishLanguageCode:"en",autocompleteQueryAmount:10,autocompleteSuggestionEventData:{autocompleteSuggestionEventContext:"webAvatarShop",autocompleteSuggestionEventTimeoutDelay:200,searchAutocompleteEvent:"searchAutocomplete",searchTextTrimEvent:"searchTextTrim",catalogSearchEvent:"catalogSearch",searchClearEvent:"searchClear",searchSuggestionClickedEvent:"searchSuggestionClicked",pageName:"Avatar Shop",searchBox:"avatarShopDesktop",searchType:"avatarshopsearch",suggestionSource:"server"},topics:{categoriesToShowTopics:[1,15],maxTopicsToRequest:40,numberOfItemsToSend:10,topicCarouselId:"topic-carousel",topicCarouselScrollValue:500},topicEventData:{topicEventContext:"webAvatarShop",topicSelectEventName:"selectCatalogTopic",topicDeselectEventName:"deselectCatalogTopic",topicClearEventName:"clearAllTopics"},itemTypeIds:{asset:1,bundle:2},topUp:{resetTime:6048e5,robuxThreshold:50,displayCategories:[1]},keywordSearch:{censoredKey:"###"}},We={common:[""],feature:"Feature.Catalog"},Qe=We;var Ge=(0,De.withTranslations)((function(e){var t=e.searchOptions,r=e.catalogQuery,a=e.isKeywordCensored,n=e.getCategoryOption,o=e.setSubcategory,i=e.setCreator,s=e.setCurrencyType,c=e.clearKeyword,l=e.translate,u=t.creators,d=t.defaultCreatorId,p=t.currencyTypes,m=r.category,g=r.subcategory,f=r.minPrice,y=r.maxPrice,v=r.keyword,b=_e(t,r),h=b.showCreatorBreadcrumb,S=b.isCreatorAGroup,C=b.creatorBreadcrumb,T=je(t,r),E=T.showFreeBreadcrumb,I=T.showCustomPriceBreadcrumb,w=a||v&&v.length>0,x=(0,Z.useState)(!1),P=x[0],A=x[1];(0,Z.useEffect)((function(){var e=n(m);if(e&&e.subcategories&&g){var t=e.subcategories[0];A(t.subcategoryId!==g.subcategoryId)}else A(!1)}),[n,m,g]);var k=(0,Z.useCallback)((function(e){void 0===e&&(e=!1),s(p?p[0]:null),e||c()}),[c,p,s]),N=(0,Z.useCallback)((function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var r=null==u?void 0:u.find((function(e){return e.userId===d}));i(r),e?c():k(t)}),[u,d,c,k,i]),F=(0,Z.useCallback)((function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),e?c():N(!1,t)}),[c,N]),U=(0,Z.useCallback)((function(){var e=n(m);if(e&&e.subcategories){var t=e.subcategories[0];o(t)}else o(null);F()}),[m,n,F,o]);return X().createElement("div",{id:"catalog-react-breadcrumbs",className:"breadcrumbs"},X().createElement("ul",{className:"breadcrumb-container"},X().createElement("li",null,X().createElement("button",{type:"button",className:"text-link breadcrumb-link",onClick:U},null==m?void 0:m.name)),P&&X().createElement(X().Fragment,null,X().createElement("li",null,X().createElement("span",{className:"icon-right-16x16"})),X().createElement("li",null,X().createElement("button",{type:"button",className:"text-link breadcrumb-link",onClick:F},null==g?void 0:g.name))),(E||I||h)&&X().createElement("li",null,X().createElement("span",{className:"icon-right-16x16"})),h&&X().createElement("li",{className:"breadcrumb-filter"},X().createElement("button",{type:"button",onClick:k},X().createElement("span",{className:"breadcrumb-filter-name"},S&&X().createElement("span",{className:"breadcrumb-group-label"},l("Label.BreadCrumb.Group")),C))),E||I&&X().createElement("li",{className:"breadcrumb-filter"},X().createElement("button",{type:"button",onClick:c},E&&X().createElement("span",{className:"breadcrumb-filter-name"},l("Label.BreadCrumb.Free")),I&&X().createElement("span",{className:"breadcrumb-filter-name"},f&&!y?X().createElement(X().Fragment,null,X().createElement("span",{className:"icon-robux-gray-16x16"}),l("Label.BreadCrumb.PriceAbove",{price:f.toString()})):null,y&&f?X().createElement(X().Fragment,null,X().createElement("span",{className:"icon-robux-gray-16x16"}),f," - ",X().createElement("span",{className:"icon-robux-gray-16x16"}),y):null,y&&!f?X().createElement(X().Fragment,null,X().createElement("span",{className:"icon-robux-gray-16x16"}),l("Label.BreadCrumb.PriceBelow",{price:y.toString()})):null))),w&&X().createElement(X().Fragment,null,X().createElement("li",null,X().createElement("span",{className:"icon-right-16x16"})),X().createElement("li",null,X().createElement("span",{className:"text-link breadcrumb-link"},a?Ve.keywordSearch.censoredKey:v)))))}),Qe),Ke=r(7723),$e=r.n(Ke),qe=r(9127),ze=r.n(qe),He=r(990),Ze=r.n(He);var Xe=Object.keys({Keyword:"example keyword",TriggeredByTopicDiscovery:!0,topics:"example topic",Category:1,Subcategory:2,Gears:3,CreatorID:1234,CreatorType:"example type",CreatorName:"Example Name",CurrencyType:1,pxMin:100,pxMax:1e3,salesTypeFilter:2,SortType:1,SortAggregation:1,IncludeNotForSale:!0});var Ye={New:{class:"status-new",label:"Label.New"},Sale:{class:"status-sale",label:"Label.Sale"},XboxExclusive:{class:"status-default has-text",label:"Label.Xbox"},AmazonExclusive:{class:"status-default has-text",label:"Label.Amazon"},GooglePlayExclusive:{class:"status-default has-text",label:"Label.GoogleOnly"},IosExclusive:{class:"status-default has-text",label:"Label.AppleOnly"},SaleTimer:{isIcon:!0,type:"icon-clock"}},Je=function(){return(Je=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},et=function(){function e(){}return e.buildItemDetailsUrl=function(e){var t=e.itemType,r=e.id,n=Ve.itemTypes;switch(t){case n.bundle:return a.Endpoints.getAbsoluteUrl?a.Endpoints.getAbsoluteUrl("/bundles/"+r+"/"):a.EnvironmentUrls.websiteUrl+"/bundles/"+r+"/";case n.asset:default:return a.Endpoints.getAbsoluteUrl?a.Endpoints.getAbsoluteUrl("/catalog/"+r+"/"):a.EnvironmentUrls.websiteUrl+"/catalog/"+r+"/"}},e.getNameForDisplay=function(e){var t=Ve.userTypes,r=Ve.robloxSystemUserId,n=e.creatorName,o=e.creatorType,i=e.creatorTargetId;return t.user===o&&r!==i&&a.DisplayNames.Enabled()?_.concatTexts.concat(["",n]):n},e.getQueriesValueIntoInt=function(e){var t={};return e.forEach((function(e,r){var a=parseInt(e,10);"Category"===r?t.Category=a:"Subcategory"===r?t.Subcategory=a:"SortType"===r?t.SortType=a:"SortAggregation"===r?t.SortAggregation=a:"CurrencyType"===r?t.CurrencyType=a:"Gears"===r?t.Gears=a:"CreatorID"===r?t.CreatorID=a:"pxMin"===r?t.pxMin=a<0?0:a:"pxMax"===r?t.pxMax=a<0?0:a:"salesTypeFilter"===r?t.salesTypeFilter=a:"IncludeNotForSale"===r?"false"!==e&&(t.IncludeNotForSale=!0):"Keyword"===r?t.Keyword=e:"topics"===r?t.topics=e:"CreatorType"===r?t.CreatorType=e:"CreatorName"===r?t.CreatorName=e:"TriggeredByTopicDiscovery"===r&&(t.TriggeredByTopicDiscovery="true"===e)})),t},e.getCatalogContentKey=function(e){var t=e.id;return e.itemType+"_"+t},e.updateSearchItemDetails=function(t,r){t&&t.forEach((function(t){var a=t.key,n=Je(Je({},t),{detailsUrl:e.buildItemDetailsUrl(t),nameForDisplay:e.getNameForDisplay(t),detailsLoaded:!0});Object.assign(r[a],n)}))},e.formatQueries=function(e,t){var r={};return Object.entries(e).forEach((function(e){var t=e[0],a=e[1],n=t;"Category"===n?r.category=a:"Subcategory"===n||"Gears"===n?r.subcategory=a:"topics"===n?r.topics=a:"SortType"===n?r.sortType=a:"SortAggregation"===n?r.sortAggregation=a:"Keyword"===n?r.keyword=a:"pxMin"===n?r.minPrice=a:"pxMax"===n?r.maxPrice=a:"TriggeredByTopicDiscovery"===n?r.TriggeredByTopicDiscovery=a:"CreatorID"===n?r.creatorTargetId=a:"CreatorType"===n?r.creatorType=a:"CreatorName"===n?r.creatorName=a:"IncludeNotForSale"===n?r.includeNotForSale=a:"salesTypeFilter"===n&&(r.salesTypeFilter=a)})),t&&(r.cursor=t),r},e.appendQueryParamsToUrl=function(e,t){var r=new URL(window.location.href),a=new URLSearchParams(r.search);Xe.forEach((function(e){a.has(e)&&a.delete(e)})),Object.entries(e).forEach((function(e){var t=e[0],r=e[1];null!=r&&(!0===r||a.set(t,r.toString()))}));var n=a.toString();Object.entries(e).forEach((function(e){var t=e[0];!0===e[1]&&(n+="&"+t)}));var o=""+r.origin+r.pathname+"?"+n;o!==window.location.href&&(window.history.pushState({path:o},"",o),t(o))},e.mapItemRestrictionIcons=function(e){var t={isLimited:!1,isRthro:!1,isThirteenPlus:!1,isLimitedUnique:!1,itemRestrictionIcon:"",isCollectible:!1,isDynamicHead:!1};if(e&&e.itemRestrictions){var r=Ve.itemTypes,a=Ve.itemRestrictionTypes,n=Ve.itemRestrictionIcons,o=e.itemRestrictions;t.isLimited=o.includes(a.limited),t.isCollectible=o.includes(a.collectible),t.isRthro=o.includes(a.rthro),t.isDynamicHead=o.includes(a.dynamicHead),t.isThirteenPlus=o.includes(a.thirteenPlus),t.isLimitedUnique=o.includes(a.limitedUnique),e.itemType===r.bundle?t.isLimited?t.itemRestrictionIcon=t.isRthro?n.rthroLimitedLabel:n.rthroLabel:t.isDynamicHead?t.itemRestrictionIcon=n.dynamicHead:t.isCollectible&&(t.itemRestrictionIcon=n.collectible):t.isLimitedUnique?t.itemRestrictionIcon=t.isThirteenPlus?n.thirteenPlusLimitedUnique:n.limitedUnique:t.isLimited?t.itemRestrictionIcon=t.isThirteenPlus?n.thirteenPlusLimited:n.limited:t.isThirteenPlus?t.itemRestrictionIcon=n.thirteenPlus:t.isDynamicHead?t.itemRestrictionIcon=n.dynamicHead:t.isCollectible&&(t.itemRestrictionIcon=n.collectible)}return t},e.mapItemStatusIconsAndLabels=function(e,t){if(e&&e.itemStatus){var r=[];return e.itemStatus.forEach((function(e){var a=Ye[e];a&&(!function(e){return void 0!==e.isIcon}(a)?r.push({class:a.class,label:t(a.label)}):r.push(a))})),r}},e.translateToEnumStrings=function(e,t){var r={category:null,subcategory:null},a=t.category,n=t.subcategory,o=t.gears;if(a&&e&&e[a]){var i=e[a],s=i.categoryEnum,c=i.subcategoryEnums;if(r=Je(Je({},r),{category:s}),c){var l=null;o?l=c[o]:n&&(l=c[n]),l&&(r=Je(Je({},r),{subcategory:l}))}}return Je(Je({},t),r)},e.buildUserLink=function(e){var t=e||{},r=t.creatorType,n=t.creatorTargetId,o=Ve.userTypes;switch(r){case o.group:return a.Endpoints.getAbsoluteUrl("/groups/"+n);case o.user:default:return a.Endpoints.getAbsoluteUrl("/users/"+n+"/profile")}},e.formatTopic=function(e){return e.toLowerCase()},e.buildTopicKeyword=function(t,r){var a="";return t.forEach((function(t){a.length>0&&(a+=r),a+=e.formatTopic(t.displayName)})),a},e.getCategoryMenu=function(e,t){if(void 0!==t)return null==e?void 0:e.find((function(e){return e.categoryId===t}))},e.isKeywordResultCensored=function(e){return e===Ve.keywordSearch.censoredKey},e.buildErrorMessages=function(e,t){var r="userId-"+a.CurrentUser.userId;return e&&e.length>0&&e.forEach((function(e){var t=e.code,a=e.message;r+="-code-"+(t||"")+"-message-"+a})),r+="-userAgent-"+t},e}(),tt=function(){function e(){}return e.sendSearchAutocompleteEvent=function(e,t,r,n,o,i,s,c){a.EventStream&&a.EventStream.SendEventWithTarget(Ve.autocompleteSuggestionEventData.searchAutocompleteEvent,Ve.autocompleteSuggestionEventData.searchType,{algorithm:e,maxResults:s,timeoutDelay:Ve.autocompleteSuggestionEventData.autocompleteSuggestionEventTimeoutDelay,suggestions:t,kwd:r,previouskwd:n,page:_.pageName.PageNameProvider.getInternalPageName(),searchBox:Ve.autocompleteSuggestionEventData.searchBox,locale:o,searchType:Ve.autocompleteSuggestionEventData.searchType,latency:i,suggestionSource:Ve.autocompleteSuggestionEventData.suggestionSource,isPersonalizedBasedOnPreviousQuery:c},a.EventStream.TargetTypes.WWW)},e.sendSearchTextTrimEvent=function(e,t){a.EventStream&&a.EventStream.SendEventWithTarget(Ve.autocompleteSuggestionEventData.searchTextTrimEvent,Ve.autocompleteSuggestionEventData.searchType,{kwd:e,resultingkwd:t,searchType:Ve.autocompleteSuggestionEventData.searchType},a.EventStream.TargetTypes.WWW)},e.sendCatalogSearchEvent=function(e){a.EventStream&&a.EventStream.SendEventWithTarget(Ve.autocompleteSuggestionEventData.catalogSearchEvent,Ve.autocompleteSuggestionEventData.searchType,{autoCompleteFlag:e,previousPage:_.pageName.PageNameProvider.getInternalPageName()},a.EventStream.TargetTypes.WWW)},e.sendSearchClearEvent=function(e){a.EventStream&&a.EventStream.SendEventWithTarget(Ve.autocompleteSuggestionEventData.searchClearEvent,Ve.autocompleteSuggestionEventData.searchType,{kwd:e,searchType:Ve.autocompleteSuggestionEventData.searchType,page:_.pageName.PageNameProvider.getInternalPageName()},a.EventStream.TargetTypes.WWW)},e.sendSearchSuggestionClickedEvent=function(e,t,r,n){a.EventStream&&a.EventStream.SendEventWithTarget(Ve.autocompleteSuggestionEventData.searchSuggestionClickedEvent,Ve.autocompleteSuggestionEventData.searchType,{kwd:e,searchType:Ve.autocompleteSuggestionEventData.searchType,suggestionPosition:t,suggestionClicked:r,suggestions:n,maxResults:0},a.EventStream.TargetTypes.WWW)},e.sendTopicSelectedEvent=function(e,t,r,n,o,i,s){a.EventStream&&a.EventStream.SendEventWithTarget(Ve.topicEventData.topicSelectEventName,Ve.topicEventData.topicEventContext,{topic:e,rank:t+1,categoryName:r,subcategoryName:n,query:o,allTopics:i,previousSelectedTopics:s},a.EventStream.TargetTypes.WWW)},e.sendTopicDeselectedEvent=function(e,t,r,n,o,i){a.EventStream&&a.EventStream.SendEventWithTarget(Ve.topicEventData.topicDeselectEventName,Ve.topicEventData.topicEventContext,{topic:e,rank:t+1,categoryName:r,subcategoryName:n,query:o,allTopics:i},a.EventStream.TargetTypes.WWW)},e.sendTopicClearedEvent=function(e,t,r,n){a.EventStream&&a.EventStream.SendEventWithTarget(Ve.topicEventData.topicClearEventName,Ve.topicEventData.topicEventContext,{categoryName:e,subcategoryName:t,query:r,allTopics:n},a.EventStream.TargetTypes.WWW)},e}(),rt=function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e},at=function(e,t,r,a,n,o){var i=(0,Z.useState)(0),s=i[0],c=i[1],l=o.current,u=(0,Z.useCallback)((function(){l&&c(l.scrollWidth-l.offsetWidth)}),[l]);(0,Z.useEffect)((function(){return u(),window.addEventListener("resize",u),function(){return window.removeEventListener("resize",u)}}),[u]),(0,Z.useEffect)((function(){u()}),[t,e.topics,u]);var d=(0,Z.useState)(0),p=d[0],m=d[1];(0,Z.useEffect)((function(){m(0)}),[t]);var g=(0,Z.useState)(),f=g[0],y=g[1],v=(0,Z.useState)(),b=v[0],h=v[1],S=(0,Z.useState)(),C=S[0],T=S[1];(0,Z.useEffect)((function(){var t,r=s>0&&p>0;y(r),h(s>0&&p+1<s);var a=!r&&!!(null===(t=e.topics)||void 0===t?void 0:t.length);T(a)}),[p,s,e.topics]),(0,Z.useEffect)((function(){var e=l,t=function(t){e&&m(e.scrollLeft)};return e&&e.addEventListener("scroll",t,!0),function(){e&&e.removeEventListener("scroll",t,!0)}}),[l]);var E=function(){a(!0)};return{showLeftTopicNavigationButton:f,onTopicNavigationButtonClicked:function(e){var t=l;if(t){var r=t.scrollLeft;e?(t.scrollLeft-=Ve.topics.topicCarouselScrollValue,r-=Ve.topics.topicCarouselScrollValue):(t.scrollLeft+=Ve.topics.topicCarouselScrollValue,r+=Ve.topics.topicCarouselScrollValue),m(r)}},showClearTopicNavigationButton:C,onTopicClearButtonClicked:function(){var r,a;tt.sendTopicClearedEvent(null===(r=e.category)||void 0===r?void 0:r.name,null===(a=e.subcategory)||void 0===a?void 0:a.name,e.keyword,et.buildTopicKeyword(t,",")),n(),E()},onTopicClicked:function(a){var n=e.category,o=e.subcategory,i=e.keyword,s=e.topics,c=s.indexOf(a),u=rt([],s);c>-1?(tt.sendTopicDeselectedEvent(a.displayName,c,null==n?void 0:n.name,null==o?void 0:o.name,i,et.buildTopicKeyword(t,",")),u=u.filter((function(e,t){return t!==c}))):(tt.sendTopicSelectedEvent(a.displayName,t.indexOf(a),null==n?void 0:n.name,null==o?void 0:o.name,i,et.buildTopicKeyword(t,","),et.buildTopicKeyword(s,",")),u.push(a)),r(u),u.length||E(),l&&(l.scrollLeft=0,m(0))},showRightTopicNavigationButton:b}};var nt=function(e){var t=e.topicBasedBrowsingEnabledForCategory,r=e.catalogQuery,a=e.topics,n=e.setSelectedTopics,o=e.onClearFilters,i=e.clearTopics,s=(0,Z.useRef)(null),c=at(r,a,n,o,i,s),l=c.showLeftTopicNavigationButton,u=c.onTopicNavigationButtonClicked,d=c.showClearTopicNavigationButton,p=c.onTopicClearButtonClicked,m=c.onTopicClicked,g=c.showRightTopicNavigationButton;return X().createElement(X().Fragment,null,t&&X().createElement("div",{className:"topic-container"},l&&X().createElement("span",{className:"topic-navigation-left topic-navigation-blur-left"},X().createElement("button",{type:"button",className:"topic-navigation-button",onClick:function(){return u(!0)}},X().createElement("span",{className:"icon-left-gray"}))),d&&X().createElement("span",{className:"topic-navigation-clear"},X().createElement("button",{type:"button",className:"topic-navigation-button",onClick:p},X().createElement("span",{className:"icon-actions-clear-sm"}))),X().createElement("span",{className:"topic-carousel",id:"topic-carousel",ref:s},r.topics.map((function(e){return X().createElement("button",{type:"button",key:e.displayName+"-"+e.originalTopicName,className:"topic selected-topic selected-topic-react",onClick:function(){return m(e)}},et.formatTopic(e.displayName),X().createElement("span",{className:"icon-close"}))})),a.map((function(e){return X().createElement("button",{type:"button",key:e.displayName+"-"+e.originalTopicName,className:"topic unselected-topic",onClick:function(){return m(e)}},et.formatTopic(e.displayName))}))),(!r.topics||!a||0===r.topics.length&&0===a.length)&&X().createElement("span",{className:"topic-carousel-placeholder"}),g&&X().createElement("span",{className:"topic-navigation-right topic-navigation-blur-right"},X().createElement("button",{type:"button",className:"topic-navigation-button",onClick:function(){return u(!1)}},X().createElement("span",{className:"icon-right-gray"})))))};var ot=function(e,t,r,a,n){var o=(0,Z.useState)(),i=o[0],s=o[1],c=(0,Z.useState)(),l=c[0],u=c[1],d=!(e.isSearchItemsLoaded&&l)&&!e.searchItemsError;return(0,Z.useEffect)((function(){if(u(!1),s(void 0),null!==r&&e.isSearchItemsLoaded){var o=[];if(r.length){if(null==t)return;o=function(e,t){var r=[];return t.forEach((function(t){if(t in e){var a=e[t];r.push(a)}})),r}(t,r)}var i=-1;if(a||(i=n),-1===i)s(o);else{var c=o.slice(0,i);s(c)}u(!0)}}),[t,r,n,e.isSearchItemsLoaded,a]),{orderedItems:i,showShimmer:d}};var it=(0,De.withTranslations)((function(e){var t,r,a=e.layout,n=e.topicBasedBrowsingEnabledForCategory,o=e.topUp,i=e.fetchNextPage,s=e.canLoadNextPage,l=e.searchResultDict,u=e.searchResultList,d=e.isPaginationEnabled,p=e.isInfiniteScrollDisabled,m=e.catalogQuery,g=e.isKeywordCensored,f=e.searchOptions,y=e.library,v=e.topics,b=e.getCategoryOption,h=e.setSubcategory,S=e.setCreator,C=e.setCurrencyType,T=e.clearKeyword,E=e.onTopUpClear,I=e.setSelectedTopics,w=e.onClearFilters,x=e.clearTopics,P=e.translate,A=f.isSearchOptionsLoaded,k=de(),N=k.isItemInCart,F=k.addItemToCart,U=k.removeItemFromCart,R=d&&!p,O=(0,Z.useCallback)((function(){return m.category&&Ve.expandedCategoryList.includes(m.category.category)||d?Ve.numberOfSearchItemsExpanded:y.isFullScreen?Ve.numberOfSearchItemsForFullScreen:null===u?0:u.length}),[m.category,d,y.isFullScreen,u]),D=(0,Z.useState)(0),L=D[0],B=D[1];(0,Z.useEffect)((function(){B(O())}),[O]);var M=y.initialized&&!y.isPhone,_=null!==u&&u.length>Ve.numberOfSearchItemsExpanded,j=!!(o.featureEnabled&&o.showTopUp&&void 0!==o.robuxMinThreshold&&void 0!==o.robuxMaxThreshold&&void 0!==o.currentUserBalance&&o.currentUserBalance>o.robuxMinThreshold&&o.currentUserBalance<=o.robuxMaxThreshold&&m.category&&(null===(t=o.displayCategories)||void 0===t?void 0:t.includes(m.category.categoryId))&&void 0===m.keyword&&!(null===(r=m.topics)||void 0===r?void 0:r.length)&&o.headerText),V=ot(a,l,u,d,L),W=V.orderedItems,Q=V.showShimmer,G=(0,Z.useRef)(null);(0,Z.useEffect)((function(){var e=new IntersectionObserver((function(e){e[0].isIntersecting&&i()}),{threshold:1}),t=G.current;return t&&e.observe(t),function(){t&&e.unobserve(t)}}),[G,i]);var K=function(e){E(),e.stopPropagation()},$=!(null==W?void 0:W.length);return X().createElement("div",{id:"react-items-container",className:"catalog-results"},!A&&X().createElement("h2",{className:"featured-items-heading"},X().createElement("span",{className:"shimmer-lines"},X().createElement("span",{className:"placeholder shimmer-line"}))),M&&X().createElement("div",null,X().createElement(Ge,{catalogQuery:m,searchOptions:f,getCategoryOption:b,setSubcategory:h,setCreator:S,setCurrencyType:C,clearKeyword:T,isKeywordCensored:g})),X().createElement(nt,{topicBasedBrowsingEnabledForCategory:n,catalogQuery:m,topics:v,setSelectedTopics:I,onClearFilters:w,clearTopics:x}),j&&X().createElement("div",{className:"top-up-container"},o.giftCard?X().createElement("div",{className:"gift-card",onClick:function(){window.location.href=o.buttonUrl},onKeyPress:function(e){"Enter"!==e.key&&"Space"!==e.key||(window.location.href=o.buttonUrl)},tabIndex:0,role:"link"},X().createElement("div",{className:"top-up-background"}),X().createElement("img",{src:$e(),className:"top-up-gift-card-back",alt:""}),X().createElement("img",{src:ze(),className:"top-up-gift-card-front",alt:""}),X().createElement("div",{className:"top-up-body"},X().createElement("h1",{className:"top-up-header"},P(o.headerText)),X().createElement("div",{className:"top-up-message"},P(o.messageText)),X().createElement("a",{className:"top-up-button btn-cta-md",href:o.buttonUrl,target:"_self"},P(o.buttonText))),X().createElement("button",{type:"button","aria-label":"Close top up",className:"top-up-close-background transparent-button",onClick:K}),X().createElement("button",{type:"button","aria-label":"Close top up",className:"top-up-close icon-close transparent-button",onClick:K})):X().createElement("div",{className:"robux",onClick:function(){window.location.href=o.buttonUrl},onKeyPress:function(e){"Enter"!==e.key&&"Space"!==e.key||(window.location.href=o.buttonUrl)},tabIndex:0,role:"link"},X().createElement("div",{className:"top-up-background"}),X().createElement("div",{className:"top-up-robux"}),X().createElement("img",{src:Ze(),className:"top-up-chest",alt:""}),X().createElement("div",{className:"top-up-body"},X().createElement("h1",{className:"top-up-header"},P(o.headerText||"")),X().createElement("div",{className:"top-up-message"},P(o.messageText)),X().createElement("a",{className:"top-up-button btn-cta-md",href:o.buttonUrl,target:"_self"},P(o.buttonText))),X().createElement("button",{type:"button","aria-label":"Close top up",className:"top-up-close-background transparent-button",onClick:K}),X().createElement("button",{type:"button","aria-label":"Close top up",className:"top-up-close icon-close transparent-button",onClick:K}))),X().createElement("div",{id:"results",className:"results-container"},a.searchItemsError&&!a.loading&&X().createElement("div",{className:"section-content-off"},P("no_results"===a.searchItemsError?"Response.NoItemsFound":"Response.TemporarilyUnavailable")),X().createElement("ul",{className:Be()("hlist item-cards-stackable",{faded:!d&&a.loading})},null==W?void 0:W.map((function(e){var t,r={isItemInCart:N(e.id),addItemToCart:F,removeItemFromCart:U};return X().createElement(J.ItemCard,{key:e.id,id:e.id,name:e.name,type:e.itemType,creatorName:e.creatorName,creatorType:e.creatorType,creatorTargetId:e.creatorTargetId,price:e.price,lowestPrice:e.lowestPrice,unitsAvailableForConsumption:e.unitsAvailableForConsumption,itemStatus:e.itemStatus,priceStatus:e.priceStatus,premiumPricing:null===(t=e.premiumPricing)||void 0===t?void 0:t.premiumPriceInRobux,itemRestrictions:e.itemRestrictions,thumbnail2d:X().createElement(ee.Thumbnail2d,{type:J.ItemCardUtils.checkIfBundle(e.itemType)?ee.ThumbnailTypes.bundleThumbnail:ee.ThumbnailTypes.assetThumbnail,targetId:e.id,size:ee.DefaultThumbnailSize}),iconToRender:e.creatorHasVerifiedBadge?X().createElement(c.VerifiedBadgeIconContainer,{overrideImgClass:"verified-badge-icon-catalog-item-rendered",size:c.BadgeSizes.TITLE,titleText:e.creatorTargetId.toString()}):void 0,shoppingCartProps:r})}))),a.initialized&&a.loading&&X().createElement("div",{className:"spinner spinner-sm"}),Q&&X().createElement(Me,{numberOfItemsToDisplay:L})),d&&X().createElement(X().Fragment,null,R?X().createElement("div",{ref:G,style:{height:"1px",backgroundColor:"transparent"}}):!$&&!a.loading&&s&&X().createElement("div",{className:"load-more-btn-container"},X().createElement("button",{type:"button",className:"btn-primary-md",onClick:i},X().createElement("span",null," ",P("Action.LoadMore")," "))),!$&&X().createElement(X().Fragment,null,a.loading&&X().createElement("div",{className:"spinner spinner-default spinner-infinite-scroll"}),!a.loading&&_&&X().createElement("button",{"aria-label":"Back to top",type:"button",className:"scroll-to-top icon-back-to-top",onClick:function(){window.scrollTo({top:0,behavior:"smooth"})}}))))}),We);var st=(0,De.withTranslations)((function(e){var t,r=e.currentCategory,a=e.currentSubcategory,n=e.category,o=e.updateCategory,i=e.categoryClick,s=e.categoryNameClick,c=e.translate,l=(0,Z.useState)(),u=l[0],d=l[1];return(0,Z.useEffect)((function(){var e=null==r?void 0:r.categoryId;e&&n.categoryId===e&&d(!0)}),[n.categoryId,null==r?void 0:r.categoryId]),X().createElement("li",{className:"font-header-2 text-subheader panel panel-default"},X().createElement("div",{id:"expandable-menu-category-"+n.categoryId,className:"small text menu-link text-link-secondary panel-heading panel-heading-div panel-heading-layered-clothing-ui",role:"tab"},X().createElement("button",{type:"button",className:"category-name btn-text",onClick:function(e){return s(e,n)}},n.name),function(e){var t=e.subcategories;return t&&t.length>0}(n)&&X().createElement("button",{type:"button",className:Be()("toggle-submenu","btn-text",{"icon-up":u,"icon-down":!u}),onClick:function(e){i(e,n),d(!u)},"aria-label":c(u?"Action.Collapse":"Action.Expand")})),X().createElement("div",{className:Be()("panel-collapse",{collapse:!u})},X().createElement("ul",{className:"subcategory-menu"},null===(t=n.subcategories)||void 0===t?void 0:t.map((function(e){return X().createElement("li",{key:e.subcategoryId,className:"top-border"},X().createElement("button",{type:"button",className:Be()("small","text","menu-link","text-link-secondary","btn-text",{active:(null==r?void 0:r.categoryId)===n.categoryId&&(null==a?void 0:a.subcategoryId)===e.subcategoryId}),onClick:function(t){return o(t,!1,!0,n,e)}},e.name))})))))}),We);var ct=function(e){var t=e.salesTypeFilters,r=e.salesTypeFilter,a=e.onSalesTypeFilterChanged;return X().createElement("ul",null,t.map((function(e){return X().createElement("li",{key:e.filter,className:"radio top-border font-caption-body"},X().createElement("input",{type:"radio",name:"radio-sales-type",id:"radio-sales-type-"+e.filter,value:e.filter,checked:(null==r?void 0:r.filter)===e.filter,onChange:function(){return a(e.filter)}}),X().createElement("label",{htmlFor:"radio-sales-type-"+e.filter},e.name))})))};var lt=function(e){var t=e.sortMenus,r=e.sortType,a=e.onSortTypeChanged,n=e.sortAggregation,o=e.onSortAggregationChanged,i="number"==typeof n?n:null==n?void 0:n.sortAggregation;return X().createElement("ul",null,t.sortOptions.map((function(e){return X().createElement("li",{key:e.sortType,className:"radio top-border font-caption-body"},X().createElement("input",{type:"radio",name:"radio-sort-option",id:"radio-sort-option-"+e.sortType,checked:(null==r?void 0:r.sortType)===e.sortType,onChange:function(){return a(e.sortType)}}),X().createElement("label",{htmlFor:"radio-sort-option-"+e.sortType},e.name),e.hasSubMenu&&(null==r?void 0:r.sortType)===e.sortType&&X().createElement("ul",null,t.sortAggregations.map((function(e){return X().createElement("li",{key:e.sortAggregation,className:"radio top-border font-caption-body"},X().createElement("input",{type:"radio",name:"radio-sort-aggregation",id:"radio-sort-aggregation-"+e.sortAggregation,checked:i===e.sortAggregation,onChange:function(){return o(e.sortAggregation)}}),X().createElement("label",{htmlFor:"radio-sort-aggregation-"+e.sortAggregation},e.name))}))))})))};var ut=(0,De.withTranslations)((function(e){var t=e.includeNotForSale,r=e.onUnavailableFilterChanged,a=e.translate;return X().createElement("ul",null,X().createElement("li",{className:"radio top-border font-caption-body"},X().createElement("input",{type:"radio",name:"radio-unavailable",id:"radio-unavailable-hide",checked:!t,onChange:function(){return r(!1)}}),X().createElement("label",{htmlFor:"radio-unavailable-hide"},a("Label.Filter.Hide"))),X().createElement("li",{className:"radio top-border font-caption-body"},X().createElement("input",{type:"radio",name:"radio-unavailable",id:"radio-unavailable-show",checked:t,onChange:function(){return r(!0)}}),X().createElement("label",{htmlFor:"radio-unavailable-show"},a("Label.Filter.Show"))))}),We);var dt=(0,De.withTranslations)((function(e){var t=e.creators,r=e.selectedCreator,a=e.creatorNameInputValue,n=e.setCreatorNameInputValue,o=e.robloxUserId,i=e.isUGCOnly,s=e.isPhone,c=e.onCreatorChanged,l=e.applyCreatorNameToQuery,u=e.customText,d=e.isSearchOnBlurEnabled,p=e.translate;return X().createElement("ul",null,t.map((function(e){return function(e){var t=e.userId===u||"number"==typeof e.userId&&e.userId>=2;return X().createElement("li",{key:e.userId,className:"radio top-border font-caption-body",style:{display:e.userId===o&&i?"none":"block"}},X().createElement("input",{type:"radio",name:"radio-creator",id:"radio-creator-"+e.userId,checked:(null==r?void 0:r.userId)===e.userId,onChange:function(){return c(e)}}),!t&&X().createElement("label",{htmlFor:"radio-creator-"+e.userId},e.name),t&&X().createElement("label",{htmlFor:"radio-creator-custom",className:"has-input creator-name-input"},X().createElement("input",{className:"form-control input-field username-input font-caption-body",type:"text",name:"creatorName",placeholder:p("Label.Username"),maxLength:20,value:a,onChange:function(e){var t=e.target.value;n(t),d&&l(t)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),l(a))},onFocus:function(){(null==r?void 0:r.userId)!==e.userId&&c(e)},required:s&&(null==r?void 0:r.userId)===e.userId}),X().createElement("button",{type:"button",className:"btn-secondary-xs btn-update-filter",disabled:!a.length,onClick:function(){l(a)}},p("Action.Go"))))}(e)})))}),Qe);function pt(e){if(!(null==e?void 0:e.trim()))return"";var t=Number(e);return Number.isNaN(t)||!Number.isFinite(t)?"":t<0?0:t=Math.floor(t)}function mt(e){return""===e?void 0:e}var gt=(0,De.withTranslations)((function(e){var t=e.currencyTypes,r=e.selectedCurrencyType,a=e.maxPrice,n=e.minPrice,o=e.maxPriceInputValue,i=e.minPriceInputValue,s=e.setMaxPriceInputValue,c=e.setMinPriceInputValue,l=e.showCurrencyType,u=e.robuxFilterId,d=e.customRobuxFilterId,p=e.applyMinPriceToQuery,m=e.applyMaxPriceToQuery,g=e.onCurrencyTypeChanged,f=e.isSearchOnBlurEnabled,y=e.translate;(0,Z.useEffect)((function(){c(null==n?"":n)}),[n,c]),(0,Z.useEffect)((function(){s(null==a?"":a)}),[a,s]);var v=function(){var e=mt(i);p(e);var t=mt(o);m(t)};return t?X().createElement("ul",null,t.filter(l).map((function(e){return X().createElement("li",{key:e.currencyType,className:"radio top-border font-caption-body"},X().createElement("input",{type:"radio",name:"radio-price",id:"radio-price-"+e.currencyType,checked:(null==r?void 0:r.currencyType)===e.currencyType,onChange:function(){g(e)}}),e.currencyType!==u&&e.currencyType!==d?X().createElement("label",{htmlFor:"radio-price-"+e.currencyType},e.name):X().createElement("label",{htmlFor:"radio-price-"+e.currencyType,className:"has-input price-min-max-input"},X().createElement("input",{className:"form-control input-field input-number price-input font-caption-body",type:"number",pattern:"[0-9]*",min:"0",name:"minPrice",placeholder:y("Label.Filter.PriceMin"),value:i,onChange:function(e){var t=pt(e.target.value);if(c(t),f){var r=mt(t);p(r)}},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),v())},onFocus:function(){g(e)}}),X().createElement("input",{className:"form-control input-field input-number price-input font-caption-body",type:"number",pattern:"[0-9]*",min:"0",name:"maxPrice",placeholder:y("Label.Filter.PriceMax"),value:o,onChange:function(e){var t=pt(e.target.value);if(s(t),f){var r=mt(t);m(r)}},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),v())},onFocus:function(){e!==r&&g(e)}}),X().createElement("button",{type:"button",className:"btn-secondary-xs btn-update-filter",disabled:(null==r?void 0:r.currencyType)!==u&&(null==r?void 0:r.currencyType)!==d,onClick:v},y("Action.Go"))))}))):null}),Qe);var ft=(0,De.withTranslations)((function(e){var t,r=e.searchOptions,a=e.isPhone,n=e.isMobile,o=e.catalogQuery,i=e.displayedQuery,s=e.setCreatorNameForDisplay,c=e.setMinPriceForDisplay,l=e.setMaxPriceForDisplay,u=e.updateCategory,d=e.categoryClick,p=e.categoryNameClick,m=e.isCurrentCategorySearchable,g=e.menuConstantsCategoryTypesCommunityCreations,f=e.onSalesTypeFilterChanged,y=e.onSortTypeChanged,v=e.onSortAggregationChanged,b=e.onUnavailableFilterChanged,h=e.onCreatorChanged,S=e.applyCreatorNameToQuery,C=e.applyMinPriceToQuery,T=e.applyMaxPriceToQuery,E=e.onCurrencyTypeChanged,I=e.isSearchOnBlurEnabled,w=e.translate,x=e.closeSearchOptions,P=e.resetFilters,A=m,k=r.categories,N=r.defaultCategoryId,F=r.freeFilterId,U=r.hasSearchOptionsError,R=r.salesTypeFilters,O=r.creators,D=r.robloxUserId,L=r.customText,B=r.robuxFilterId,M=r.customRobuxFilterId,_=r.sortMenus,j=r.currencyTypes,V=o.sortType,W=o.sortAggregation,Q=o.includeNotForSale,G=o.salesTypeFilter,K=o.creator,$=o.currencyType,q=o.maxPrice,z=o.minPrice,H=o.category,Y=o.subcategory,J=(0,Z.useState)(!1),ee=J[0],te=J[1];(0,Z.useEffect)((function(){te((null==H?void 0:H.categoryId)===g)}),[null==H?void 0:H.categoryId,g]);var re=(0,Z.useCallback)((function(e){return!(!H||!e)&&!(H.categoryId===N&&e.currencyType===F)}),[H,N,F]);return X().createElement("div",{id:"search-options",className:"search-options"},X().createElement("form",{className:Be()("search-options-form",{"border-right":!n}),noValidate:!0},U?X().createElement("div",{className:"section-content-off"},w("Response.GenericError")):X().createElement("div",null,X().createElement("div",{className:"border-bottom category-section"},X().createElement("h2",{className:"font-header-1 search-options-header"},w("Heading.CatalogCategory")),X().createElement("ul",{id:"category-panel-group",className:"panel-group"},null==k?void 0:k.map((function(e){return X().createElement(st,{key:e.categoryId,currentCategory:H,currentSubcategory:Y,category:e,updateCategory:u,categoryClick:d,categoryNameClick:p})})))),A&&X().createElement("div",null,X().createElement("h2",{className:"font-header-1 search-options-header filters-header"},w("Label.Filter.Filters")),X().createElement("div",{className:Be()("filters-section",{"border-bottom":!n})},R&&R.length>0&&X().createElement("div",null,X().createElement("div",{className:"filter-label font-header-2"},w("Label.Filter.SalesType")),X().createElement(ct,{salesTypeFilters:R,salesTypeFilter:G,onSalesTypeFilterChanged:f})),O&&X().createElement("div",null,X().createElement("div",{className:"filter-label font-header-2"},w("Label.Filter.Creator")),X().createElement(dt,{creators:O,creatorNameInputValue:i.creatorName,setCreatorNameInputValue:s,selectedCreator:K,robloxUserId:D,isUGCOnly:ee,isPhone:!!a,onCreatorChanged:h,applyCreatorNameToQuery:S,customText:L,isSearchOnBlurEnabled:I})),j&&X().createElement("div",null,X().createElement("div",{className:"filter-label font-header-2"},w("Label.Filter.Price")),X().createElement(gt,{currencyTypes:j,selectedCurrencyType:$,maxPrice:q,maxPriceInputValue:i.maxPrice,setMaxPriceInputValue:l,minPrice:z,minPriceInputValue:i.minPrice,setMinPriceInputValue:c,showCurrencyType:re,robuxFilterId:B,customRobuxFilterId:M,applyMinPriceToQuery:C,applyMaxPriceToQuery:T,onCurrencyTypeChanged:E,isSearchOnBlurEnabled:I})),!!(null===(t=null==_?void 0:_.sortOptions)||void 0===t?void 0:t.length)&&X().createElement("div",null,X().createElement("div",{className:"filter-label font-header-2"},w("Label.Filter.Sorts")),X().createElement(lt,{sortMenus:_,sortType:V,sortAggregation:W,onSortTypeChanged:y,onSortAggregationChanged:v})),X().createElement("div",{className:"font-header-2 filter-label"},w("Label.Filter.UnavailableItems")),X().createElement(ut,{includeNotForSale:!!Q,onUnavailableFilterChanged:b}))))),n&&X().createElement("div",{className:"mobile-search-options-buttons-container"},X().createElement("button",{type:"button",className:"btn-secondary-lg",onClick:function(e){P()}},X().createElement("span",null," ",w("Action.Reset")," ")),X().createElement("button",{type:"button",className:"btn-primary-lg",onClick:function(e){x()}},X().createElement("span",null," ",w("Action.ViewItems")," "))))}),We),yt=r(2689),vt=r.n(yt);var bt=function(){return X().createElement("div",{id:"search-options",className:"search-options"},X().createElement("ul",{className:"search-options-progressive-loading shimmer-lines"},vt()(9).map((function(e){return X().createElement("li",{key:e,className:"placeholder shimmer-line"})}))))},ht=function(){return(ht=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},St=function(){function e(){}return e.getMetadataFromApi=function(){return _.httpService.get(Ve.endpoints.getMetadata)},e.getSearchOptions=function(){var e=Ve.endpoints.getSearchOptionsUrl;return _.httpService.get(e)},e.getNavigationMenuItems=function(){return _.httpService.get(Ve.endpoints.getNavigationMenuItems)},e.getSearchItems=function(e,t,r){void 0===r&&(r=!1);var a=Ve.numberOfSearchItems,n=Ve.numberOfSearchItemsForFullScreen,o=Ve.numberOfSearchItemsExpanded,i=t?n:a;r&&(i=o);var s=new URLSearchParams(e);return s.set("limit",i.toString()),_.httpService.get(Ve.endpoints.getSearchItems,s)},e.getCatalogItemDetails=function(e,t){var r=Ve.endpoints,a=Ve.priceStatus,n={items:Object.values(e)};return _.httpService.post(r.getCatalogItemDetails,n).then((function(r){var n=r.data;return n&&n.data?n.data.map((function(r){var n=r.id,o=ht(ht(ht({},r),{key:e[n].key}),r.priceStatus===a.free&&{isFree:!0}),i=ht(ht({},o),et.mapItemRestrictionIcons(o)),s=et.mapItemStatusIconsAndLabels(i,t);return ht(ht({},i),{itemStatusIconsAndLabels:s,creatorLink:et.buildUserLink(i)})})):[]}))},e.getAvatarRequestSuggestion=function(e,t,r,a,n){void 0===n&&(n=!1);var o={prefix:e,limit:r,lang:t||Ve.englishLanguageCode,q:a};return n?_.httpService.get(Ve.endpoints.avatarRequestSuggestion,o):_.httpService.get(Ve.endpoints.avatarRequestCdnSuggestion,o)},e.postGetTopics=function(e,t,r){var a=!!r,n={maxResult:Ve.topics.maxTopicsToRequest,items:a?[]:e,selectTopics:t,inputQuery:a?r:void 0};return _.httpService.post(Ve.endpoints.postGetTopics,n)},e.getUserCurrency=function(){var e=Ve.endpoints.getUserCurrency,t=a.Endpoints.generateAbsoluteUrl(e.url,{userId:a.CurrentUser.userId},!0),r=""+a.EnvironmentUrls.economyApi+t;return e.url=r,_.httpService.get(e)},e.postMarketplaceItemDetails=function(e){var t={itemIds:[e]};return _.httpService.post(Ve.endpoints.postMarketplaceItemDetails,t)},e.getResellerData=function(e){var t={url:Ve.getResellerDataUrl(e),retryable:!0,withCredentials:!0};return _.httpService.get(t)},e}(),Ct={leaderboardAbp:"Leaderboard-Abp",skyscraperAdpRight:"Skyscraper-Abp-Right"};var Tt=function(){return{registerAd:(0,Z.useCallback)((function(e){a.AdsHelper&&a.AdsHelper.AdRefresher&&a.AdsHelper.AdRefresher.registerAd(e)}),[]),refreshAllAds:(0,Z.useCallback)((function(){a.AdsHelper&&a.AdsHelper.AdRefresher&&a.AdsHelper.AdRefresher.refreshAds()}),[]),adIds:Ct}},Et=function(){return(Et=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};var It=function(){var e=(0,Z.useState)({initialized:!1}),t=e[0],r=e[1];return{library:t,setupLibrary:(0,Z.useCallback)((function(){r((function(e){return Et(Et({},e),{isPhone:!!a.DeviceMeta&&(0,a.DeviceMeta)().isPhone,isDesktop:!a.DeviceMeta||(0,a.DeviceMeta)().isDesktop,isApp:!!a.DeviceMeta&&(0,a.DeviceMeta)().isInApp,catalogUrl:Ve.catalogUrl,isFullScreen:!!a.DeviceMeta&&!(0,a.DeviceMeta)().isInApp,initialized:!0})}))}),[])}},wt=function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))},xt=function(e,t){var r,a,n,o,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){i.label=o[1];break}if(6===o[0]&&i.label<n[1]){i.label=n[1],n=o;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(o);break}n[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};var Pt=function(){var e=this;return{getABTestEnrollment:(0,Z.useCallback)((function(t,r,n){return wt(e,void 0,Promise,(function(){var e;return xt(this,(function(t){return(e=a.ExperimentationService.getAllValuesForLayer(r)).then((function(){a.ExperimentationService.logLayerExposure(r)})),[2,e]}))}))}),[])}},At={avatarShopPage:["avatarShopPlacement","isItemDetailsEnabled"],avatarShopRecommendationsAndSearchWeb:[],avatarShopRecommendationsAndSearch:["infiniteScroll"],avatarMarketplaceGuidedFeatures:["topicsEnabledWeb"],avatarMarketplaceShoppingCart:[],avatarMarketplaceSorts:[]},kt={avatarShopPage:"AvatarMarketplace.UI",avatarShopRecommendationsAndSearchWeb:"AvatarMarketplace.RecommendationsAndSearch.Web",avatarShopRecommendationsAndSearch:"AvatarMarketplace.RecommendationsAndSearch",avatarMarketplaceGuidedFeatures:"AvatarMarketplace.GuidedFeatures",avatarMarketplaceShoppingCart:"AvatarMarketplace.ShoppingCart",avatarMarketplaceSorts:"AvatarMarketplace.Sorts"},Nt=1,Ft=function(){return(Ft=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};var Ut=function(){var e=(0,Z.useState)({featureEnabled:!1,showTopUp:!1,currentUserBalance:-1,headerText:"Heading.NeedMoreRobux",messageText:"Message.RunningLowRobux",buttonText:"Action.BuyRobux",buttonUrl:a.EnvironmentUrls.websiteUrl+"/upgrades/robux?ctx=catalogNew"}),t=e[0],r=e[1],n=(0,Z.useState)(),i=(n[0],n[1]),s=(0,Z.useState)(!1),c=s[0],l=(s[1],(0,Z.useState)()),u=(l[0],l[1]),d=Pt(),p=((0,Z.useCallback)((function(){d.getABTestEnrollment(Nt,kt.avatarShopPage,At.avatarShopPage).then((function(e){}),(function(){}))}),[d]),(0,Z.useCallback)((function(){d.getABTestEnrollment(Nt,kt.avatarShopRecommendationsAndSearchWeb,At.avatarShopRecommendationsAndSearchWeb).then((function(e){void 0!==(null==e?void 0:e.directPurchaseEnabled)&&null!==(null==e?void 0:e.directPurchaseEnabled)&&i(e.directPurchaseEnabled)}),(function(){}))}),[d])),m=(0,Z.useCallback)((function(){d.getABTestEnrollment(Nt,kt.avatarShopRecommendationsAndSearch,At.avatarShopRecommendationsAndSearch).then((function(e){void 0!==(null==e?void 0:e.infiniteScroll)&&null!==(null==e?void 0:e.infiniteScroll)&&u(e.infiniteScroll)}),(function(){}))}),[d]),g=(0,Z.useCallback)((function(){d.getABTestEnrollment(Nt,kt.avatarMarketplaceGuidedFeatures,At.avatarMarketplaceGuidedFeatures).then((function(e){var n,i;void 0!==(null==e?void 0:e.topUpEnabled)&&null!==(null==e?void 0:e.topUpEnabled)&&(r((function(t){return Ft(Ft({},t),{featureEnabled:!!e.topUpEnabled})})),t.featureEnabled&&void 0!==(null==e?void 0:e.topUpVariant)&&null!==(null==e?void 0:e.topUpVariant)&&("zeroBalance"===(null==e?void 0:e.topUpVariant)?r((function(e){return Ft(Ft({},e),{featureEnabled:!0,robuxMinThreshold:-1,robuxMaxThreshold:0,displayCategories:Ve.topUp.displayCategories,headerText:"Heading.NeedMoreRobux",messageText:"Message.WithRobux",buttonText:"Action.BuyRobux",buttonUrl:a.EnvironmentUrls.websiteUrl+"/upgrades/robux?ctx=catalogNew"})})):"lowBalance"===(null==e?void 0:e.topUpVariant)?r((function(e){return Ft(Ft({},e),{featureEnabled:!0,robuxMinThreshold:1,robuxMaxThreshold:Ve.topUp.robuxThreshold,displayCategories:Ve.topUp.displayCategories,headerText:"Heading.NeedMoreRobux",messageText:"Message.RunningLowRobux",buttonText:"Action.BuyRobux",buttonUrl:a.EnvironmentUrls.websiteUrl+"/upgrades/robux?ctx=catalogNew"})})):"giftCard"===(null==e?void 0:e.topUpVariant)&&r((function(e){return Ft(Ft({},e),{featureEnabled:!0,robuxMinThreshold:-1,robuxMaxThreshold:0,displayCategories:Ve.topUp.displayCategories,headerText:"Heading.TreatYourself",messageText:"Message.GiftCardPurchase",buttonText:"Action.ShopGiftCards",buttonUrl:"https://roblox.cashstar.com/gift-card/buy/?ref=1023gcwidget",giftCard:!0})})),n=o.localStorageService.getLocalStorage("Roblox.AvatarMarketplace.TopUpClearDate-"+a.CurrentUser.userId),i=Date.now()-n>Ve.topUp.resetTime,r((function(e){return Ft(Ft({},e),{showTopUp:i})}))))}),(function(){}))}),[d,t.featureEnabled]),f=((0,Z.useCallback)((function(){d.getABTestEnrollment(Nt,kt.avatarShopRecommendationsAndSearchWeb,At.avatarMarketplaceShoppingCart).then((function(e){}),(function(){}))}),[d]),(0,Z.useCallback)((function(){d.getABTestEnrollment(Nt,kt.avatarMarketplaceSorts,At.avatarMarketplaceSorts).then((function(e){}),(function(){}))}),[d]),(0,Z.useCallback)((function(){p(),m(),g()}),[g,m,p]));return{topUp:t,setTopUp:r,isSearchOnBlurEnabled:c,getAvatarEnrollments:f}},Rt=function(){var e=(0,Z.useState)(!1),t=e[0],r=e[1],a=(0,Z.useState)(!1),n=a[0],o=a[1],i=(0,Z.useState)(null),s=i[0],c=i[1],l=(0,Z.useState)(!1),u=l[0],d=l[1],p=(0,Z.useState)(!1),m=p[0],g=p[1],f=(0,Z.useState)(),y=f[0];return{initialized:t,setInitialized:r,setIsSearchItemsLoaded:o,searchItemsError:s,setSearchItemsError:c,setLoading:d,adsInitialized:m,setAdsInitialized:g,showError:y,setShowError:f[1],layout:{initialized:t,isSearchItemsLoaded:n,searchItemsError:s,loading:u,adsInitialized:m,showError:y}}};var Ot=function(){var e=(0,Z.useState)(!1),t=e[0],r=e[1],a=(0,Z.useState)(),n=a[0],o=a[1],i=(0,Z.useState)(),s=i[0],c=i[1],l=(0,Z.useState)(),u=l[0],d=l[1],p=(0,Z.useState)(),m=p[0],g=p[1];return(0,Z.useEffect)((function(){St.getMetadataFromApi().then((function(e){o(!!e.data.isPremiumPriceOnItemTilesEnabled),c(!!e.data.isPremiumIconOnItemTilesEnabled),d(e.data.autocompleteAvatarSearchNumToDisplay),g(e.data.isCatalogAdsRowOnRecommendedPageEnabled),r(!0)}),(function(){r(!0)}))}),[]),{isMetadataInitialized:t,isPremiumIconOnItemTilesEnabled:s,isPremiumPriceOnItemTilesEnabled:n,autocompleteAvatarSearchNumToDisplay:u,isCatalogAdsRowOnRecommendedPageEnabled:m}},Dt={categoryTypes:{Featured:0,All:1,Collectibles:2,Clothing:3,BodyParts:4,Gear:5,Models:6,Plugins:7,Decals:8,Audio:9,Meshes:10,Accessories:11,AvatarAnimations:12,CommunityCreations:13,Recommended:15},defaultGearSubcategoryId:0},Lt=function(){return(Lt=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Bt=function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e},Mt=new a.Intl,_t=function(e,t){var r=parseInt(Ve.allGearSubcategoryId,10);return e.subcategoryId===r?-1:t.subcategoryId===r?1:Mt.langSensitiveCompare(e.name,t.name)},jt=function(e){var t={robloxUserId:e.robloxUserId,robloxUserName:e.robloxUserName,defaultCurrencyId:e.defaultCurrency,freeFilterId:e.freeFilter,customRobuxFilterId:e.customRobuxFilter,robuxFilterId:e.robuxFilter,allCategoriesId:e.allCategories,defaultCategoryId:e.defaultCategory,defaultCategoryIdForRecommendedSearch:e.defaultCategoryIdForRecommendedSearch,gearCategoryId:e.gearSubcategory,defaultGearSubcategoryId:Dt.defaultGearSubcategoryId,defaultSortTypeId:e.defaultSortType,defaultSortAggregationId:e.defaultSortAggregation,defaultCreatorId:e.defaultCreator,customText:"custom",isSearchOptionsLoaded:!0},r=[];e.categoriesWithCreator&&e.categoriesWithCreator.forEach((function(e){r.push(e)})),t.categoriesWithCreatorFilters=r;var a=Lt({},e),n={};a.categories=e.categories.map((function(e){var t,r=Lt(Lt({},e),{typeId:e.categoryId,Data:null===(t=e.typeId)||void 0===t?void 0:t.toString(),Description:e.name});if(n[r.categoryId]={categoryEnum:r.category,subcategoryEnums:{}},r.subcategories){var a={};r.subcategories=r.subcategories.map((function(e){var t,r=Lt(Lt({},e),{typeId:e.subcategoryId,Data:null===(t=e.typeId)||void 0===t?void 0:t.toString(),Description:e.name});return a[r.subcategoryId]=r.subcategory,r})),Object.assign(n[r.categoryId].subcategoryEnums,a)}return r})),t.categoryEnumLibrary=n;var o={};null!==e.priceFilters&&(a.priceFilters=e.priceFilters.map((function(e){var t,r=Lt(Lt({},e),{typeId:e.currencyType,Data:null===(t=e.typeId)||void 0===t?void 0:t.toString(),Description:e.name});return o[r.currencyType]={typeId:r.currencyType,name:r.name},r}))),t.priceEnumLibrary=o,a.creatorFilters=e.creatorFilters.map((function(e){return Lt(Lt({},e),{Data:e.userId.toString(),Description:e.name})})),a.sortMenu.sortOptions=e.sortMenu.sortOptions.map((function(e){var t;return Lt(Lt({},e),{typeId:e.sortType,Data:null===(t=e.typeId)||void 0===t?void 0:t.toString(),Description:e.name})})),a.sortMenu.sortAggregations=e.sortMenu.sortAggregations.map((function(e){var t;return Lt(Lt({},e),{typeId:e.sortAggregation,Data:null===(t=e.typeId)||void 0===t?void 0:t.toString(),Description:e.name})}));var i=[];e.salesTypeFilters.forEach((function(e){var t={name:e.name.toString(),filter:e.filter};i.push(t)})),t.salesTypeFilters=i,a.categories.forEach((function(e){var r;e.categoryId===t.gearCategoryId&&(null===(r=e.subcategories)||void 0===r||r.sort(_t))})),t.categories=a.categories,t.sortMenus=a.sortMenu;var s=a.sortMenu,c=s.sortOptions,l=s.sortAggregations;if(c){var u=c[0];t.defaultSortValue=u}if(l){var d=l[0];t.defaultSortAggregationValue=d}if(a.creatorFilters?t.creators=Bt(Bt([],a.creatorFilters),[{name:null,isSelected:!1,userId:t.customText}]):t.creators=null,t.currencyTypes=a.priceFilters,a.priceFilters.length>0){var p=a.priceFilters[0];t.defaultCurrencyType=p}return t.filtersInitialized=!0,t},Vt=function(){return(Vt=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};var Wt=function(e){var t=(0,Z.useState)({isSearchOptionsLoaded:!1,creators:[],customText:"custom"}),r=t[0],a=t[1];return(0,Z.useEffect)((function(){e&&St.getNavigationMenuItems().then((function(e){var t=jt(e.data);a(Vt(Vt({},t),{isSearchOptionsLoaded:!0,hasSearchOptionsError:!1}))})).catch((function(){a((function(e){return Vt(Vt({},e),{isSearchOptionsLoaded:!0,hasSearchOptionsError:!0})}))}))}),[e]),{searchOptions:r}},Qt=function(){return(Qt=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Gt=function(e,t){if(!e||0===e.length)return[];var r=e.split(t),a=[];return r.forEach((function(e){a.push({displayName:e,originalTopicName:""})})),a},Kt=function(e,t){var r,a,n,o,i=e.categoryId,s=e.subcategoryId,c=e.gearsId,l=t.categories,u=t.defaultCategoryId,d=t.gearCategoryId,p=i;Number.isInteger(p)||(p=u),(n=null==l?void 0:l.find((function(e){return e.categoryId===p})))||(p=u,n=null==l?void 0:l.find((function(e){return e.categoryId===p}))),p===d?o=null===(r=null==n?void 0:n.subcategories)||void 0===r?void 0:r.find((function(e){var t;return e.subcategoryId===(c||(null===(t=null==n?void 0:n.subcategories)||void 0===t?void 0:t[0].subcategoryId))})):s&&(o=null===(a=null==n?void 0:n.subcategories)||void 0===a?void 0:a.find((function(e){return e.subcategoryId===s})));var m=void 0!==n&&Ve.topics.categoriesToShowTopics.includes(null==n?void 0:n.categoryId);return{category:n,subcategory:o,topicBasedBrowsingEnabledForCategory:m}},$t=function(e,t,r){if(!r)return{sortType:void 0,sortAggregation:void 0};var a=r.sortOptions,n=r.sortAggregations;return{sortType:a?null==e?a[0]:a.find((function(t){return t.sortType===e})):void 0,sortAggregation:n?null==t?n[0]:n.find((function(e){return e.sortAggregation===t})):void 0}},qt=function(e,t){var r=t.creators,a=t.defaultCreatorId,n=t.robloxUserId,o=t.customText,i=e.creatorName,s=e.creatorId,c=e.creatorType,l=r;if(!l)return{};var u=null,d=null,p=s;return i?(u=l.find((function(e){return e.userId===o})),d=i):(p||(p=a),p&&(!n||p>n)?(u=l.find((function(e){return e.userId===o})))&&(u=Qt(Qt({},u),{userId:p})):u=null==l?void 0:l.find((function(e){return e.userId===p}))),u&&c&&(u=Qt(Qt({},u),{type:c})),{creator:u,creatorName:d}},zt=function(e,t,r,a){var n=a.currencyTypes,o=a.defaultCurrencyType,i=a.customRobuxFilterId;if(!n)return{currencyType:void 0,minPrice:t,maxPrice:r};var s=n.find((function(t){return t.currencyType===e}))||o,c=t,l=r;return(null==s?void 0:s.currencyType)===i&&(c=c||null,l=l||null),{currencyType:s,minPrice:0!==c?c:null,maxPrice:0!==l?l:null}},Ht=function(e,t){var r,a=e||1;return{salesTypeFilter:null===(r=t.salesTypeFilters)||void 0===r?void 0:r.find((function(e){return e.filter===a}))}},Zt=function(e){return e?{includeNotForSale:!0}:{}},Xt=function(e,t){var r=new URLSearchParams(t?"":window.location.search),a=et.getQueriesValueIntoInt(r),n=et.formatQueries(a),o=Gt(n.topics||"",",");return Qt(Qt(Qt(Qt(Qt(Qt(Qt({},Kt({categoryId:a.Category,subcategoryId:a.Subcategory,gearsId:a.Gears},e)),$t(a.SortType,a.SortAggregation,e.sortMenus)),qt({creatorId:a.CreatorID,creatorName:a.CreatorName,creatorType:a.CreatorType},e)),zt(a.CurrencyType,a.pxMin,a.pxMax,e)),Ht(a.salesTypeFilter,e)),{topics:o,keyword:a.Keyword}),Zt(a.IncludeNotForSale))};var Yt=function(e,t){var r=(0,Z.useState)(0),a=r[0],n=r[1];return(0,Z.useEffect)((function(){if(e){var r,a,o=Xt(t,!0),i=(r=e,a=o,Object.keys(r).filter((function(e){return"topicBasedBrowsingEnabledForCategory"!==e&&"keyword"!==e})).reduce((function(e,t){var n=r[t],o=a[t];if(!n&&!o)return e;var i=JSON.stringify(r[t])!==JSON.stringify(a[t]);return"subcategory"===t&&i&&r.category!==a.category&&(i=!1),i?e+1:e}),0));n(i)}}),[e,t]),a},Jt=function(){return(Jt=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};var er=function(e,t){var r=(0,Z.useState)({topics:[]}),a=r[0],n=r[1],o=Yt(a,e),i=(0,Z.useState)(!1),s=i[0],c=i[1],l=function(e){n((function(t){return Jt(Jt({},t),{sortType:e,cursor:void 0})}))},u=function(e){n((function(t){return Jt(Jt({},t),{currencyType:e,cursor:void 0})}))},d=(0,Z.useCallback)((function(e,t){var r=Xt(e,t);return n(r),c(!0),r}),[]);return(0,Z.useEffect)((function(){var t=e.defaultSortValue,r=a.currencyType,n=a.sortType;r&&r.excludePriceSorts&&n&&n.isPriceRelated&&l(t)}),[a,e]),(0,Z.useEffect)((function(){var t=e.defaultCategoryId,r=e.freeFilterId,n=e.defaultCurrencyType,o=a.category,i=a.currencyType;o&&o.categoryId===t&&i&&i.currencyType===r&&u(n)}),[a,e]),{setCategory:function(e){var t=void 0!==e&&Ve.topics.categoriesToShowTopics.includes(null==e?void 0:e.categoryId);n((function(r){return Jt(Jt({},r),{category:e,topicBasedBrowsingEnabledForCategory:t})}))},setSubcategory:function(e){n((function(t){return Jt(Jt({},t),{subcategory:e,cursor:void 0})}))},setCreator:function(e){n((function(t){return Jt(Jt({},t),{creator:e,cursor:void 0})}))},setCreatorName:function(e){n((function(t){return Jt(Jt({},t),{creatorName:e,cursor:void 0})}))},setCurrencyType:u,setMinPrice:function(e){n((function(t){return Jt(Jt({},t),{minPrice:e,cursor:void 0})}))},setMaxPrice:function(e){n((function(t){return Jt(Jt({},t),{maxPrice:e,cursor:void 0})}))},setIncludeNotForSale:function(e){n((function(t){return Jt(Jt({},t),{includeNotForSale:e,cursor:void 0})}))},setSalesTypeFilter:function(e){n((function(t){return Jt(Jt({},t),{salesTypeFilter:e,cursor:void 0})}))},setSortType:l,setSortAggregation:function(e){n((function(t){return Jt(Jt({},t),{sortAggregation:e,cursor:void 0})}))},setSelectedTopics:function(e){n((function(t){return Jt(Jt({},t),{topics:e,cursor:void 0})}))},setKeyword:function(e){n((function(t){return Jt(Jt({},t),{keyword:e,cursor:void 0})})),t(e||"")},setCursor:function(e){n((function(t){return Jt(Jt({},t),{cursor:e})}))},numberOfAppliedFilters:o,catalogQuery:a,isCatalogQueryInitialized:s,keyword:a.keyword,initializeCatalogQuery:d}};var tr=(0,De.withTranslations)((function(e){var t=e.searchInputValue,r=e.setSearchInputValue,a=e.autocompleteSuggestions,n=e.categories,o=e.hasSearchOptionsError,i=(e.library,e.onClickOutsideAutocomplete),s=e.onKeywordKeydown,c=e.onKeywordInputClicked,l=e.onKeywordClear,u=e.onAutocompleteSuggestionClicked,d=e.updateCategory,p=e.search,m=e.buyRobuxButtonOnClick,g=e.buyRobuxButtonUrl,f=e.getCategoryDropdownValue,y=e.isSearchOnBlurEnabled,v=e.translate,b=Be()("search-container","search-container-no-categories","search-container-original"),h=Be()("form-control","input-field","search-input","input-rounded"),S=(0,Z.useState)([]),C=S[0],T=S[1],E=(0,Z.useRef)(null),I=(0,Z.useRef)(null);(0,Z.useEffect)((function(){if(n){var e=(null==n?void 0:n.filter((function(e){var t;return null===(t=e.isSearchable)||void 0===t||t})).sort((function(e,t){return e.orderIndex-t.orderIndex})))||[];T(e)}}),[n]);var w=(0,Z.useState)(!1),x=w[0],P=w[1];return(0,Z.useEffect)((function(){var e=function(e){var t=e.target;E.current&&!E.current.contains(t)&&P(!1),I.current&&!I.current.contains(t)&&i()};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}}),[P,i]),X().createElement("div",{className:b,id:"search-bar"},X().createElement("div",{className:"input-group"},X().createElement("div",{id:"search-bar-container",ref:I},X().createElement("input",{id:"avatar-shop-keyword-input",className:h,placeholder:v("Label.SearchField"),maxLength:50,onKeyDown:s,value:t,onChange:function(e){var t=e.target.value;r(t),y&&p(t)},onClick:c,autoComplete:"off",autoCorrect:"off",spellCheck:"false",name:"searchField",type:"text"}),!!t.length&&X().createElement("span",{id:"navbar-search-clear-btn",tabIndex:0,role:"button","aria-label":"Clear Search",className:"clear-search icon-actions-clear-sm",onClick:function(e){l(e)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),l(e))}}),!!t.length&&a.show&&X().createElement("div",{className:"autocomplete-dropdown-menu open"},X().createElement("ul",{id:"autocomplete-list",className:"dropdown-menu",role:"menu"},a.suggestions.map((function(e,t){return X().createElement("li",{id:"autocomplete-suggestion-li-"+t,key:e.Query},X().createElement("button",{type:"button",id:"autocomplete-suggestion-"+t,onClick:function(){return u(e.Query,t)}},X().createElement("span",{className:"icon navbar-list-option-icon icon-search"}),X().createElement("span",null,e.Query)))}))))),X().createElement("div",{ref:E,className:"input-group-btn-category input-group-btn"},!o&&X().createElement("button",{type:"button",className:"input-dropdown-btn category-options",disabled:o,"aria-haspopup":"true","aria-expanded":x?"true":"false",onClick:function(){P(!x)}},X().createElement("span",{className:"text-overflow rbx-selection-label"},f()),X().createElement("span",{className:"icon-down-16x16"})),X().createElement("ul",{className:"dropdown-menu",role:"menu",style:{display:x?"block":"none"}},C.map((function(e){return X().createElement("li",{key:e.name},X().createElement("button",{onClick:function(t){d(t,!0,!1,e,void 0),P(!1)},type:"button"},e.name))}))),X().createElement("button",{className:"input-addon-btn",type:"submit",onClick:function(){return p(t)}},X().createElement("span",{className:"icon-search"}))),X().createElement("div",{className:"buy-btns-container"},X().createElement("a",{className:"btn-growth-md buy-robux",href:g,target:"_self",onClick:m},v("Action.BuyRobux")),X().createElement(Fe,null))))}),Qe),rr=function(){return(rr=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},ar=new a.Intl;function nr(e){var t=e.keywordForDisplay,r=e.setKeywordForDisplay,a=e.search,n=e.catalogQuery,o=e.categories,i=e.hasSearchOptionsError,s=e.autocompleteAvatarSearchNumToDisplay,c=e.library,l=e.updateCategory,u=e.buyRobuxButtonOnClick,d=e.buyRobuxButtonUrl,p=e.getCategoryDropdownValue,m=e.isSearchOnBlurEnabled,g=(0,Z.useState)(),f=g[0],y=g[1],v=(0,Z.useState)({show:!1,timeSinceLastSearchAutocompleteEvent:0,suggestions:[],textSuggestions:[],previousQuery:"",previousQueryBeforeRemoval:"",previousCharInput:-1,backspaceInput:!1,startTime:0,keyboardPosition:-1,locale:""}),b=v[0],h=v[1],S=(0,Z.useState)(),C=S[0],T=S[1];(0,Z.useEffect)((function(){!function(){var e=ar.locale;h((function(t){return rr(rr({},t),{locale:e})}));var t=e.indexOf("-");(e=e.substring(0,-1!==t?t:e.length))!==Ve.englishLanguageCode&&(e+=","+Ve.englishLanguageCode),y(e)}()}),[]);var E=(0,Z.useCallback)((function(e){var r=Date.now();St.getAvatarRequestSuggestion(e,f,Ve.autocompleteQueryAmount,b.previousQuery,C).then((function(e){var a=e.data;a.Args.Prefix===t&&h((function(e){var t=rr({},e);t.suggestions=[],t.textSuggestions=[];var n=a.Data;return(n=n.slice(0,s)).forEach((function(e){t.suggestions.push(e),t.textSuggestions.push(e.Query)})),(Date.now()>t.timeSinceLastSearchAutocompleteEvent+Ve.autocompleteSuggestionEventData.autocompleteSuggestionEventTimeoutDelay||null===t.timeSinceLastSearchAutocompleteEvent)&&(t.previousQuery=a.Args.Prefix,tt.sendSearchAutocompleteEvent(a.Args.Algo,t.textSuggestions,a.Args.Prefix,t.previousQuery,t.locale,Date.now()-r,s,""!==b.previousQuery)),!0===t.backspaceInput&&tt.sendSearchTextTrimEvent(t.previousQueryBeforeRemoval,a.Args.Prefix),t.timeSinceLastSearchAutocompleteEvent=Date.now(),t.backspaceInput=!1,t}))}),(function(){T(!0)}))}),[s,f,b.previousQuery,t,C]);return(0,Z.useEffect)((function(){t?E(t):h((function(e){return rr(rr({},e),{suggestions:[],textSuggestions:[]})}))}),[E,t]),X().createElement(tr,{searchInputValue:t,setSearchInputValue:r,search:a,autocompleteSuggestions:b,categories:o,hasSearchOptionsError:i,library:c,onClickOutsideAutocomplete:function(){h((function(e){return rr(rr({},e),{show:!1,keyboardPosition:-1})}))},onKeywordKeydown:function(e){var r;if("Backspace"===e.key)h((function(t){return rr(rr({},t),{previousQueryBeforeRemoval:n.keyword,backspaceInput:!0,previousCharInput:e.which})}));else if("ArrowDown"===e.key||"Tab"===e.key){var o=b.keyboardPosition+1,i=document.querySelector("#autocomplete-suggestion-li-"+o);if(o<b.suggestions.length)e.stopPropagation(),e.preventDefault(),null==(s=document.querySelector("#autocomplete-suggestion-li-"+b.keyboardPosition))||s.classList.remove("selected"),h((function(t){return rr(rr({},t),{keyboardPosition:o,previousCharInput:e.which})})),null==i||i.classList.add("selected");else"ArrowDown"===e.key?(e.stopPropagation(),e.preventDefault(),h((function(t){return rr(rr({},t),{previousCharInput:e.which})}))):(null===(r=document.querySelector("#autocomplete-suggestion-li-"+(b.suggestions.length-1)))||void 0===r||r.classList.remove("selected"),h((function(t){return rr(rr({},t),{show:!1,keyboardPosition:-1,previousCharInput:e.which})})))}else if("ArrowUp"===e.key){var s;e.stopPropagation(),e.preventDefault(),null==(s=document.querySelector("#autocomplete-suggestion-li-"+b.keyboardPosition))||s.classList.remove("selected");var c=b.keyboardPosition-1;i=document.querySelector("#autocomplete-suggestion-li-"+c);c>-1?(h((function(t){return rr(rr({},t),{keyboardPosition:c,previousCharInput:e.which})})),null==i||i.classList.add("selected")):h((function(e){return rr(rr({},e),{keyboardPosition:-1})}))}else"Enter"===e.key?-1===b.keyboardPosition?(e.target.blur(),a(t),h((function(e){return rr(rr({},e),{show:!1})})),tt.sendCatalogSearchEvent(0)):setTimeout((function(){var e=document.querySelector("#autocomplete-suggestion-"+b.keyboardPosition);e&&e instanceof HTMLElement&&e.click()}),0):h((function(t){return rr(rr({},t),{previousCharInput:e.which})}))},onKeywordInputClicked:function(e){e.stopPropagation(),h((function(e){return rr(rr({},e),{show:!0})}))},onKeywordClear:function(e){var r;e.stopPropagation(),tt.sendSearchClearEvent(t),null===(r=document.getElementById("avatar-shop-keyword-input"))||void 0===r||r.focus(),a(""),h((function(e){return rr(rr({},e),{show:!1,suggestions:[],textSuggestions:[]})}))},onAutocompleteSuggestionClicked:function(e,r){a(e),E(e),tt.sendSearchSuggestionClickedEvent(t,r,e,b.textSuggestions),tt.sendCatalogSearchEvent(1),h((function(e){return rr(rr({},e),{show:!1,keyboardPosition:-1})}))},updateCategory:l,buyRobuxButtonOnClick:u,buyRobuxButtonUrl:d,getCategoryDropdownValue:p,isSearchOnBlurEnabled:m})}var or=function(){var e=(0,Z.useState)(""),t=e[0],r=e[1],a=(0,Z.useState)(!1),n=a[0],o=a[1],i=(0,Z.useState)(""),s=i[0],c=i[1],l=(0,Z.useState)(""),u=l[0],d=l[1],p=(0,Z.useState)(""),m=p[0];return{keywordForDisplay:t,setKeywordForDisplay:r,isKeywordCensored:n,setIsKeywordCensored:o,minPriceForDisplay:s,setMinPriceForDisplay:c,maxPriceForDisplay:u,setMaxPriceForDisplay:d,creatorNameForDisplay:m,setCreatorNameForDisplay:p[1],displayedQuery:{keyword:t,isKeywordCensored:n,minPrice:s,maxPrice:u,creatorName:m}}},ir=r(8149),sr=r.n(ir),cr=function(e,t,r,a){var n,o=et.formatQueries(t,e.cursor),i=et.translateToEnumStrings(r.categoryEnumLibrary,o),s=(n=i,Object.entries(n).reduce((function(e,t){var r=t[0],a=t[1];return null!=a&&(e[r]=a),e}),{})),c=!1;return s.category&&Ve.expandedCategoryList.includes(s.category)?c=!0:s.category&&Ve.expandedCategoryList.includes(s.category)||a||(c=!0),{query:s,showExpandedResults:c}},lr=function(){return(lr=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},ur=function(e,t){var r,a=lr({Keyword:e.keyword||void 0},(null==(r=e.topics)?void 0:r.length)?{TriggeredByTopicDiscovery:!0,topics:et.buildTopicKeyword(r,",")}:{});a=function(e,t){var r=lr({},e),a=t.salesTypeFilter;return r.salesTypeFilter=null==a?void 0:a.filter,r}(a=function(e,t,r){var a,n=lr({},e),o=t.currencyType,i=t.minPrice,s=t.maxPrice,c=r.customRobuxFilterId,l=r.freeFilterId,u=r.defaultCurrencyId;if(null!=o&&o.currencyType!==u){if(n.CurrencyType=o.currencyType,o.currencyType===c){var d=i&&i.toString().length>9?null:i,p=s&&s.toString().length>9?null:s;p&&d&&d>p&&(d=(a=[p,d])[0],p=a[1]),n.pxMin=null===d?0:d,n.pxMax=p}o.currencyType===l&&(n.pxMin=0,n.pxMax=0)}return n}(a=function(e,t,r){var a=lr({},e),n=t.creator,o=t.creatorName,i=r.defaultCreatorId,s=r.robloxUserId,c=r.customText;return n&&n.userId!==i&&(n.userId===s?a.CreatorID=n.userId:n.userId===c?o&&(a.CreatorName=o):n.userId&&(a.CreatorID=n.userId)),n&&n.type&&(a.CreatorType=n.type),a}(a=function(e,t,r){var a=lr({},e),n=t.category,o=t.subcategory,i=r.gearCategoryId;if(n&&(a.Category=n.categoryId,null!=o))if(n.categoryId===i){var s=parseInt(Ve.defaults.subcategory,10);o.subcategoryId!==s&&(a.Gears=o.subcategoryId,a.Subcategory=o.subcategoryId)}else a.Subcategory=o.subcategoryId;return a}(a,e,t),e,t),e,t),e);var n=e.sortType,o=e.sortAggregation,i=e.includeNotForSale,s=t.defaultSortTypeId,c=t.defaultSortAggregationId;return null!=n&&n.sortType!==s&&(a.SortType=n.sortType),null!=n&&n.hasSubMenu&&null!=o&&o.sortAggregation!==c&&(a.SortAggregation=o.sortAggregation),i&&(a.IncludeNotForSale=i),a},dr=window.GoogleAnalyticsEvents||null;var pr=function(){return{sendErrorsToLogCount:function(e,t){var r,a,n=e.errors,o=Ve.errorMessages.categoryName,i=[];n.forEach((function(e){var r=e.code,a=""+t+r;i.push({featureName:o,measureName:a,value:1})})),i.length>0&&(r=i,a=Ve.endpoints.performanceMeasurements,_.httpService.post(a,r))},sendErrorsToGoogleAnalytics:function(e,t){var r=e.errors,a=Ve.errorMessages.categoryName,n=navigator&&navigator.userAgent?navigator.userAgent:"",o=et.buildErrorMessages(r,n);dr.FireEvent([a,t,o])}}},mr=function(){var e=(0,Z.useState)(!1),t=e[0],r=e[1],a=(0,Z.useState)(null),n=a[0],o=a[1],i=(0,Z.useCallback)((function(){r(!1),o(null)}),[]);return{startPaging:t,setStartPaging:r,nextPageCursor:n,setNextPageCursor:o,resetPagination:i}},gr=function(){return(gr=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},fr=function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e},yr=function(e){var t=e.catalogQuery,r=e.searchOptions,a=e.isInfiniteScrollDisabled,n=e.library,o=e.layout,i=e.isPaginationEnabled,s=e.keyword,c=e.setCurrentUrl,l=e.setIsKeywordCensored,u=e.setIsSearchItemsLoaded,d=e.setLayoutInitialized,p=e.setSearchItemsError,m=e.setCursor,g=e.setLoading,f=e.clearTopics,y=e.setTopics,v=e.translate,b=pr(),h=mr(),S=h.startPaging,C=h.setStartPaging,T=h.nextPageCursor,E=h.setNextPageCursor,I=h.resetPagination,w=(0,Z.useState)(null),x=w[0],P=w[1],A=(0,Z.useState)(null),k=A[0],N=A[1],F=(0,Z.useState)(null),U=F[0],R=F[1],O=function(){P(null),N([])},D=(0,Z.useCallback)((function(e){p(null),e&&(O(),S||I())}),[p,I,S]),L=(0,Z.useCallback)((function(e,t){if(t&&(!e||0===e.length))return p("no_results"),u(!0),void g(!1);var r=Ve.itemTypes,a={},n=gr({},x),o=[];null==e||e.forEach((function(e){var t=et.getCatalogContentKey(e),i=gr(gr({},e),{key:t});n[t]=i,null===k||k.indexOf(t),o.push(t);var s=i.id;a[s]=gr(gr({},i),{thumbnailType:i&&i.itemType===r.bundle?ee.ThumbnailTypes.bundleThumbnail:ee.ThumbnailTypes.assetThumbnail})})),N((function(e){return null==e?o:fr(fr([],e),o)})),St.getCatalogItemDetails(a,v).then((function(e){et.updateSearchItemDetails(e,n),P((function(e){return gr(gr({},e),n)}))}),(function(e){p("error");var t=null==e?void 0:e.data;if(t){var r=Ve.errorMessages.endpointNames;b.sendErrorsToGoogleAnalytics(t,r.getCatalogItemDetails),b.sendErrorsToLogCount(t,r.getCatalogItemDetails)}})).finally((function(){u(!0),g(!1)}))}),[b,x,k,u,g,p,v]),B=(0,Z.useCallback)((function(e,t){var r=[],a=[],n=0;t.length>0?t.forEach((function(e){var t=et.formatTopic(e.displayName);a.push(t)})):e.length>0&&e.forEach((function(e){n<Ve.topics.numberOfItemsToSend&&r.push({targetId:e.id,itemType:"Asset"===e.itemType?Ve.itemTypeIds.asset:Ve.itemTypeIds.bundle}),n+=1})),y([]),St.postGetTopics(r,a,s).then((function(e){y(e.data.topics||[])}),(function(){f()}))}),[f,s,y]),M=(0,Z.useCallback)((function(e,o){var i=ur(t,r);et.appendQueryParamsToUrl(i,c);var s=cr(t,i,r,a),m=s.query,f=s.showExpandedResults;return sr()(U,m)?(g(!1),u(!0),!0):(e&&u(!1),g(!0),e&&!o&&O(),R(m),St.getSearchItems(gr({},m),!!n.isFullScreen,f).then((function(r){var a=t.topics,n=t.topicBasedBrowsingEnabledForCategory;D(e);var o=r.data;if(o){var i=o.data,s=o.keyword;a.length<=0&&(et.isKeywordResultCensored(s)?l(!0):l(!1)),n&&e&&(a.length?B([],a):(null==i?void 0:i.length)&&B(i,[])),E(o.nextPageCursor),L(i,e)}}),(function(t){g(!1),D(e),p("error");var r=null==t?void 0:t.data;if(r){var a=Ve.errorMessages.endpointNames;b.sendErrorsToGoogleAnalytics(r,a.getSearchItems),b.sendErrorsToLogCount(r,a.getSearchItems)}})).finally((function(){d(!0),C(!1)})),!1)}),[t,r,c,a,U,u,g,n.isFullScreen,D,E,L,l,B,p,b,d,C]),_=(0,Z.useCallback)((function(e,t){return e&&!t&&O(),M(e,t)}),[M]),j=(0,Z.useState)(!1),V=j[0],W=j[1];(0,Z.useEffect)((function(){W(!o.loading&&!!T&&!o.searchItemsError&&o.isSearchItemsLoaded&&!!i)}),[o.loading,T,o.searchItemsError,o.isSearchItemsLoaded,i]);var Q=(0,Z.useCallback)((function(){V&&T&&(m(T),E(null))}),[V,T,m,E]);return{canLoadNextPage:V,getPagedItems:_,fetchNextPage:Q,searchResultDict:x,searchResultList:k}},vr=function(e){var t=(0,Z.useState)(0),r=t[0],a=t[1];return(0,Z.useEffect)((function(){var t=document.querySelector("."+e);if(t){var r=t,n=function(){a(r.offsetHeight)};n();var o=new ResizeObserver((function(){n()}));return o.observe(r),function(){o.disconnect()}}}),[e]),r},br=function(){var e=vr("search-bars")+vr("rbx-header"),t=(0,Z.useState)(null),r=t[0],a=t[1];return(0,Z.useEffect)((function(){a(e)}),[e]),{searchFiltersStickyTop:r}},hr=function(){function e(){}return e.getVngBuyRobuxPolicy=function(){return _.httpService.get(Ve.endpoints.getVngBuyRobuxBehavior)},e.getAppPolicy=function(){return _.httpService.get(Ve.endpoints.getAppPolicyBehavior)},e}(),Sr=(0,De.withTranslations)((function(e){var t=e.showModal,r=e.onModalClosed,a=e.onModalContinue,n=e.translate,o=X().createElement(X().Fragment,null,X().createElement("p",{className:"modal-body"},n("Description.RedirectToPartnerWebsite",{linebreak:"\n\n"})));return X().createElement(J.SimpleModal,{title:n("Heading.LeavingRoblox"),body:o,show:t,actionButtonShow:!0,actionButtonText:n("Action.ContinueToPayment"),neutralButtonText:n("Action.Cancel"),onAction:a,onNeutral:r,onClose:r})}),{common:[""],feature:"Purchasing.PurchaseDialog"}),Cr=(0,De.withTranslations)((function(e){var t=e.toggleSearchOptions,r=e.search,a=e.searchInputValue,n=e.setSearchInputValue,o=e.isSearchOnBlurEnabled,i=e.numberOfAppliedFilters,s=e.topicBasedBrowsingEnabledForCategory,c=e.catalogQuery,l=e.topics,u=e.setSelectedTopics,d=e.onClearFilters,p=e.clearTopics,m=(0,Z.useCallback)((function(e){e.preventDefault(),r(a)}),[a,r]);return X().createElement("div",{className:Be()("mobile-search-container")},X().createElement("div",{className:"search-bar"},X().createElement("button",{id:"search-options-button",type:"button",className:"btn-generic-menu-black-md mobile-menu-button",onClick:function(){return t(!0)}},X().createElement("span",{className:"icon-filter-menu-black"}),!!i&&X().createElement("span",{className:"mobile-menu-number-container"},X().createElement("span",{className:"mobile-menu-number"},i))),X().createElement("form",{name:"forms.keywordForm",className:"form-horizontal search-form",onSubmit:m},X().createElement("div",{className:"form-group"},X().createElement("div",{className:"input-group"},X().createElement("input",{className:"form-control input-field",placeholder:"Search",type:"text",maxLength:50,value:a,onChange:function(e){var t=e.target.value;n(t),o&&r(t)}}),X().createElement("div",{className:"input-group-btn"},X().createElement("button",{className:"input-addon-btn",type:"button"},X().createElement("span",{className:"icon-search"}))))))),X().createElement(nt,{topicBasedBrowsingEnabledForCategory:s,catalogQuery:c,topics:l,setSelectedTopics:u,onClearFilters:d,clearTopics:p}))}),Qe),Tr=function(){var e=vr("rbx-header")||0,t=vr("heading-container")||0,r=(0,Z.useState)(null),a=r[0],n=r[1];return(0,Z.useEffect)((function(){e&&n("calc(100% - "+e+"px)")}),[e]),{mobileSearchOptionsContainerHeight:a,rbxHeaderHeight:e,headingContainerHeight:t}},Er=function(){function e(){}return e.getVngShopSignedUrl=function(){return _.httpService.get(Ve.endpoints.getSignedVngShopUrl)},e}(),Ir=ReactRouterDOM,wr=a.AXAnalyticsService.AXAnalyticsConstants,xr=function(e){var t=e.catalogQuery,r=e.numberOfAppliedFilters,n=e.searchItemsError,o=(0,Ir.useLocation)(),i=new URLSearchParams(o.search),s=!!t.keyword||!!i.get("Keyword"),c=a.AXAnalyticsService.useIsElementVisible(),l=c[0],u=c[1];return(0,Z.useEffect)((function(){u&&!n&&a.AXAnalyticsService.sendAXTracking({itemName:wr.CatalogView})}),[u]),(0,Z.useEffect)((function(){u&&s&&!n&&a.AXAnalyticsService.sendAXTracking({itemName:wr.CatalogSearchView})}),[u,n,s]),(0,Z.useEffect)((function(){r>0&&!n&&(s?a.AXAnalyticsService.sendAXTracking({itemName:wr.CatalogSearchFiltersApplied}):a.AXAnalyticsService.sendAXTracking({itemName:wr.CatalogFiltersApplied}))}),[s,r,n,t]),[l]},Pr=function(){return(Pr=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};var Ar,kr=(0,De.withTranslations)((function(e){var t,r,i=e.translate,s=Ot(),c=s.isMetadataInitialized,l=s.autocompleteAvatarSearchNumToDisplay,u=Tt(),d=Ut(),p=d.topUp,m=d.setTopUp,g=d.isSearchOnBlurEnabled,f=d.getAvatarEnrollments,y=Wt(c).searchOptions,v=or(),b=v.keywordForDisplay,h=v.setKeywordForDisplay,S=v.isKeywordCensored,C=v.setIsKeywordCensored,T=v.setMinPriceForDisplay,E=v.setMaxPriceForDisplay,I=v.setCreatorNameForDisplay,w=v.displayedQuery,x=er(y,h),P=x.setCategory,A=x.setSubcategory,k=x.setCreator,N=x.setCreatorName,F=x.setCurrencyType,U=x.setMinPrice,R=x.setMaxPrice,O=x.setIncludeNotForSale,D=x.setSalesTypeFilter,B=x.setSortType,M=x.setSortAggregation,_=x.setSelectedTopics,j=x.setKeyword,V=x.setCursor,W=x.catalogQuery,Q=x.keyword,G=x.isCatalogQueryInitialized,K=x.numberOfAppliedFilters,$=x.initializeCatalogQuery,q=Rt(),z=q.initialized,H=q.setInitialized,Y=q.setIsSearchItemsLoaded,ee=q.searchItemsError,te=q.setSearchItemsError,re=q.setLoading,ae=q.adsInitialized,ne=q.setAdsInitialized,oe=q.showError,ie=q.setShowError,se=q.layout,ce=It(),le=ce.library,ue=ce.setupLibrary,de=(0,Z.useState)([]),pe=de[0],me=de[1],ge=(0,Z.useCallback)((function(e){var t=$(y,e);h(t.keyword||""),I(t.creatorName||"")}),[$,y,I,h]),fe=(0,Z.useState)(window.location.href),ye=fe[0],ve=fe[1];(0,Z.useEffect)((function(){var e=function(){var e=window.location.href;e!==ye&&(ve(e),ge())};return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[ge,ye,y]);var be=xr({catalogQuery:W,numberOfAppliedFilters:K,searchItemsError:ee})[0],he=(0,Z.useState)(),Se=he[0],Ce=he[1],Te=(0,Z.useState)(!0),Ee=Te[0],Ie=Te[1];(0,Z.useEffect)((function(){Ce(le.initialized&&!le.isPhone)}),[le]),(0,Z.useEffect)((function(){hr.getAppPolicy().then((function(e){"boolean"==typeof e.data.EnableContinuousLoad?Ie(!e.data.EnableContinuousLoad):Ie(!0)})).catch((function(){Ie(!0)}))}),[]);var we=(0,Z.useState)(),xe=we[0],Pe=we[1];(0,Z.useEffect)((function(){var e,t;Pe(null===(t=null===(e=W.category)||void 0===e?void 0:e.isSearchable)||void 0===t||t)}),[W]);var Ae=(0,Z.useCallback)((function(){u.refreshAllAds()}),[u]),ke=(0,Z.useCallback)((function(){_([])}),[_]),Ne=(0,Z.useCallback)((function(){ge()}),[ge]);(0,Z.useEffect)((function(){y.isSearchOptionsLoaded&&Ne()}),[y]);var Fe=yr({catalogQuery:W,searchOptions:y,isInfiniteScrollDisabled:Ee,library:le,layout:se,isPaginationEnabled:Se,keyword:Q,setCurrentUrl:ve,setIsKeywordCensored:C,setIsSearchItemsLoaded:Y,setLayoutInitialized:H,setSearchItemsError:te,setCursor:V,setLoading:re,clearTopics:ke,setTopics:me,translate:i}),Ue=Fe.getPagedItems,Re=Fe.fetchNextPage,Oe=Fe.canLoadNextPage,De=Fe.searchResultDict,Le=Fe.searchResultList;(0,Z.useEffect)((function(){if(G){var e=!!W.cursor;if(Ue(!e,!0))return;Ae(),e||window.scrollTo({top:0,behavior:"smooth"})}}),[W,G]);var Be=(0,Z.useState)(!1),Me=Be[0],_e=Be[1],je=(0,Z.useState)(Ve.buyRobuxUrl),We=je[0],Qe=je[1],Ge=(0,Z.useState)(!1),Ke=Ge[0],$e=Ge[1],qe=(0,Z.useState)(!1),ze=qe[0],He=qe[1];(0,Z.useEffect)((function(){hr.getVngBuyRobuxPolicy().then((function(e){_e(e.data.shouldShowVng),Qe("#")})).catch((function(){_e(!1),Qe(Ve.buyRobuxUrl)}))}),[]);var Ze=function(){j("")},Xe=function(e,t){var r;k(null===(r=y.creators)||void 0===r?void 0:r.find((function(e){return e.userId===y.defaultCreatorId}))),e?Ze():function(e){F(y.currencyTypes?y.currencyTypes[0]:void 0),e||Ze()}(t)},Ye=function(e){!function(e,t){e?Ze():Xe(!1,t)}(!1,e)},Je=function(){o.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(o.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_ROBUX_PURCHASE,!1,o.paymentFlowAnalyticsService.ENUM_VIEW_NAME.CATALOG_LIST_PAGE,o.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,o.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.BUY_ROBUX),Me?$e(!0):window.location.href=Ve.buyRobuxUrl},tt=function(e){return et.getCategoryMenu(y.categories,null==e?void 0:e.categoryId)},rt=function(e,t,r,a,n){var o;r&&(j(null),ke()),n&&e.stopPropagation();var i=n;if(!i){var s=tt(a);s&&s.subcategories&&(i=null===(o=s.subcategories)||void 0===o?void 0:o[0])}P(a),A(i),t&&Ye(!r)},at=function(){z||(L({logWebVitalsEvent:function(e){n().EventStream.SendEventWithTarget(e.eventName,"RobloxWWW",{metricName:e.metricName,metricValue:e.metricValue},n().EventStream.TargetTypes.WWW)}}),ue(),ae||(ne(!0),u.registerAd(u.adIds.leaderboardAbp)),!0===a.CurrentUser.isAuthenticated&&St.getUserCurrency().then((function(e){m((function(t){return Pr(Pr({},t),{currentUserBalance:e.data.robux})}))}),(function(){})),f())};(0,Z.useEffect)((function(){at()}),[]);var nt=(0,Z.useCallback)((function(e){var t,r=null===(t=y.salesTypeFilters)||void 0===t?void 0:t.find((function(t){return t.filter===e}));D(r)}),[y.salesTypeFilters,D]),ot=(0,Z.useCallback)((function(e){var t,r=null===(t=y.sortMenus)||void 0===t?void 0:t.sortOptions.find((function(t){return t.sortType===e}));B(r)}),[null===(t=y.sortMenus)||void 0===t?void 0:t.sortOptions,B]),st=(0,Z.useCallback)((function(e){var t,r=null===(t=y.sortMenus)||void 0===t?void 0:t.sortAggregations.find((function(t){return t.sortAggregation===e}));M(r)}),[null===(r=y.sortMenus)||void 0===r?void 0:r.sortAggregations,M]),ct=le.isFullScreen,lt=le.catalogUrl,ut=br().searchFiltersStickyTop,dt=Tr(),pt=dt.mobileSearchOptionsContainerHeight,mt=dt.rbxHeaderHeight,gt=mt-dt.headingContainerHeight,yt={searchOptions:y,catalogQuery:W,displayedQuery:w,setCreatorNameForDisplay:I,setMinPriceForDisplay:T,setMaxPriceForDisplay:E,updateCategory:rt,categoryClick:function(e,t){t.subcategories&&0!==t.subcategories.length||(ke(),P(t),A(void 0),Ye(!1))},categoryNameClick:function(e,t){var r;ke(),P(t),A(void 0),Ye(!1),"true"===(null===(r=null===document||void 0===document?void 0:document.getElementById("expandable-menu-category-"+t.categoryId))||void 0===r?void 0:r.getAttribute("aria-expanded"))&&e.stopPropagation()},isCurrentCategorySearchable:xe||!1,menuConstantsCategoryTypesCommunityCreations:Dt.categoryTypes.CommunityCreations,onSalesTypeFilterChanged:nt,onSortTypeChanged:ot,onSortAggregationChanged:st,onUnavailableFilterChanged:function(e){O(e)},onCreatorChanged:function(e){k(e)},applyCreatorNameToQuery:function(e){N(e)},applyMinPriceToQuery:function(e){U(e)},applyMaxPriceToQuery:function(e){R(e)},onCurrencyTypeChanged:function(e){F(e)},isSearchOnBlurEnabled:g,closeSearchOptions:function(){He(!1)},resetFilters:function(){ge(!0)},isPhone:le.isPhone};return X().createElement("div",{id:"catalog-react-page",ref:be},X().createElement("div",{className:"alert-system-feedback"},X().createElement("div",{className:"alert alert-warning "+(oe?"on":"")},X().createElement("span",{className:"alert-content"},i("Response.Error.Filter")),X().createElement("button",{type:"button","aria-label":"Close",onClick:function(){ie(!1)},className:"icon-close-white"}))),X().createElement("div",{id:"angular-react-purchase-handoff","data-identifier":"direct-purchase"}),X().createElement("div",{id:"catalog-content",className:"clearfix catalog-content sticky shopping-cart "+(ct?"catalog-full-screen":"")},X().createElement("div",{className:"search-bars search-bar-placement-right",style:{"--heading-container-mobile-height":gt+"px"}},X().createElement("div",{className:"heading-container"},X().createElement("h1",{className:"heading"},X().createElement("a",{href:lt,target:"_self"},i("Heading.Marketplace"))),X().createElement("a",{className:"btn-growth-md buy-robux",href:We,target:"_self",onClick:Je},i("Action.BuyRobux")),Me&&X().createElement(Sr,{showModal:Ke,onModalClosed:function(){$e(!1)},onModalContinue:function(){o.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(o.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_ROBUX_PURCHASE,!1,o.paymentFlowAnalyticsService.ENUM_VIEW_NAME.CATALOG_LIST_PAGE,o.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,o.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.CONTINUE_TO_VNG),$e(!1),Er.getVngShopSignedUrl().then((function(e){e?window.open(e.data.vngShopRedirectUrl,"_blank"):window.open(Ve.fallbackVngShopUrl,"_blank")}),(function(e){window.open(Ve.fallbackVngShopUrl,"_blank")}))}})),X().createElement("div",{hidden:!z},X().createElement(Cr,{searchInputValue:b,setSearchInputValue:h,toggleSearchOptions:function(){He((function(e){return!e}))},search:j,isSearchOnBlurEnabled:g,numberOfAppliedFilters:K,topicBasedBrowsingEnabledForCategory:W.topicBasedBrowsingEnabledForCategory,catalogQuery:W,topics:pe,setSelectedTopics:_,onClearFilters:Ye,clearTopics:ke}),X().createElement(nr,{keywordForDisplay:b,setKeywordForDisplay:h,search:j,catalogQuery:W,categories:y.categories,hasSearchOptionsError:y.hasSearchOptionsError,autocompleteAvatarSearchNumToDisplay:l,library:le,updateCategory:rt,buyRobuxButtonOnClick:Je,buyRobuxButtonUrl:We,getCategoryDropdownValue:function(){var e=W.category,t=W.subcategory;return e?e.categoryId===y.gearCategoryId&&t&&t.subcategoryId!==y.defaultGearSubcategoryId?t.name:e.name:""},isSearchOnBlurEnabled:g}))),X().createElement("div",{id:"main-view"},X().createElement(it,{layout:se,topicBasedBrowsingEnabledForCategory:W.topicBasedBrowsingEnabledForCategory,setSelectedTopics:_,onClearFilters:Ye,clearTopics:ke,topUp:p,catalogQuery:W,isKeywordCensored:S,searchOptions:y,fetchNextPage:Re,canLoadNextPage:Oe,searchResultDict:De,searchResultList:Le,isInfiniteScrollDisabled:Ee,isPaginationEnabled:!!Se,library:le,topics:pe,getCategoryOption:tt,setSubcategory:A,setCreator:k,setCurrencyType:F,clearKeyword:Ze,onTopUpClear:function(){o.localStorageService.setLocalStorage("Roblox.AvatarMarketplace.TopUpClearDate-"+a.CurrentUser.userId,Date.now()),m((function(e){return Pr(Pr({},e),{showTopUp:!1})}))}})),y.isSearchOptionsLoaded&&X().createElement("div",{id:"search-options-scrollbar-container",className:"search-options-scrollbar-container",style:null!==ut?{top:ut+"px",position:"sticky",maxHeight:"calc(100vh - "+ut+"px)"}:void 0},X().createElement(J.ScrollBar,{className:"rbx-scrollbar"},X().createElement(ft,Pr({},yt,{isMobile:!1})))),!y.isSearchOptionsLoaded&&X().createElement("div",{id:"shimmer-menu-container"},X().createElement(bt,null))),ze&&X().createElement("div",{className:"mobile-search-options-container",style:{top:mt,height:null!==pt?pt:"auto"},role:"button",onClick:function(e){e.stopPropagation(),He(!1)}},X().createElement("div",{className:"mobile-search-options",onClick:function(e){e.stopPropagation()}},X().createElement(ft,Pr({},yt,{isMobile:!0})))))}),Qe),Nr=(Ar=function(e,t){return(Ar=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ar(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Fr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Nr(t,e),t.prototype.componentDidCatch=function(e,t){var r,n,o=this.props.containerName,i=(null===(n=null===(r=t.componentStack)||void 0===r?void 0:r.split("\n")[1])||void 0===n?void 0:n.trim())||"Unknown Component",s=/at (\w+)/.exec(i),c=(s?s[1]:"UnknownComponent")+"_"+e.message.toLowerCase().replace(/\s+/g,"_").slice(0,30),l=JSON.stringify({message:e.message,stack:e.stack,componentStack:t.componentStack});a.AXAnalyticsService.reportAXError({itemName:c,counterName:o,log:l})},t.prototype.render=function(){return this.props.children},t}(X().Component);var Ur=function(){return X().createElement(Fr,{containerName:"CatalogPageContainer"},X().createElement(kr,null))};function Rr(){var e=document.getElementById("catalog-react-container");e?(0,Y.render)(X().createElement(Ur,null),e):window.requestAnimationFrame((function(){return Rr()}))}var Or=function(){Rr()};function Dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(r),!0).forEach((function(t){Br(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Br(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mr(e,t,r,n,i,l,u,d,p,m,g,f,y,v,b,h,S){i.splashTiles=[],i.showSplashTiles=!0,i.currentUserId=a.CurrentUser?a.CurrentUser.userId:null,i.landingPageInfiniteScrollEnabled=!0,i.autocompleteAvatarSearchNumToDisplay=0,i.isCatalogAdsRowOnRecommendedPageEnabled=!1,i.useAutocompleteFallback=!1,i.directPurchaseEnabled=!1,i.topicBasedBrowsingEnabled=!0,i.topicBasedBrowsingDisplayEnabled=!0,i.topicBasedBrowsingEnabledForCategory=!1,i.triggeredByTopicDiscovery=!1,i.topics=[],i.selectedTopics=[],i.topicCarouselWidth=0,i.redirectBuyRobuxToVngShop=!1,i.vngShopUrl=p.fallbackVngShopUrl,i.$on("$locationChangeSuccess",(function(){if(i.layout.initialized)if(i.layout.preventLocationChange)i.layout.preventLocationChange=!1;else{if(i.navigationMenu.filtersInitialized&&i.setSelectedFilters(),i.queries&&!i.queries.category){var e=i.currentQuery,t=e.category,r=e.subcategory;i.queries.category=t&&t.categoryId,i.queries.subcategory=r&&r.subcategoryId}i.expandSelectedCategoryMenu(),i.library.isSplashPage||(i.getPagedItems(!0),i.adRefresh())}})),i.setupAds=function(){i.layout.adsInitialized||(i.layout.adsInitialized=!0,u.registerAd(u.adIds.leaderboardAbp))},i.adRefresh=function(){u.refreshAllAds()},i.setupLibrary=function(){i.library={};var e={isPhone:!!a.DeviceMeta&&(0,a.DeviceMeta)().isPhone,isDesktop:!a.DeviceMeta||(0,a.DeviceMeta)().isDesktop,isApp:!!a.DeviceMeta&&(0,a.DeviceMeta)().isInApp,buyRobuxUrl:p.buyRobuxUrl,catalogUrl:p.catalogUrl,isSplashPage:g.isSplashPage()};i.library=Lr({},e)},i.checkIfFullScreen=function(){i.library.isFullScreen=!!a.DeviceMeta&&!(0,a.DeviceMeta)().isInApp},i.initialize=function(){i.layout&&i.layout.initialized||(i.forms={},i.data={},i.navigationMenu={},i.searchResultDict={},i.searchResultList=[],i.paginations=Lr({},p.initializedPaginations),i.searchLayout={keyword:null,keywordForDisplay:null},i.queries={},i.currentQuery={},i.autocompleteSuggestions=[],i.layout=s().copy(p.layout),i.autocompleteSuggestions={show:!1,timeSinceLastSearchAutocompleteEvent:0,suggestions:[],textSuggestions:[],previousQuery:"",previousQueryBeforeRemoval:"",previousCharInput:-1,backspaceInput:!1,startTime:0,keyboardPosition:-1,locale:""},i.topUp={featureEnabled:!1,showTopUp:!1,currentUserBalance:-1},i.userLocale={},L({logWebVitalsEvent:function(e){o.eventStreamService.sendEventWithTarget(e.eventName,"RobloxWWW",{metricName:e.metricName,metricValue:e.metricValue})}}),i.setupLibrary(),i.checkIfFullScreen(),i.getMetadataFromApi(),i.setupAds(),i.getUserLocale(),i.getUserCurrency(),i.useReactCatalog=!1,i.avatarShopPlacement=void 0,i.isItemDetailsEnabled=!1,i.getAvatarShopPageEnrollment(),i.getAvatarShopRecommendationsAndSearchWebEnrollment(),i.getavatarShopRecommendationsAndSearchEnrollment(),i.getAvatarMarketplaceGuidedFeaturesEnrollment(),i.getAvatarMarketplaceShoppingCartEnrollment(),i.getAvatarSortsEnrollment(),i.getVngBuyRobuxPolicy(),i.getVngShopUrl())},i.getAvatarShopPageEnrollment=function(){v.getABTestEnrollment(H.default.defaultProjectId,H.default.layerNames.avatarShopPage,H.default.parameterNames.avatarShopPage).then((function(e){}),(function(){}))},i.getAvatarShopRecommendationsAndSearchWebEnrollment=function(){v.getABTestEnrollment(H.default.defaultProjectId,H.default.layerNames.avatarShopRecommendationsAndSearchWeb,H.default.parameterNames.avatarShopRecommendationsAndSearchWeb).then((function(e){void 0!==(null==e?void 0:e.directPurchaseEnabled)&&null!==(null==e?void 0:e.directPurchaseEnabled)&&(i.directPurchaseEnabled=e.directPurchaseEnabled)}),(function(){}))},i.getavatarShopRecommendationsAndSearchEnrollment=function(){v.getABTestEnrollment(H.default.defaultProjectId,H.default.layerNames.avatarShopRecommendationsAndSearch,H.default.parameterNames.avatarShopRecommendationsAndSearch).then((function(e){void 0!==(null==e?void 0:e.infiniteScroll)&&null!==(null==e?void 0:e.infiniteScroll)&&(i.landingPageInfiniteScrollEnabled=e.infiniteScroll)}),(function(){}))},i.getAvatarMarketplaceGuidedFeaturesEnrollment=function(){v.getABTestEnrollment(H.default.defaultProjectId,H.default.layerNames.avatarMarketplaceGuidedFeatures,H.default.parameterNames.avatarMarketplaceGuidedFeatures).then((function(e){void 0!==(null==e?void 0:e.topUpEnabled)&&null!==(null==e?void 0:e.topUpEnabled)&&(i.topUp.featureEnabled=null==e?void 0:e.topUpEnabled,i.topUp.featureEnabled&&void 0!==(null==e?void 0:e.topUpVariant)&&null!==(null==e?void 0:e.topUpVariant)&&("zeroBalance"===(null==e?void 0:e.topUpVariant)?i.topUp=Lr(Lr({},i.topUp),{},{featureEnabled:!0,robuxMinThreshold:-1,robuxMaxThreshold:0,displayCategories:p.topUp.displayCategories,headerText:"Heading.NeedMoreRobux",messageText:"Message.WithRobux",buttonText:"Action.BuyRobux",buttonUrl:"".concat(a.EnvironmentUrls.websiteUrl,"/upgrades/robux?ctx=catalogNew")}):"lowBalance"===(null==e?void 0:e.topUpVariant)?i.topUp=Lr(Lr({},i.topUp),{},{featureEnabled:!0,robuxMinThreshold:1,robuxMaxThreshold:p.topUp.robuxThreshold,displayCategories:p.topUp.displayCategories,headerText:"Heading.NeedMoreRobux",messageText:"Message.RunningLowRobux",buttonText:"Action.BuyRobux",buttonUrl:"".concat(a.EnvironmentUrls.websiteUrl,"/upgrades/robux?ctx=catalogNew")}):"giftCard"===(null==e?void 0:e.topUpVariant)&&(i.topUp=Lr(Lr({},i.topUp),{},{featureEnabled:!0,robuxMinThreshold:-1,robuxMaxThreshold:0,displayCategories:p.topUp.displayCategories,headerText:"Heading.TreatYourself",messageText:"Message.GiftCardPurchase",buttonText:"Action.ShopGiftCards",buttonUrl:"https://roblox.cashstar.com/gift-card/buy/?ref=1023gcwidget",giftCard:!0})),i.checkShowTopUpWidget()))}),(function(){}))},i.getAvatarMarketplaceShoppingCartEnrollment=function(){v.getABTestEnrollment(H.default.defaultProjectId,H.default.layerNames.avatarShopRecommendationsAndSearchWeb,H.default.parameterNames.avatarMarketplaceShoppingCart).then((function(e){}),(function(){}))},i.getAvatarSortsEnrollment=function(){v.getABTestEnrollment(H.default.defaultProjectId,H.default.layerNames.avatarMarketplaceSorts,H.default.parameterNames.avatarMarketplaceSorts).then((function(e){}),(function(){}))},i.isInfiniteScrollWebEnabled=function(){return!i.library.isPhone},i.getMetadataFromApi=function(){d.getMetadataFromApi().then((function(e){var t=e.isPremiumPriceOnItemTilesEnabled,r=e.isPremiumIconOnItemTilesEnabled,a=e.autocompleteAvatarSearchNumToDisplay,n=e.isCatalogAdsRowOnRecommendedPageEnabled,o={initialized:!0,isPremiumPriceOnItemTilesEnabled:t,isPremiumIconOnItemTilesEnabled:r};Object.assign(i.library,o),i.getSearchOptions(),i.autocompleteAvatarSearchNumToDisplay=a,i.isCatalogAdsRowOnRecommendedPageEnabled=n,i.useReactCatalog=i.checkUseReactCatalog(),i.useReactCatalog&&i.setupReactCatalog()}),(function(){i.library.initialized=!0,i.getSearchOptions()}))},i.getUserCurrency=function(){!0===a.CurrentUser.isAuthenticated&&d.getUserCurrency().then((function(e){i.topUp.currentUserBalance=e.robux}),(function(){}))},i.onTopicBasedBrowsingInitialized=function(){document.addEventListener("scroll",(function(e){var t=document.getElementById(p.topics.topicCarouselId);e.target===t&&(i.topicCarouselPosition=t.scrollLeft,i.topicCarouselWidth=t.scrollWidth-t.clientWidth,i.updateTopicNavigationButtons())}),!0)},i.postGetTopics=function(e,t){var r=[],a=[],n=0;t.length>0?t.forEach((function(e){a.push(i.formatTopic(e.displayName))})):e.length>0&&e.forEach((function(e){n<p.topics.numberOfItemsToSend&&r.push({targetId:e.id,itemType:"Asset"===e.itemType?p.itemTypeIds.asset:p.itemTypeIds.bundle}),n+=1})),i.topics=[],d.postGetTopics(r,a,i.searchLayout.keyword).then((function(e){i.topics=e.topics,i.topicCarouselPosition=0}),(function(){i.clearTopics()}))},i.onTopicClicked=function(e){if(0===i.selectedTopics.length){var t,r,a=null===(t=i.currentQuery)||void 0===t||null===(r=t.category)||void 0===r?void 0:r.categoryId;i.topicOrigin=a}var n,o,s=i.selectedTopics.indexOf(e);s>-1?(q(e.displayName,i.selectedTopics.indexOf(e),i.currentQuery.category.name,null===(n=i.currentQuery.subcategory)||void 0===n?void 0:n.name,i.searchLayout.keyword,i.buildTopicKeyword(i.topics,",")),i.selectedTopics.splice(s,1)):($(e.displayName,i.topics.indexOf(e),i.currentQuery.category.name,null===(o=i.currentQuery.subcategory)||void 0===o?void 0:o.name,i.searchLayout.keyword,i.buildTopicKeyword(i.topics,","),i.buildTopicKeyword(i.selectedTopics,",")),i.selectedTopics.push(e));i.searchLayout.topics=i.buildTopicKeyword(i.selectedTopics," "),i.selectedTopics.length>0?(i.searchKeyword(!0),i.triggeredByTopicDiscovery=!0,i.postGetTopics([],i.selectedTopics)):i.onTopicsCleared(),i.resetTopicView()},i.formatTopic=function(e){return e.toLowerCase()},i.buildTopicKeyword=function(e,t){var r="";return e.forEach((function(e){r.length>0&&(r+=t),r+=i.formatTopic(e.displayName)})),r},i.parseTopicsFromString=function(e,t){if(!e||0===e.length)return[];var r=e.split(t),a=[];return r.forEach((function(e){a.push({displayName:e,originalTopicName:""})})),a},i.onClearFilters=function(e){i.clearKeywordAndCreator(!1,e)},i.clearKeywordAndCreator=function(e,t){e?i.clearKeyword():i.clearCreator(!1,t)},i.clearKeyword=function(){i.searchLayout.keyword=null,i.applySearch(!0)},i.clearCreator=function(e,t){i.data.creator=i.data.creators.find((function(e){return e.userId===i.library.defaultCreatorId})),e?i.clearKeyword():i.clearPrice(t)},i.clearPrice=function(e){i.data.currencyType=i.data.currencyTypes?i.data.currencyTypes[0]:null,e?i.applySearch(!0):i.clearKeyword()},i.onTopicsCleared=function(){i.topicOrigin===M.default.categoryTypes.Recommended?(i.currentQuery.category=i.getCategoryOptionFromCategoryId(M.default.categoryTypes.Recommended),i.onClearFilters(!0)):i.onClearFilters(!0)},i.showTopicNavigationButton=function(e){var t=document.getElementById(p.topics.topicCarouselId);return!!t&&(i.topicCarouselWidth=t.scrollWidth-t.clientWidth,!(i.topics&&i.selectedTopics&&i.topics.length<=0&&i.selectedTopics.length<=0)&&(e?i.topicCarouselWidth>0&&i.topicCarouselPosition>0:i.topicCarouselWidth>0&&i.topicCarouselPosition+1<i.topicCarouselWidth))},i.showTopicNavigationClearButton=function(){return!i.showTopicNavigationButton(!0)&&i.selectedTopics.length>1},i.updateTopicNavigationButtons=function(){var e=document.getElementById(p.topics.topicCarouselId);if(e){i.topicCarouselWidth=e.scrollWidth-e.clientWidth;var t=i.showTopicNavigationButton(!0);i.showLeftTopicNavigationButton=t;var r=document.getElementById("topic-navigation-left");r&&(i.showLeftTopicNavigationButton?r.classList.remove("ng-hide"):r.classList.add("ng-hide"));var a=i.showTopicNavigationButton(!1);i.showRightTopicNavigationButton=a;var n=document.getElementById("topic-navigation-right");n&&(i.showRightTopicNavigationButton?n.classList.remove("ng-hide"):n.classList.add("ng-hide"));var o=i.showTopicNavigationClearButton();i.showClearTopicNavigationButton=o;var s=document.getElementById("topic-navigation-clear");s&&(i.showClearTopicNavigationButton?s.classList.remove("ng-hide"):s.classList.add("ng-hide"))}},i.resetTopicView=function(){document.getElementById(p.topics.topicCarouselId).scrollLeft=0,i.updateTopicNavigationButtons()},window.onresize=function(){i.topicBasedBrowsingDisplayEnabled&&i.updateTopicNavigationButtons()},i.onTopicNavigationButtonClicked=function(e){var t=document.getElementById(p.topics.topicCarouselId);i.topicCarouselPosition=t.scrollLeft,e?(t.scrollLeft-=p.topics.topicCarouselScrollValue,i.topicCarouselPosition-=p.topics.topicCarouselScrollValue):(t.scrollLeft+=p.topics.topicCarouselScrollValue,i.topicCarouselPosition+=p.topics.topicCarouselScrollValue)},i.clearTopics=function(){i.searchLayout.topics=null,i.topics=[],i.selectedTopics=[]},i.onTopicClearButtonClicked=function(){var e;z(i.currentQuery.category.name,null===(e=i.currentQuery.subcategory)||void 0===e?void 0:e.name,i.searchLayout.keyword,i.buildTopicKeyword(i.topics,",")),i.clearTopics(),i.searchLayout.topics=i.buildTopicKeyword(i.selectedTopics," "),i.onTopicsCleared()},i.getCatalogAdsABTestEnrollment=function(){v.getABTestEnrollment(H.default.defaultProjectId,H.default.layerNames.avatarShopPage,H.default.parameterNames.catalogItemAds).then((function(e){void 0!==(null==e?void 0:e.avatarShopPlacement)&&void 0!==(null==e?void 0:e.isItemDetailsEnabled)&&(i.avatarShopPlacement=e.avatarShopPlacement,i.isItemDetailsEnabled=e.isItemDetailsEnabled)}),(function(){}))},i.callBackForSearchOptions=function(){i.setSelectedFilters(),i.setQuery(!0),i.getPagedItems(!0,!0);e((function t(){r.pendingRequests.length>0?e(t):(i.expandSelectedCategoryMenu(),i.layout.resetVerticalMenu=!0)}))},i.getSearchOptions=function(){i.layout.hasSearchOptionsError=!1,d.getNavigationMenuItems().then((function(e){g.buildNavigationMenu(e,i.library),i.setNavigationMenu(e),i.callBackForSearchOptions()})).finally((function(){i.layout.isNavigationMenuLoaded=!0}))},i.getUserLocale=function(){var e=(new a.TranslationResourceProvider).intl.locale;i.autocompleteSuggestions.locale=e;var t=e.indexOf("-");(e=e.substring(0,-1!==t?t:e.length))!==p.englishLanguageCode&&(e+=",".concat(p.englishLanguageCode)),i.autocompleteLanguageCode=e},i.resetPaginations=function(){Object.assign(i.paginations,p.initializedPaginations)},i.resetPageContentAndLoading=function(e){i.layout.showNoResultsMessage=!1,i.layout.showErrorMessage=!1,i.layout.loading=!1,i.layout.isItemDetailsLoaded=!1,i.layout.isAssetThumbnailLoaded=!1,i.layout.isBundleThumbnailLoaded=!1,i.layout.isItemDetailsLoadingFailed=!1,e&&(i.searchResultDict={},i.searchResultList=[],i.paginations.startPaging||i.resetPaginations())},i.setPaginations=function(e){if(i.showViewAllFeaturedItemsButton())return!1;var t=i.isPaginationEnabled(),r=e.previousPageCursor,a=e.nextPageCursor;Object.assign(i.paginations,{previousPageCursor:r,nextPageCursor:a});var n=i.paginations.currentPage;i.paginations.direction===p.pageDirection.next?i.paginations.currentPage+=1:i.paginations.direction===p.pageDirection.prev?i.paginations.currentPage=n>0?n-1:0:t=a||r,i.paginations.isEnabled=t},i.isPaginationEnabled=function(){var e=i.library,t=e.isPhone,r=e.isSplashPage;return!(t||!i.landingPageInfiniteScrollEnabled&&i.isCurrentCategoryRecommended()||r)},i.buildSearchResultData=function(e){if(0===i.searchResultList.length&&(!e||0===e.length))return i.layout.showNoResultsMessage=!0,!1;var t=p.itemTypes,r={};e.forEach((function(e){var a=g.getCatalogContentKey(e);e.key=a,i.searchResultDict[a]=e,i.searchResultList.indexOf(a)<0&&i.searchResultList.push(a);var n=e.id;e&&e.itemType===t.bundle?e.thumbnailType=y.thumbnailTypes.bundleThumbnail:e.thumbnailType=y.thumbnailTypes.assetThumbnail,r[n]=e})),d.getCatalogItemDetails(r).then((function(e){g.updateSearchItemDetails(e,i.searchResultDict)}),(function(e){var t=p.errorMessages.endpointNames;f.sendErrorsToGoogleAnalytics(e,t.getCatalogItemDetails),f.sendErrorsToLogCount(e,t.getCatalogItemDetails),i.layout.isItemDetailsLoadingFailed=!0})).finally((function(){i.layout.isItemDetailsLoaded=!0;try{(0,c.initRobloxBadgesFrameworkAgnostic)({overrideIconClass:"verified-badge-icon-catalog-item"})}catch(e){}}))},i.getSearchItems=function(e,t){g.translateToEnumStrings(i.library,e),d.getSearchItems(e,i.library.isFullScreen,p.expandedCategoryList.includes(e.category)||!p.expandedCategoryList.includes(e.category)&&i.isInfiniteScrollWebEnabled()).then((function(e){if(i.resetPageContentAndLoading(t),e){var r=e.data,a=e.keyword;i.selectedTopics.length<=0&&(i.searchLayout.keyword=a,i.searchLayout.keywordForDisplay=a),i.topicBasedBrowsingEnabled&&i.topicBasedBrowsingEnabledForCategory&&!i.searchResultList.length>0&&i.topicBasedBrowsingDisplayEnabled&&(!i.selectedTopics.length>0?r.length>0&&i.postGetTopics(r,[]):i.postGetTopics([],i.selectedTopics)),i.setPaginations(e),i.buildSearchResultData(r)}}),(function(e){n.debug(" ------ getCatalogResults error -------"),i.resetPageContentAndLoading(t),i.layout.showErrorMessage=!0;var r=p.errorMessages.endpointNames;f.sendErrorsToGoogleAnalytics(e,r.getSearchItems),f.sendErrorsToLogCount(e,r.getSearchItems)})).finally((function(){i.layout.initialized||(i.layout.initialized=!0),i.paginations.startPaging=!1,i.layout.isSearchItemsLoaded=!0,i.updateTopicNavigationButtons()}))},i.getPagedItems=function(e,t){e&&!t&&(i.searchResultDict={},i.searchResultList=[]),i.layout.loading=!0,i.getSearchItems(i.queries,e)},i.setNavigationMenu=function(e){var t=e.priceFilters,r=e.categories,a=e.sortMenu,n=e.creatorFilters,o={categories:r,currencyTypes:t,sortMenus:a,salesTypeFilters:e.salesTypeFilters};Object.assign(i.navigationMenu,o),i.setCreatorFilters(n),i.navigationMenu.filtersInitialized=!0,i.navigationMenu.categories.forEach((function(e){e.categoryId===i.library.gearCategoryId&&e.subcategories.sort(i.gearSubcategoryCompare)})),t&&t.length>0&&(i.library.defaultCurrencyType=t[0]),Object.assign(i.data,i.navigationMenu)},i.gearSubcategoryCompare=function(e,t){return e.subcategoryId===p.allGearSubcategoryId?-1:t.subcategoryId===p.allGearSubcategoryId?1:m.intl.langSensitiveCompare(e.name,t.name)},i.setSelectedFilters=function(){var e=g.getQueriesValueIntoInt();i.data.query=e,i.queries=g.formatQueries(e),i.topicBasedBrowsingEnabledForCategory=p.topics.categoriesToShowTopics.includes(e.Category),i.triggeredByTopicDiscovery=e.TriggeredByTopicDiscovery,i.selectedTopics=i.parseTopicsFromString(e.topics,","),i.searchLayout.topics=i.buildTopicKeyword(i.selectedTopics," "),!i.topicBasedBrowsingDisplayEnabled&&e.topics?(i.searchLayout.topics=null,i.triggeredByTopicDiscovery=!1,i.searchKeyword(!0)):(i.searchLayout.keyword=e.Keyword,i.searchLayout.keywordForDisaply=e.Keyword),i.setSelectedNavigationMenu(e.Category,e.Subcategory,e.Gears,e.CatalogContext),i.setCreatorValue(e.CreatorID,e.CreatorName,e.CreatorType),i.setCurrencyValue(e.CurrencyType,e.pxMin,e.pxMax),i.data.includeNotForSale=e.IncludeNotForSale||!1;var t=e.salesTypeFilter?parseInt(e.salesTypeFilter,10):1,r=i.data.salesTypeFilters.find((function(e){return e.filter===t}));i.data.salesTypeFilter=r,i.setSortMenus(e.SortType,e.SortAggregation)},i.setSearchOptionsOpenValue=function(e){i.layout.isSearchOptionsOpen=e,i.layout.hideMainView=e,a.SharedElementManipulator.toggleChat(e),a.SharedElementManipulator.toggleFooter(e),a.SharedElementManipulator.togglePagification(e),e||l()},i.toggleSearchOptions=function(e){i.setSearchOptionsOpenValue(e),e||(i.setSelectedFilters(),i.closeWarning())},i.onKeywordKeypress=function(t,r){"Enter"===t.key&&(-1===i.autocompleteSuggestions.keyboardPosition?(t.target.blur(),i.clearTopics(),i.triggeredByTopicDiscovery=!1,i.searchKeyword(r),i.autocompleteSuggestions.show=!1,Q(0)):e((function(){s().element(document.querySelector("#autocomplete-suggestion-".concat(i.autocompleteSuggestions.keyboardPosition))).triggerHandler("click")}),0))},i.onKeywordKeydown=function(e){if(8===e.which&&(i.autocompleteSuggestions.previousQueryBeforeRemoval=i.searchLayout.keyword,i.autocompleteSuggestions.backspaceInput=!0),40===e.which||9===e.which){var t=i.autocompleteSuggestions.keyboardPosition+1,r=s().element("#autocomplete-suggestion-li-".concat(t));if(t<i.autocompleteSuggestions.suggestions.length){e.stopPropagation(),e.preventDefault();var a=s().element("#autocomplete-suggestion-li-".concat(i.autocompleteSuggestions.keyboardPosition));null!==a&&a.removeClass("selected"),i.autocompleteSuggestions.keyboardPosition=t,r.addClass("selected")}else 9!==e.which?(e.stopPropagation(),e.preventDefault()):(s().element("#autocomplete-suggestion-li-".concat(i.autocompleteSuggestions.suggestions.length-1)).removeClass("selected"),i.autocompleteSuggestions.show=!1,i.autocompleteSuggestions.keyboardPosition=-1)}if(38===e.which){e.stopPropagation(),e.preventDefault();var n=s().element("#autocomplete-suggestion-li-".concat(i.autocompleteSuggestions.keyboardPosition));null!==n&&n.removeClass("selected");var o=i.autocompleteSuggestions.keyboardPosition-1,c=s().element("#autocomplete-suggestion-li-".concat(o));o>-1?(i.autocompleteSuggestions.keyboardPosition=o,c.addClass("selected")):i.autocompleteSuggestions.keyboardPosition=-1}i.autocompleteSuggestions.previousCharInput=e.which},i.keywordChanged=function(){i.searchLayout.keyword?(i.autocompleteSuggestions.show=!0,i.getAutocompleteSuggestions(i.searchLayout.keyword)):(i.autocompleteSuggestions.suggestions=[],i.autocompleteSuggestions.textSuggestions=[])},i.getAutocompleteSuggestions=function(e){i.autocompleteSuggestions.startTime=Date.now(),d.getAvatarRequestSuggestion(e,i.autocompleteLanguageCode,p.autocompleteQueryAmount,i.autocompleteSuggestions.previousQuery,i.useAutocompleteFallback).then((function(e){if(e.Args.Prefix===i.searchLayout.keyword){i.autocompleteSuggestions.suggestions=[],i.autocompleteSuggestions.textSuggestions=[];var t=e.Data;(t=t.slice(0,i.autocompleteAvatarSearchNumToDisplay)).forEach((function(e){i.autocompleteSuggestions.suggestions.push(e),i.autocompleteSuggestions.textSuggestions.push(e.Query)})),(Date.now()>i.autocompleteSuggestions.timeSinceLastSearchAutocompleteEvent+p.autocompleteSuggestionEventData.autocompleteSuggestionEventTimeoutDelay||null===i.autocompleteSuggestions.timeSinceLastSearchAutocompleteEvent)&&(i.autocompleteSuggestions.previousQuery=e.Args.Prefix,V(e.Algo,i.autocompleteSuggestions.textSuggestions,e.Args.Prefix,i.autocompleteSuggestions.previousQuery,i.autocompleteSuggestions.locale,Date.now()-i.autocompleteSuggestions.startTime,i.autocompleteAvatarSearchNumToDisplay,""!==i.autocompleteSuggestions.previousQuery)),!0===i.autocompleteSuggestions.backspaceInput&&W(i.autocompleteSuggestions.previousQueryBeforeRemoval,e.Args.Prefix),i.autocompleteSuggestions.timeSinceLastSearchAutocompleteEvent=Date.now(),i.autocompleteSuggestions.backspaceInput=!1}}),(function(){i.useAutocompleteFallback=!0}))},i.onKeywordInputClicked=function(e){e.stopPropagation(),i.autocompleteSuggestions.show=!0},i.onClickOutsideAutocomplete=function(){i.autocompleteSuggestions.show=!1,i.autocompleteSuggestions.keyboardPosition=-1},i.onAutocompleteSuggestionClicked=function(e,t){i.searchLayout.keyword=e,i.searchKeyword(!0),i.autocompleteSuggestions.keyboardPosition=-1,i.getAutocompleteSuggestions(e),K(i.searchLayout.keyword,t,e,i.autocompleteSuggestions.textSuggestions),Q(1),i.autocompleteSuggestions.show=!1,i.autocompleteSuggestions.keyboardPosition=-1},i.onKeywordClear=function(e){e.stopPropagation(),G(i.searchLayout.keyword),document.getElementById("avatar-shop-keyword-input").focus(),i.autocompleteSuggestions.show=!0,i.searchLayout.keyword="",i.autocompleteSuggestions.suggestions=[],i.autocompleteSuggestions.textSuggestions=[]},i.searchKeyword=function(e){i.applySearch(e)},i.resetFiltersAndApplySearch=function(){i.onClearFilters(!1)},i.applyMobileSearch=function(){!i.forms.searchOptionsForm||i.forms.searchOptionsForm.$valid?(i.setSearchOptionsOpenValue(!1),i.closeWarning(),i.library.isSplashPage=!1,i.isCurrentCategoryRecommended()?i.resetFiltersAndApplySearch():i.applySearch()):i.layout.showError=!0},i.closeWarning=function(){i.layout.showError=!1},i.getVngShopUrl=function(){S.getVngShopSignedUrl().then((function(e){i.vngShopUrl=e.vngShopRedirectUrl}))},i.getVngBuyRobuxPolicy=function(){h.getVngBuyRobuxPolicy().then((function(e){i.redirectBuyRobuxToVngShop=e.shouldShowVng}),(function(){i.redirectBuyRobuxToVngShop=!1}))},i.buyRobuxButtonOnClick=function(){if(o.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(o.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_ROBUX_PURCHASE,!1,o.paymentFlowAnalyticsService.ENUM_VIEW_NAME.CATALOG_LIST_PAGE,o.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,o.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.BUY_ROBUX),i.redirectBuyRobuxToVngShop){var e=m.get("Description.RedirectToPartnerWebsite",{linebreak:"\n\n"}),t={titleText:m.get("Heading.LeavingRoblox"),bodyText:e,actionButtonShow:!0,actionButtonText:m.get("Action.ContinueToPayment"),actionButtonClass:"btn-primary-md",neutralButtonText:m.get("Action.Cancel"),closeButtonShow:!0};b.open(t).result.then((function(){o.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(o.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_ROBUX_PURCHASE,!1,o.paymentFlowAnalyticsService.ENUM_VIEW_NAME.CATALOG_LIST_PAGE,o.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,o.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.CONTINUE_TO_VNG),window.open(i.vngShopUrl,"_blank").focus()}))}else window.location=i.library.buyRobuxUrl},i.fetchNextFromInfiniteScroll=function(){i.layout.isSearchOptionsOpen||i.layout.loading||!i.paginations.nextPageCursor||!i.layout.isItemDetailsLoaded&&i.isInfiniteScrollWebEnabled()||(i.library.isSplashPage&&(i.library.isSplashPage=!1,i.queries.category=i.currentQuery.category&&i.currentQuery.category.categoryId,i.queries.subcategory=i.currentQuery.subcategory&&i.currentQuery.subcategory.subcategoryId),i.queries.cursor=i.paginations.nextPageCursor,i.isInfiniteScrollWebEnabled()?i.getPagedItems(!1,!0):i.getSearchItems(i.queries),i.paginations.direction=p.pageDirection.next)},i.setQuery=function(){var e={};i.setKeywordParam(e),i.setTopicParams(e),i.setCategoryParams(e),i.setCreatorParam(e),i.setPriceParams(e),i.setSalesTypeParams(e),null!=i.data.sortType&&i.data.sortType.sortType!==i.library.defaultSortTypeId&&(e.SortType=i.data.sortType.sortType),null!=i.data.sortType&&i.data.sortType.hasSubMenu&&null!=i.data.sortAggregation&&i.data.sortAggregation!==i.library.defaultSortAggregationId&&(e.SortAggregation=i.data.sortAggregation.sortAggregation),i.data.includeNotForSale&&(e.IncludeNotForSale=i.data.includeNotForSale),i.data.query=e,i.queries=g.formatQueries(e),i.topicBasedBrowsingEnabledForCategory=p.topics.categoriesToShowTopics.includes(i.queries.category),i.layout.preventLocationChange=!0,t.search(e),window.scrollTo({top:0,behavior:"smooth"})},i.setKeywordParam=function(e){var t=i.searchLayout,r=t.keyword;t.topics;i.searchLayout.keywordForDisplay=null,r&&(e.Keyword=r,i.searchLayout.keywordForDisplay=r)},i.setCategoryParams=function(e){if(i.isCurrentCategoryRecommended()&&(e.Keyword||e.topics)){var t=i.library.defaultCategoryIdForRecommendedSearch;return i.currentQuery.category=i.getCategoryMenu({categoryId:t}),i.currentQuery.subcategory=null,e.Category=t,void(e.Subcategory=null)}i.currentQuery.category&&(!i.library.displaySplash||i.paginations.currentPage>1)&&(e.Category=i.currentQuery.category.categoryId,null!=i.currentQuery.subcategory&&(i.currentQuery.category.categoryId===i.library.gearCategoryId?i.currentQuery.subcategory.subcategoryId!==p.defaults.subcategory&&(e.Gears=i.currentQuery.subcategory.subcategoryId,e.Subcategory=i.currentQuery.subcategory.subcategoryId):e.Subcategory=i.currentQuery.subcategory.subcategoryId))},i.setCreatorParam=function(e){i.data.creatorBreadcrumb=null,i.data.creator&&i.data.creator.userId!==i.library.defaultCreatorId&&(i.data.creator.userId===i.library.robloxUserId?(e.CreatorID=i.data.creator.userId,i.data.creatorBreadcrumb=i.data.creator.name):i.data.creator.userId===i.layout.customText&&null!=i.data.creatorName?(e.CreatorName=i.data.creatorName,i.data.creatorBreadcrumb=i.data.creatorName):i.data.creator.userId&&(e.CreatorID=i.data.creator.userId)),i.data.creator&&i.data.creator.type&&(e.CreatorType=i.data.creator.type)},i.setPriceParams=function(e){var t=i.data.currencyType;if(i.data.showFreeBreadcrumb=t&&t.currencyType===i.library.freeFilterId,i.data.minPriceBreadcrumb=null,i.data.maxPriceBreadcrumb=null,null!=t&&t.currencyType!==i.library.defaultCurrencyId){if(e.CurrencyType=t.currencyType,t.currencyType===i.library.customRobuxFilterId){i.data.minPrice=i.data.minPrice&&i.data.minPrice.toString().length>9?null:i.data.minPrice,i.data.maxPrice=i.data.maxPrice&&i.data.maxPrice.toString().length>9?null:i.data.maxPrice;var r=i.data.minPrice,a=i.data.maxPrice;a&&r>a&&(i.data.minPrice=a,i.data.maxPrice=r),i.data.minPriceBreadcrumb=i.data.minPrice||0,i.data.maxPriceBreadcrumb=i.data.maxPrice,null===i.data.minPrice&&null===i.data.maxPrice?(e.pxMin=0,e.pxMax=0):(e.pxMin=i.data.minPrice,e.pxMax=i.data.maxPrice)}t.currencyType===i.library.freeFilterId&&(e.pxMin=0,e.pxMax=0)}},i.setTopicParams=function(e){var t=i.searchLayout.topics,r=[];i.selectedTopics.forEach((function(e){r.push(e.displayName.toLowerCase())})),t&&(e.TriggeredByTopicDiscovery=!0,e.topics=i.buildTopicKeyword(i.selectedTopics,","))},i.setSalesTypeParams=function(e){e.salesTypeFilter=i.data.salesTypeFilter.filter},i.setSelectedNavigationMenu=function(e,t,r,a){if(!i.navigationMenu.categories)return!1;Number.isInteger(e,10)||(e=a?i.library.allCategoriesId:i.library.defaultCategoryId);var n=i.navigationMenu.categories.find((function(t){return t.categoryId===e}));if(n||(e=i.library.defaultCategoryId,n=i.navigationMenu.categories.find((function(t){return t.categoryId===e}))),i.currentQuery.category=n,!n||n.subcategories&&0===n.subcategories.length)return i.currentQuery.subcategory=null,!1;if(e===i.library.gearCategoryId){var o=r?r[0]:null;o||(o=n.subcategories[0].subcategoryId),i.currentQuery.subcategory=n.subcategories.find((function(e){return e.subcategoryId===o}))}else t&&(i.isLayeredClothingCategory=p.layeredClothingSubcategories.includes(t),i.currentQuery.subcategory=n.subcategories.find((function(e){return e.subcategoryId===t})));return!1},i.setCreatorFilters=function(e){return e?(e.push({name:null,isSelected:!1,userId:i.layout.customText}),i.data.creators=e,!0):(i.data.creators=null,!1)},i.setCreatorValue=function(e,t,r){var a=i.data.creators;if(t)i.data.creator=a.find((function(e){return e.userId===i.layout.customText})),i.data.creatorName=t,i.data.creatorBreadcrumb=t;else{e||(e=i.library.defaultCreatorId);var n=parseInt(e,10);n>parseInt(i.library.robloxUserId,10)?(i.data.creator=a.find((function(e){return e.userId===i.layout.customText})),i.data.creator.userId=n):i.data.creator=a.find((function(t){return t.userId===e})),i.data.creatorBreadcrumb=i.data.creator&&i.data.creator.userId!==i.library.defaultCreatorId?i.data.creator.name:null,i.data.creatorName=null}i.data.creator&&r&&(i.data.creator.type=r)},i.setCurrencyValue=function(e,t,r){var a=i.navigationMenu.currencyTypes;return a?(i.data.currencyType=null==e?i.library.defaultCurrencyType:a.find((function(t){return t.currencyType===e})),i.data.showFreeBreadcrumb=i.data.currencyType&&i.data.currencyType.currencyType===i.library.freeFilterId,i.data.minPrice=null,i.data.maxPrice=null,i.data.currencyType.currencyType===i.library.customRobuxFilterId&&(t=t?parseInt(t,10):null,r=r?parseInt(r,10):null,i.data.minPrice=0!==t?t:null,i.data.maxPrice=0!==r?r:null,i.data.minPriceBreadcrumb=t||0,i.data.maxPriceBreadcrumb=r),!1):(i.data.currencyType=null,!1)},i.setSortMenus=function(e,t){var r=i.navigationMenu.sortMenus;if(!r)return i.data.sortType=null,i.data.sortAggregation=null,!1;var a=r.sortOptions,n=r.sortAggregations;return a?(i.data.defaultSortValue=a[0],i.data.sortType=null==e?i.data.defaultSortValue:a.find((function(t){return t.sortType===e}))):i.data.sortType=null,n?(i.data.defaultSortAggregationValue=n[0],i.data.sortAggregation=null==t?i.data.defaultSortAggregationValue:n.find((function(e){return e.sortAggregation===t}))):i.data.sortAggregation=null,!1},i.setSortType=function(e){var t=i.data.sortMenus;return t&&t[0]?(t[0].Sorts&&(i.data.defaultSortValue=t[0].Sorts[0],i.data.sortType=null==e?i.data.defaultSortValue:t[0].Sorts.find((function(t){return t.sortType===e}))),!1):(i.data.sortType=null,!1)},i.setSortAggregation=function(e){var t=i.data.sortMenus;return t&&t[1]?(t[1].Sorts&&(i.data.defaultSortAggregationValue=t[1].Sorts[0],i.data.sortAggregation=null==e?i.data.defaultSortAggregationValue:t[1].Sorts.find((function(t){return t.sortAggregation===e}))),!1):(i.data.sortAggregation=null,!1)},i.getCategoryOptionFromCategoryId=function(e){return e<0?null:i.navigationMenu.categories.find((function(t){return t.categoryId===e}))},i.getCategoryMenu=function(e){return e?i.navigationMenu.categories.find((function(t){return t.categoryId===e.categoryId})):null},i.getCategoryOption=function(e){return i.getCategoryMenu(e)},i.getCategoryDropdownValue=function(){var e,t;if(!i.currentQuery.category)return"";if((null===(e=i.currentQuery)||void 0===e||null===(t=e.category)||void 0===t?void 0:t.categoryId)===M.default.categoryTypes.Recommended){var r=i.library.defaultCategoryIdForRecommendedSearch;if(Number.isInteger(r,10)){var a=i.navigationMenu.categories.find((function(e){return e.categoryId===r}));if(a&&a.name)return a.name}}return i.currentQuery.category.categoryId===i.library.gearCategoryId&&i.currentQuery.subcategory&&i.currentQuery.subcategory.subcategoryId!==i.library.defaultGearSubcategoryId?i.currentQuery.subcategory.name:i.currentQuery.category.name},i.updateCategory=function(e,t,r,a,n){if(r&&(i.searchLayout.keyword=null,i.clearTopics(),i.topicBasedBrowsingEnabledForCategory=p.topics.categoriesToShowTopics.includes(a.categoryId)),n?(i.isLayeredClothingCategory=p.layeredClothingSubcategories.includes(n.subcategoryId),e.stopPropagation()):i.isLayeredClothingCategory=!1,i.currentQuery.category=a,i.currentQuery.subcategory=n,!n){var o=i.getCategoryOption(a);o&&o.subcategories&&(i.currentQuery.subcategory=o.subcategories[0])}i.library.isSplashPage=!1,t?i.onClearFilters(!r):i.applySearch(!0)},i.updateSort=function(e){i.data.sortType=e,i.applySearch(!0)},i.updateSortAggregation=function(e){i.data.sortAggregation=e,i.applySearch(!0)},i.filterChanged=function(){if(!i.layout.isSearchOptionsOpen)if(i.data.customCreatorSelected||i.data.creatorName||!i.data.creator||i.data.creator.userId!==i.layout.customText){if(i.data.isCreatorAGroup=!1,i.data.customCreatorSelected=!1,null==i.data.minPriceBreadcrumb&&i.data.currencyType&&i.data.currencyType.currencyType===i.library.customRobuxFilterId){if(!i.data.customPriceSelected)return void(i.data.customPriceSelected=!0);i.data.currencyType=i.data.defaultCurrencyValue,i.data.customPriceSelected=!1}else i.data.customPriceSelected=!1;i.applySearch(!0)}else i.data.customCreatorSelected=!0},i.applySearch=function(e,t){i.layout.isSearchItemsLoaded=!1,i.library.isSplashPage=!1,i.setQuery(t),i.getPagedItems(!0,e),i.adRefresh()},i.onPriceFilterKeydown=function(e){"Enter"===e.key&&(e.preventDefault(),i.applySearch(!0))},i.onCreatorFilterKeydown=function(e){"Enter"===e.key&&(e.preventDefault(),i.applySearch())},i.mobileCategoryClick=function(e,t){var r=e.subcategories;!e||!t&&r&&r.length>0||(r&&0!==r.length||(i.currentQuery.subcategory=null),i.currentQuery.category=e)},i.getAllFeaturedItems=function(){var e={Category:i.getSearchableCategory()};i.library.isSplashPage=!1,i.data.query=e,i.queries=g.formatQueries(e),t.search(e),i.setSelectedNavigationMenu(e.Category),i.getPagedItems(!0,!1)},i.showViewAllFeaturedItemsButton=function(){var e=i.library,t=e.isSplashPage,r=e.initialized,a=e.isPhone;return!i.landingPageInfiniteScrollEnabled&&(t||i.isCurrentCategoryRecommended()&&r&&!a)},i.getSearchableCategory=function(){var e,t,r=null===(e=i.currentQuery)||void 0===e||null===(t=e.category)||void 0===t?void 0:t.categoryId;return i.isCurrentCategoryRecommended()?i.library.defaultCategoryIdForRecommendedSearch:r},i.getViewAllItemsTranslation=function(e){return e===M.default.categoryTypes.All?"Label.AllItems":"Action.ViewFeaturedItems"},i.getTranslationKeyForViewFeaturedButton=function(){return i.getViewAllItemsTranslation(i.getSearchableCategory())},i.showUnavailableFilter=function(){return i.library&&!i.library.isPhone},i.showCurrencyType=function(e){return!(!i.currentQuery.category||!e)&&!(i.currentQuery.category.categoryId===i.library.defaultCategoryId&&e.currencyType===i.library.freeFilterId)},i.isSearchableCategory=function(e){var t;return null===(t=null==e?void 0:e.isSearchable)||void 0===t||t},i.categoryClick=function(e,t){t.subcategories&&0!==t.subcategories.length||(i.clearTopics(),i.topicBasedBrowsingEnabledForCategory=p.topics.categoriesToShowTopics.includes(t.categoryId),i.library.isSplashPage=!1,i.currentQuery.category=t,i.currentQuery.subcategory=null,i.onClearFilters(!1))},i.renderShoppingCartButton=function(){Oe("shopping-cart-btn-entry")},i.categoryNameClick=function(e,t){i.clearTopics(),i.topicBasedBrowsingEnabledForCategory=p.topics.categoriesToShowTopics.includes(t.categoryId),i.library.isSplashPage=!1,i.currentQuery.category=t,i.currentQuery.subcategory=null,i.onClearFilters(!1),"true"===document.getElementById("expandable-menu-category-".concat(t.categoryId)).getAttribute("aria-expanded")&&e.stopPropagation()},i.expandSelectedCategoryMenu=function(){var e=i.currentQuery.category;if(e){var t=e.categoryId===M.default.categoryTypes.Recommended?i.library.defaultCategoryIdForRecommendedSearch:e.categoryId,r=i.getCategoryOptionFromCategoryId(t);r&&null!=r.subcategories&&0!==r.subcategories.length&&a.BootstrapWidgets.ShowAccordionMenu(i.layout.accordionMenuIdPrefix+t)}},i.checkShowTopUpWidget=function(){var e=o.localStorageService.getLocalStorage("Roblox.AvatarMarketplace.TopUpClearDate-".concat(a.CurrentUser.userId));i.topUp.showTopUp=Date.now()-e>p.topUp.resetTime},i.onTopUpClear=function(){o.localStorageService.setLocalStorage("Roblox.AvatarMarketplace.TopUpClearDate-".concat(a.CurrentUser.userId),Date.now()),i.topUp.showTopUp=!1},i.isCurrentCategoryRecommended=function(){var e,t;return(null===(e=i.currentQuery)||void 0===e||null===(t=e.category)||void 0===t?void 0:t.categoryId)===M.default.categoryTypes.Recommended};var C=i.$watch("data.currencyType",(function(e){e&&e.excludePriceSorts&&i.data.sortType&&i.data.sortType.isPriceRelated&&(i.data.sortType=i.data.defaultSortValue)})),T=i.$watch("data.category",(function(e){e&&e.categoryId===i.library.defaultCategoryId&&i.data.currencyType&&i.data.currencyType.currencyType===i.library.freeFilterId&&(i.data.currencyType=i.library.defaultCurrencyType,i.data.showFreeBreadcrumb=!1,i.$apply())}));i.checkUseReactCatalog=function(){return"true"===t.search().useReactCatalog},i.setupReactCatalog=function(){i.renderReactCatalogComponent=function(){i.useReactCatalog&&(i.renderReactCatalogDebounce&&e.cancel(i.renderReactCatalogDebounce),i.renderReactCatalogDebounce=e((function(){Or()}),100))},i.renderReactCatalogComponent()},i.$on("$destroy",(function(){var t;C&&C(),T&&T(),i.useReactCatalog&&((t=document.getElementById("catalog-react-page"))&&(0,Y.unmountComponentAtNode)(t),i.renderReactCatalogDebounce&&e.cancel(i.renderReactCatalogDebounce))})),i.initialize()}Mr.$inject=["$timeout","$location","$http","$log","$scope","$anchorScroll","abpService","catalogService","catalogConstants","languageResource","utilityService","metricsService","thumbnailConstants","experimentationService","modalService","universalAppConfigurationService","vngPaymentsService"],B.Z.controller("catalogController",Mr);var _r=Mr},9661:function(e,t,r){"use strict";r.r(t);r(5734);var a=r(4720),n=r(792),o=r(9597);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t,r,o,i){t.hasSecondaryInfo=function(){return t.isCreatorNameShown()||t.item.unitsAvailableForConsumption>0&&!1},t.isCreatorNameShown=function(){return t.item&&t.item.creatorTargetId!==r.robloxSystemUserId&&t.item.creatorName},t.isItemThumbnailLoading=function(){return t.item.itemType===r.itemTypes.bundle?!t.layout.isBundleThumbnailLoaded:!t.layout.isAssetThumbnailLoaded},t.isItemThumbnailAvailable=function(){return t.item.thumbnail&&t.item.thumbnail.imageUrl},t.shouldShowPremiumIcon=function(){return!0===t.library.isPremiumIconOnItemTilesEnabled&&void 0!==t.item.premiumPricing},t.getDisplayPrice=function(){return t.library.isPremiumPriceOnItemTilesEnabled&&t.item.premiumPricing?t.item.premiumPricing.premiumPriceInRobux:t.item.lowestPrice?t.item.lowestPrice:t.item.price},t.clickItemCard=function(e){t.item.detailsUrl||e.preventDefault()},t.showVerifiedBadge=function(e){return e&&e.creatorHasVerifiedBadge},t.getLimited1Resellers=function(e){o.getResellerData(e).then((function(e){t.limited1Reseller=e.data[0],t.lowestAvailablePrice=e.data[0].price}))},t.getCollectibleItemDetails=function(e){o.postMarketplaceItemDetails(e).then((function(e){t.collectibleItemDetail=e[0];var r=0===t.collectibleItemDetail.unitsAvailableForConsumption||0!==t.collectibleItemDetail.lowestResalePrice&&t.collectibleItemDetail.lowestResalePrice<t.collectibleItemDetail.price||"ExperiencesDevApiOnly"===t.collectibleItemDetail.saleLocationType;t.lowestAvailablePrice=r?t.collectibleItemDetail.lowestResalePrice:t.collectibleItemDetail.price}))},t.onItemCardHover=function(e){e.collectibleItemId&&void 0===t.collectibleItemDetail?t.timer=setTimeout((function(){t.getCollectibleItemDetails(e.collectibleItemId)}),500):(e.isLimited||e.isLimitedUnique)&&void 0===t.limited1Reseller?t.timer=setTimeout((function(){t.getLimited1Resellers(e.id)}),500):t.lowestAvailablePrice||(t.lowestAvailablePrice=e.price)},t.onItemCardHoverExit=function(e){clearTimeout(t.timer)},t.itemLoading=function(e){return(!e.isLimited&&!e.isLimitedUnique||void 0!==t.limited1Reseller)&&(!e.collectibleItemId||void 0!==t.collectibleItemDetail)},t.itemAvailableToPurchase=function(e){if((e.isLimited||e.isLimitedUnique)&&void 0===t.limited1Reseller)return!1;if(e.collectibleItemId){if(void 0===t.collectibleItemDetail)return!1;if(0===t.collectibleItemDetail.unitsAvailableForConsumption&&!1===t.collectibleItemDetail.hasResellers&&e.itemRestrictions.includes("Collectible"))return!1;if(!(void 0!==e.collectibleItemId&&e.itemRestrictions.includes("Collectible")&&(0===t.collectibleItemDetail.unitsAvailableForConsumption||0!==t.collectibleItemDetail.lowestResalePrice&&t.collectibleItemDetail.lowestResalePrice<t.collectibleItemDetail.price||"ExperiencesDevApiOnly"===t.collectibleItemDetail.saleLocationType))&&"ExperiencesDevApiOnly"===t.collectibleItemDetail.saleLocationType)return!1}return!e.isOffSale},t.purchaseItem=function(e,r){var o=a.uuidService.generateRandomUuid();e.preventDefault();var i={identifier:"direct-purchase",name:r.name,itemType:r.itemType,assetId:r.id,productId:r.productId,assetType:"",expectedCurrency:1,expectedPrice:r.price,expectedPurchaserId:n.CurrentUser.id,expectedPurchaserType:"User",refreshPage:!1,expectedSellerName:r.creatorName,resalePurchase:!1};((r.isLimited||r.isLimitedUnique)&&((i=s(s({},i),{},{expectedSellerId:t.limited1Reseller.seller.id,userAssetId:t.limited1Reseller.userAssetId})).expectedPrice=t.limited1Reseller.price,i.expectedSellerName=t.limited1Reseller.seller.name,i.resalePurchase=!0),r.collectibleItemId&&t.collectibleItemDetail)&&(void 0!==r.collectibleItemId&&!r.itemRestrictions.includes("Collectible")&&0===t.collectibleItemDetail.unitsAvailableForConsumption||0!==t.collectibleItemDetail.lowestResalePrice&&(t.collectibleItemDetail.lowestResalePrice<t.collectibleItemDetail.price||"ExperiencesDevApiOnly"===t.collectibleItemDetail.saleLocationType)?((i=s(s({},i),{},{collectibleItemId:r.collectibleItemId,collectibleItemInstanceId:t.collectibleItemDetail.lowestAvailableResaleItemInstanceId,collectibleProductId:t.collectibleItemDetail.lowestAvailableResaleProductId,expectedSellerType:"User",idempotencyKey:o})).expectedPrice=t.collectibleItemDetail.lowestResalePrice,i.resalePurchase=!0):i=s(s({},i),{},{collectibleItemId:r.collectibleItemId,collectibleProductId:t.collectibleItemDetail.collectibleProductId,expectedSellerType:"User",idempotencyKey:o}));window.dispatchEvent(new CustomEvent("angular-to-react-purchase-event",{detail:i}))}}l.$inject=["$log","$scope","catalogConstants","catalogService","$timeout"],o.Z.controller("itemCardController",l),t.default=l},5630:function(e,t,r){"use strict";r.r(t);var a=r(9597),n=r(582),o=r(7124),i=r(7904);function s(e,t,r,a,n,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(a,n)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function i(e){s(o,a,n,i,c,"next",e)}function c(e){s(o,a,n,i,c,"throw",e)}i(void 0)}))}}function l(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}p.$inject=["$log","$scope","catalogConstants","$anchorScroll","$timeout"];var d=(0,o.ex)();function p(e,t,r,a,o){t.getNumberItemToDisplay=function(){return r.expandedCategoryList.includes(t.queries.category)||t.isInfiniteScrollEnabled()&&t.isInfiniteScrollWebEnabled()?r.numberOfSearchItemsExpanded:t.library.isFullScreen?r.numberOfSearchItemsForFullScreen:t.library.isSplashPage?r.numberOfSearchItems:t.searchResultList.length},t.isInfiniteScrollEnabled=function(){var e=t.library,r=e.initialized,a=e.isPhone;return r&&a||t.isInfiniteScrollWebEnabled()},t.isRegularItemsResultAvailable=function(){var e=t.library,r=e.initialized,a=e.isPhone;return r&&!a},t.isBreadcrumbsAvailable=function(){var e=t.library,r=e.initialized,a=e.isPhone;return r&&!a},t.shouldShowHeading=function(){return t.layout.isNavigationMenuLoaded&&t.isCurrentCategoryRecommended()},t.isRecommendedEnabled=function(){return t.library.defaultCategoryId===n.default.categoryTypes.Recommended},t.showRecommendedHeading=function(){return t.library.isSplashPage&&t.isRecommendedEnabled()||t.isCurrentCategoryRecommended()},t.showReturnToTop=function(){return t.searchResultList.length>r.numberOfSearchItemsExpanded},t.returnToTop=function(){window.scrollTo({top:0,behavior:"smooth"})},t.pager={loadNextPage:function(){var e=t.paginations,a=e.nextPageCursor,n=e.startPaging;a&&!n&&(t.queries.cursor=a,t.getSearchItems(t.queries,!0),t.paginations.direction=r.pageDirection.next,t.paginations.startPaging=!0)},loadPreviousPage:function(){var e=t.paginations,a=e.previousPageCursor,n=e.startPaging;a&&!n&&(t.queries.cursor=a,t.getSearchItems(t.queries,!0),t.paginations.direction=r.pageDirection.prev,t.paginations.startPaging=!0)},canLoadNextPage:function(){var e=t.paginations,r=e.nextPageCursor,a=e.startPaging;return r&&!a},canLoadPreviousPage:function(){var e=t.paginations,r=e.previousPageCursor,a=e.startPaging;return r&&!a},getCurrentPageNumber:function(){return t.paginations.currentPage}},t.shoppingCartItemsByItemId=null,t.handleNewCartState=function(e){if(null!=e&&e.items){var r,a={},n=l(e.items);try{for(n.s();!(r=n.n()).done;){var o=r.value;a[o.itemId]=o}}catch(e){n.e(e)}finally{n.f()}t.shoppingCartItemsByItemId=a,setTimeout((function(){var e;null==t||null===(e=t.$apply)||void 0===e||e.call(t)}),10)}},t.loadCartState=c(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getCartState();case 2:(r=e.sent)&&t.handleNewCartState(r);case 4:case"end":return e.stop()}}),e)}))),t.isItemInCart=function(e){var r;return!(null==t||null===(r=t.shoppingCartItemsByItemId)||void 0===r||!r[e.id])},t.addToCart=function(e,t){var r,a,n;null==e||null===(r=e.preventDefault)||void 0===r||r.call(e),null==e||null===(a=e.stopPropagation)||void 0===a||a.call(e),null==e||null===(n=e.stopImmediatePropagation)||void 0===n||n.call(e),d.dispatch((0,i.uR)(t,!0))},t.removeFromCart=function(e,t){var r,a,n;null==e||null===(r=e.preventDefault)||void 0===r||r.call(e),null==e||null===(a=e.stopPropagation)||void 0===a||a.call(e),null==e||null===(n=e.stopImmediatePropagation)||void 0===n||n.call(e),d.dispatch((0,i.ly)(t,!0))},t.initializeShoppingCart=function(){t.loadCartState(),d.onCartStateChange((function(e){e&&t.handleNewCartState(e)}))},t.initializeShoppingCart()}a.Z.controller("itemsContainerController",p),t.default=p},4607:function(e,t,r){"use strict";r.r(t);var a=r(9597),n=r(582);function o(e,t,r){t.canShowFilters=function(){return t.isSearchableCategory(t.currentQuery.category)},t.canToggleSubmenu=function(e){var t=e.subcategories;return t&&t.length>0},t.isUGCOnly=function(){var e,r;return(null===(e=t.currentQuery)||void 0===e||null===(r=e.category)||void 0===r?void 0:r.categoryId)===n.default.categoryTypes.CommunityCreations}}o.$inject=["$log","$scope","catalogConstants"],a.Z.controller("searchOptionsController",o),t.default=o},673:function(e,t,r){"use strict";r.r(t);var a=r(792);function n(){return{restrict:"A",scope:!0,link:function(){a.BootstrapWidgets.SetupAccordion()}}}r(9597).Z.directive("accordionMenu",n),t.default=n},1443:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e){return{restrict:"A",replace:!1,templateUrl:e.templateUrls.catalogBreadcrumbsTemplate}}n.$inject=["catalogConstants"],a.Z.directive("catalogBreadcrumbs",n),t.default=n},9645:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e){return{restrict:"A",replace:!1,templateUrl:e.templateUrls.catalogPageTemplate,link:function(e,t){t.ready((function(){e.renderShoppingCartButton()}))}}}n.$inject=["catalogConstants"],a.Z.directive("catalogPage",n),t.default=n},7473:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e){return{restrict:"A",replace:!1,templateUrl:e.templateUrls.creatorFiltersTemplate}}n.$inject=["catalogConstants"],a.Z.directive("creatorFilters",n),t.default=n},7210:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e){return{restrict:"A",link:function(t,r,a){r.bind("load",(function(){t.item&&t.item.thumbnail&&e((function(){t.item.thumbnail.isLoaded=!0}))}))}}}n.$inject=["$timeout"],a.Z.directive("imageLoad",n),t.default=n},4094:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e){return{restrict:"A",replace:!1,templateUrl:e.templateUrls.cardItemTemplate}}n.$inject=["catalogConstants"],a.Z.directive("itemCard",n),t.default=n},9766:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e){return{restrict:"A",replace:!1,templateUrl:e.templateUrls.itemsContainer}}n.$inject=["catalogConstants"],a.Z.directive("itemsContainer",n),t.default=n},7566:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e){return{restrict:"A",replace:!1,templateUrl:e.templateUrls.mobileSearchBarTemplate}}n.$inject=["catalogConstants"],a.Z.directive("mobileSearchBar",n),t.default=n},6214:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e){return{restrict:"A",replace:!1,templateUrl:e.templateUrls.mobileSearchOptionsTemplate}}n.$inject=["catalogConstants"],a.Z.directive("mobileSearchOptions",n),t.default=n},5156:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e){return{restrict:"A",replace:!1,templateUrl:e.templateUrls.priceFiltersTemplate}}n.$inject=["catalogConstants"],a.Z.directive("priceFilters",n),t.default=n},8112:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e){return{restrict:"A",replace:!1,templateUrl:e.templateUrls.salesTypeFilterTemplate}}n.$inject=["catalogConstants"],a.Z.directive("salesTypeFilter",n),t.default=n},6085:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e){return{restrict:"A",replace:!1,templateUrl:e.templateUrls.searchBarTemplate}}n.$inject=["catalogConstants"],a.Z.directive("searchBar",n),t.default=n},9068:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e){return{restrict:"A",replace:!1,templateUrl:e.templateUrls.searchOptionsTemplate}}n.$inject=["catalogConstants"],a.Z.directive("searchOptions",n),t.default=n},1969:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e){return{restrict:"A",replace:!1,templateUrl:e.templateUrls.shimmerContainer}}n.$inject=["catalogConstants"],a.Z.directive("shimmerContainer",n),t.default=n},2601:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e){return{restrict:"A",replace:!1,templateUrl:e.templateUrls.shimmerMenu}}n.$inject=["catalogConstants"],a.Z.directive("shimmerMenu",n),t.default=n},5478:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e){return{restrict:"A",replace:!1,templateUrl:e.templateUrls.showUnavailableFilterTemplate}}n.$inject=["catalogConstants"],a.Z.directive("showUnavailableFilter",n),t.default=n},727:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e){return{restrict:"A",replace:!1,templateUrl:e.templateUrls.sortFilterTemplate}}n.$inject=["catalogConstants"],a.Z.directive("sortFilter",n),t.default=n},1847:function(e,t,r){"use strict";function a(){return function(e,t){t=t||30,t=parseInt(t,10);for(var r=0;r<t;r++)e.push(r);return e}}r.r(t),r(9597).Z.filter("range",a),t.default=a},2523:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e,t){var r=t;return{itemStatusLabels:{Sale:r.get("Label.Sale"),New:r.get("Label.New"),XboxExclusive:r.get("Label.Xbox"),AmazonExclusive:r.get("Label.Amazon"),GooglePlayExclusive:r.get("Label.GoogleOnly"),IosExclusive:r.get("Label.AppleOnly")}}}n.$inject=["$log","languageResource"],a.Z.factory("catalogLayoutService",n),t.default=n},9875:function(e,t,r){"use strict";r.r(t);var a=r(792),n=r(9597);function o(e,t,r,n,o,i){return{getMetadataFromApi:function(){return r.httpGet(o.endpoints.getMetadata)},getSearchOptions:function(){var e=o.endpoints.getSearchOptionsUrl;return r.httpGet(e)},getNavigationMenuItems:function(){return r.httpGet(o.endpoints.getNavigationMenuItems)},getSearchItems:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=o.numberOfSearchItems,i=o.numberOfSearchItemsForFullScreen,s=o.numberOfSearchItemsExpanded,c=t?i:n;a&&(c=s);var l={limit:c};return Object.assign(l,e),r.httpGet(o.endpoints.getSearchItems,l)},getCatalogItemDetails:function(e){var t=o.endpoints,a=o.priceStatus,n=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.push(e[s]);var c={items:n};return r.httpPost(t.getCatalogItemDetails,c).then((function(t){var r=t&&t.data?t.data:[];return r.forEach((function(t){var r=t.id;t.key=e[r].key,t.priceStatus===a.free&&(t.isFree=!0),i.mapItemRestrictionIcons(t),i.mapItemStatusIconsAndLabels(t),i.buildUserLink(t)})),r}))},getAvatarRequestSuggestion:function(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=t;null===s&&(s=o.englishLanguageCode);var c={prefix:e,limit:a,lang:s,q:n};return i?r.httpGet(o.endpoints.avatarRequestSuggestion,c):r.httpGet(o.endpoints.avatarRequestCdnSuggestion,c)},postGetTopics:function(e,t,a){var n=!(null==a||""===a),i={maxResult:o.topics.maxTopicsToRequest,items:n?[]:e,selectTopics:t,inputQuery:n?a:void 0};return r.httpPost(o.endpoints.postGetTopics,i)},getUserCurrency:function(){var e=o.endpoints.getUserCurrency,t=a.EnvironmentUrls.economyApi+a.Endpoints.generateAbsoluteUrl(e.url,{userId:a.CurrentUser.userId},!0);return e.url=t,r.httpGet(e)},postMarketplaceItemDetails:function(e){var t={itemIds:[e]};return r.httpPost(o.endpoints.postMarketplaceItemDetails,t)},getResellerData:function(e){var t={url:o.getResellerDataUrl(e),retryable:!0,withCredentials:!0};return r.httpGet(t)}}}o.$inject=["$log","$q","httpService","eventStreamService","catalogConstants","utilityService"],n.Z.factory("catalogService",o),t.default=o},7591:function(e,t,r){"use strict";r.r(t);r(4720);var a=r(792);r(6280);function n(){return{getABTestEnrollment:function(e,t,r){var n=a.ExperimentationService.getAllValuesForLayer(t);return n.then((function(){a.ExperimentationService.logLayerExposure(t)})),n}}}r(9597).Z.factory("experimentationService",n),t.default=n},575:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e,t,r,a,n){return{sendErrorsToLogCount:function(e,a){var n,o,i=e.errors,s=r.errorMessages.categoryName,c=[];i.forEach((function(e){var t=e.code,r=a+t;c.push({featureName:s,measureName:r,value:1})})),c.length>0&&(n=c,o=r.endpoints.performanceMeasurements,t.httpPost(o,n))},sendErrorsToGoogleAnalytics:function(e,t){var o=e.errors,i=r.errorMessages.categoryName,s=n.buildErrorMessages(o,a.getUserAgent());a.fireEvent(i,t,s)}}}n.$inject=["$log","httpService","catalogConstants","googleAnalyticsEventsService","utilityService"],a.Z.factory("metricsService",n),t.default=n},751:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e,t){return{getVngBuyRobuxPolicy:function(){return e.httpGet(t.endpoints.getVngBuyRobuxBehavior)}}}n.$inject=["httpService","catalogConstants"],a.Z.factory("universalAppConfigurationService",n),t.default=n},7820:function(e,t,r){"use strict";r.r(t);var a=r(792),n=r(4720),o=r(9597);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(n)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function c(e,t,r,o,s){function c(e){return encodeURIComponent(e).replace(/[!'()*]/g,escape)}return{isSplashPage:function(){var e=o.search(),r=t.queryNames,a=r.category,n=r.subcategory,i=r.keyword,s=r.catalogContext;return e&&!e[a]&&!e[n]&&!e[i]&&!e[s]},getQueriesValueIntoInt:function(){for(var e=o.search(),r=t.queryValueIsInt,a=0,n=Object.entries(e);a<n.length;a++){var s=i(n[a],2),c=s[0],l=s[1];r.indexOf(c.toLowerCase())>-1?e[c]=parseInt(l):e[c]=l}return e},buildNavigationMenu:function(e,t){var a=[];e.categoriesWithCreator&&e.categoriesWithCreator.forEach((function(e){a.push(e)}));var n={robloxUserId:e.robloxUserId,robloxUserName:e.robloxUserName,defaultCurrencyId:e.defaultCurrency,freeFilterId:e.freeFilter,customRobuxFilterId:e.customRobuxFilter,robuxFilterId:e.robuxFilter,allCategoriesId:e.allCategories,defaultCategoryId:e.defaultCategory,defaultCategoryIdForRecommendedSearch:e.defaultCategoryIdForRecommendedSearch,gearCategoryId:e.gearSubcategory,defaultGearSubcategoryId:r.defaultGearSubcategoryId,defaultSortTypeId:e.defaultSortType,defaultSortAggregationId:e.defaultSortAggregation,categoriesWithCreatorFilters:a,defaultCreatorId:e.defaultCreator};t.categoryEnumLibrary={};var o={};e.categories.forEach((function(e){if(e.typeId=e.categoryId,e.Data=e.typeId.toString(),e.Description=e.name,o[e.categoryId]={categoryEnum:e.category,subcategoryEnums:{}},e.subcategories){var t={};e.subcategories.forEach((function(e){e.typeId=e.subcategoryId,e.Data=e.typeId.toString(),e.Description=e.name,t[e.subcategoryId]=e.subcategory})),Object.assign(o[e.categoryId].subcategoryEnums,t)}})),Object.assign(t.categoryEnumLibrary,o),t.priceEnumLibrary={};var i={};null!==e.priceFilters&&e.priceFilters.forEach((function(e){e.typeId=e.currencyType.toString(),e.Data=e.typeId.toString(),e.Description=e.name,i[e.currencyType]={typeId:e.currencyType,name:e.name}})),Object.assign(t.priceEnumLibrary,i),e.creatorFilters.forEach((function(e){e.Data=e.userId.toString(),e.Description=e.name}));var s=e.sortMenu,c=s.sortOptions,l=s.sortAggregations;c.forEach((function(e){e.typeId=e.sortType,e.Data=e.typeId.toString(),e.Description=e.name})),l.forEach((function(e){e.typeId=e.sortAggregation,e.Data=e.typeId.toString(),e.Description=e.name})),t.salesTypeFilters=[];var u=[];e.salesTypeFilters.forEach((function(e){var t={};t.name=e.name.toString(),t.filter=e.filter,u.push(t)})),Object.assign(t.salesTypeFilters,u),Object.assign(t,n)},getCatalogContentKey:function(e){var t=e.id,r=e.itemType;return"".concat(r,"_").concat(t)},updateSearchItemDetails:function(r,o){r&&r.forEach((function(r){var i=r,s=r.key;i.detailsUrl=function(e){var r=e.itemType,n=e.id,o=(e.name,t.itemTypes);switch(r){case o.bundle:return a.Endpoints.getAbsoluteUrl?a.Endpoints.getAbsoluteUrl("/bundles/".concat(n,"/")):"".concat(a.EnvironmentUrls.websiteUrl,"/bundles/").concat(n,"/");case o.asset:default:return a.Endpoints.getAbsoluteUrl?a.Endpoints.getAbsoluteUrl("/catalog/".concat(n,"/")):"".concat(a.EnvironmentUrls.websiteUrl,"/catalog/").concat(n,"/")}}(r),i.nameForDisplay=function(r){var o=t.userTypes,i=t.robloxSystemUserId,s=r.creatorName,c=r.creatorType,l=r.creatorTargetId;return o.user===c&&i!==l&&a.DisplayNames.Enabled()?n.concatTexts.concat(["",e("escapeHtml")(s)]):e("escapeHtml")(s)}(r),i.detailsLoaded=!0,Object.assign(o[s],i)}))},updateSearchItemThumbnails:function(e,t){e&&e.forEach((function(e){var r=e.key,a={thumbnail:e};Object.assign(t[r],a)}))},formatQueries:function(e){var t={},a=r.mappingToApiParameters;for(var n in e){var o=e[n],i=a[n.toLowerCase()];i&&(t[i]=o)}return t},mapItemRestrictionIcons:function(e){if(e&&e.itemRestrictions){var r=t.itemTypes,a=t.itemRestrictionTypes,n=t.itemRestrictionIcons;e.itemType===r.bundle?(e.isLimited=e.itemRestrictions.indexOf(a.limited)>-1,e.isCollectible=e.itemRestrictions.indexOf(a.collectible)>-1,e.isRthro=e.itemRestrictions.indexOf(a.rthro)>-1,e.isDynamicHead=e.itemRestrictions.indexOf(a.dynamicHead)>-1,e.isLimited?e.itemRestrictionIcon=e.isRthro?n.rthroLimitedLabel:n.rthroLabel:e.isDynamicHead?e.itemRestrictionIcon=n.dynamicHead:e.isCollectible&&(e.itemRestrictionIcon=n.collectible)):(e.isThirteenPlus=e.itemRestrictions.indexOf(a.thirteenPlus)>-1,e.isLimitedUnique=e.itemRestrictions.indexOf(a.limitedUnique)>-1,e.isLimited=e.itemRestrictions.indexOf(a.limited)>-1,e.isCollectible=e.itemRestrictions.indexOf(a.collectible)>-1,e.isDynamicHead=e.itemRestrictions.indexOf(a.dynamicHead)>-1,e.isLimitedUnique?e.itemRestrictionIcon=e.isThirteenPlus?n.thirteenPlusLimitedUnique:n.limitedUnique:e.isLimited?e.itemRestrictionIcon=e.isThirteenPlus?n.thirteenPlusLimited:n.limited:e.isThirteenPlus?e.itemRestrictionIcon=n.thirteenPlus:e.isDynamicHead?e.itemRestrictionIcon=n.dynamicHead:e.isCollectible&&(e.itemRestrictionIcon=n.collectible))}},mapItemStatusIconsAndLabels:function(e){if(e&&e.itemStatus){var r=t.itemStatusClasses,a=t.itemStatusHasIcons,n=t.itemStatusIcons,o=s.itemStatusLabels;e.itemStatusIconsAndLabels=[],e.itemStatus.forEach((function(t){a.indexOf(t)>-1?e.itemStatusIconsAndLabels.push({isIcon:!0,type:n[t]}):e.itemStatusIconsAndLabels.push({class:r[t],label:o[t]})}))}},translateToEnumStrings:function(e,t){var r=e.categoryEnumLibrary,a=t.category,n=t.subcategory,o=t.gears;if(r&&r[a]){var i=r[a],s=i.categoryEnum,c=i.subcategoryEnums,l={category:s,subcategory:o?c[o]:c[n]};Object.assign(t,l)}},buildUserLink:function(e){var r=e||{},n=r.creatorType,o=r.creatorTargetId,i=t.userTypes;switch(n){case i.group:e.creatorLink=a.Endpoints.getAbsoluteUrl("/groups/".concat(o));break;case i.user:default:e.creatorLink=a.Endpoints.getAbsoluteUrl("/users/".concat(o,"/profile"))}},buildUserShopLink:function(e){var r=e||{},n=r.creatorType,o=r.creatorName,i=t.userTypes;switch(n){case i.group:e.creatorLink=a.Endpoints.getAbsoluteUrl("/catalog/?Category=1&CreatorName=".concat(c(o),"&CreatorType=Group"));break;case i.user:default:e.creatorLink=a.Endpoints.getAbsoluteUrl("/catalog/?Category=1&CreatorName=".concat(c(o)))}},buildErrorMessages:function(e,t){var r="userId-".concat(a.CurrentUser.userId);return e&&e.length>0&&e.forEach((function(e){var t=e.code,a=e.message;r+="-code-".concat(t,"-message-").concat(a)})),r+="-userAgent-".concat(t)}}}c.$inject=["$filter","catalogConstants","menuConstants","$location","catalogLayoutService"],o.Z.factory("utilityService",c),t.default=c},5051:function(e,t,r){"use strict";r.r(t);var a=r(9597);function n(e,t){return{getVngShopSignedUrl:function(){return e.httpGet(t.endpoints.getSignedVngShopUrl)}}}n.$inject=["httpService","catalogConstants"],a.Z.factory("vngPaymentsService",n),t.default=n},2779:function(e,t){var r;!function(){"use strict";var a={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)){if(r.length){var i=n.apply(null,r);i&&e.push(i)}}else if("object"===o){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var s in r)a.call(r,s)&&r[s]&&e.push(s)}}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(r=function(){return n}.apply(t,[]))||(e.exports=r)}()},8935:function(e){e.exports='<div class="breadcrumbs" ng-controller="breadcrumbsController"> <ul class="breadcrumb-container"> <li ng-click="clearSubcategory()"> <a class="text-link breadcrumb-link">{{ currentQuery.category.name }}</a> </li> <li ng-show="isNonDefaultSubcategorySelected()" ng-click="clearKeywordAndCreator()"> <span class="icon-right-16x16"></span> <a class="text-link breadcrumb-link">{{ currentQuery.subcategory.name }}</a> </li> <li ng-show="showPriceBreadcrumb() || showCreatorBreadcrumb()"> <span class="icon-right-16x16"></span> </li> <li class="breadcrumb-filter" ng-show="showCreatorBreadcrumb()" ng-click="clearPrice()"> <span class="breadcrumb-filter-name"> <span class="breadcrumb-group-label" ng-show="data.isCreatorAGroup" ng-bind="\'Label.BreadCrumb.Group\' | translate"></span>{{ data.creatorBreadcrumb }} </span> </li> <li class="breadcrumb-filter" ng-show="showPriceBreadcrumb()" ng-click="clearKeyword()"> <span class="breadcrumb-filter-name" ng-show="showFreeBreadcrumb()" ng-bind="\'Label.BreadCrumb.Free\' | translate"></span> <span class="breadcrumb-filter-name" ng-show="showCustomPriceBreadcrumb()"> <span ng-show="data.minPriceBreadcrumb && !data.maxPriceBreadcrumb"> <span class="icon-robux-gray-16x16"></span> <span ng-bind="\'Label.BreadCrumb.PriceAbove\' | translate:{price: data.minPriceBreadcrumb}"></span> </span> <span ng-show="data.maxPriceBreadcrumb && data.minPriceBreadcrumb"> <span class="icon-robux-gray-16x16"></span> {{data.minPriceBreadcrumb}} - <span class="icon-robux-gray-16x16"></span> {{data.maxPriceBreadcrumb}} </span> <span ng-show="data.maxPriceBreadcrumb && !data.minPriceBreadcrumb"> <span class="icon-robux-gray-16x16"></span> <span ng-bind="\'Label.BreadCrumb.PriceBelow\' | translate:{price: data.maxPriceBreadcrumb}"></span> </span> </span> </li> <li ng-show="searchLayout.keywordForDisplay && searchLayout.keywordForDisplay.length > 0"> <span class="icon-right-16x16"></span> <a class="text-link breadcrumb-link">{{ searchLayout.keywordForDisplay }}</a> </li> </ul> </div>'},3461:function(e){e.exports='<ng-container ng-if="!useReactCatalog"> <div class="alert-system-feedback"> <div class="alert alert-warning" ng-class="{\'on\': layout.showError}"> <span class="alert-content" ng-bind="\'Response.Error.Filter\' | translate"></span> <span ng-click="closeWarning()" class="icon-close-white"></span> </div> </div> <div id="angular-react-purchase-handoff" data-identifier="direct-purchase"></div> <div id="catalog-content" class="clearfix catalog-content sticky shopping-cart" ng-controller="catalogContentController" ng-class="{\'splash\': library.isSplashPage && !library.isFullScreen, \'catalog-full-screen\': library.isFullScreen }"> <div class="search-bars search-bar-placement-right" ng-hide="layout.hideMainView"> <h1 ng-if="isInitializedPage()" class="heading"> <a href="{{library.catalogUrl}}" target="_self" ng-bind="\'Heading.Marketplace\' | translate"></a> </h1> <a ng-if="isInitializedPage()" ng-click="buyRobuxButtonOnClickEvt()" class="btn-growth-md buy-robux" href="{{ library.buyRobuxUrl }}" target="_self" ng-bind="\'Action.BuyRobux\' | translate"> </a> <div mobile-search-bar></div> <div ng-if="library.initialized && !library.isPhone" class="clearfix"> <div search-bar></div> </div> </div> <div id="main-view" ng-hide="layout.hideMainView"> <div items-container></div> </div> <div search-options ng-if="library.initialized && !library.isPhone && layout.isNavigationMenuLoaded" id="search-options-scrollbar-container" class="rbx-scrollbar search-options-scrollbar-container search-options" ng-hide="layout.hideMainView"></div> <div shimmer-menu class="search-options" ng-if="library.initialized && !library.isPhone && !layout.isNavigationMenuLoaded" ng-hide="layout.hideMainView"></div> <div mobile-search-options></div> </div> </ng-container> <div ng-if="useReactCatalog" id="catalog-react-container"></div>'},4515:function(e){e.exports='<ul ng-if="data.creators"> <li ng-repeat="creator in data.creators" class="radio top-border font-caption-body" ng-hide="creator.userId === library.robloxUserId && isUGCOnly()"> <input type="radio" name="radio-creator" id="radio-creator-{{ creator.userId }}" ng-model="data.creator" ng-value="creator" ng-change="filterChanged()"/> <label for="radio-creator-{{ creator.userId }}" ng-if="creator.userId < 2">{{ creator.name }}</label> <label for="radio-creator-custom" class="has-input" ng-if="(creator.userId >= 2 || creator.userId === layout.customText)" ng-class="{\'form-has-error\': forms.searchOptionsForm.creatorName.$error.required}"> <input class="form-control input-field username-input font-caption-body" type="text" name="creatorName" placeholder="{{ \'Label.Username\' | translate }}" maxlength="20" ng-model="data.creatorName" ng-focus="data.creator = creator" ng-keydown="onCreatorFilterKeydown($event)" ng-required="library.isPhone && data.creator === creator"/> <button class="btn-secondary-xs btn-update-filter" ng-disabled="!data.creatorName || data.creatorName.length === 0" ng-click="applySearch()" ng-bind="\'Action.Go\' | translate"></button> </label> </li> </ul>'},4209:function(e){e.exports='<a href="{{item.detailsUrl}}" target="_self" class="item-card-container" ng-class="{ \'item-card-container-direct-purchase\': directPurchaseEnabled }" ng-click="clickItemCard($event)" title="{{item.name}}" ng-mouseenter="onItemCardHover(item)" ng-mouseleave="onItemCardHoverExit(item)"> <div ng-if="item.itemStatusIconsAndLabels.length > 0" class="asset-status-icon"> <div ng-repeat="itemStatus in item.itemStatusIconsAndLabels" ng-class="[{\'has-icon\' : itemStatus.isIcon}, itemStatus.class]"> <span ng-if="itemStatus.isIcon" ng-class="[itemStatus.type]"></span> <span ng-if="itemStatus.label"> {{itemStatus.label}} </span> </div> </div> <div class="item-card-link"> <div class="item-card-thumb-container"> <thumbnail-2d class="item-card-thumb" thumbnail-type="item.thumbnailType" thumbnail-target-id="item.id" alt-name="item.name"> </thumbnail-2d> <span ng-show="item.itemRestrictionIcon" ng-class="item.itemRestrictionIcon"> </span> <div ng-if="!directPurchaseEnabled" class="add-to-cart-btn-container" data-item-in-cart="{{isItemInCart(item)}}"> <button class="btn-primary-md add-to-cart" ng-click="addToCart($event, item)" ng-hide="isItemInCart(item)">Add to Cart</button> <button class="btn-secondary-md remove-from-cart" ng-click="removeFromCart($event, item)" ng-hide="!isItemInCart(item)">Remove from Cart</button> </div> </div> </div> <div ng-if="directPurchaseEnabled" class="add-to-cart-btn-container direct-buy-btn-container" data-item-in-cart="{{isItemInCart(item)}}"> <button class="btn-primary-md hover-button add-to-cart" ng-click="addToCart($event, item)" ng-hide="isItemInCart(item)"> <div class="direct-purchase-cart-button-container"> <span class="add-shopping-cart-icon"></span> <span class="add-text-cart-tile" ng-bind="\'Action.Add\' | translate"></span> </div> </button> <button class="btn-secondary-md hover-button remove-from-cart" ng-click="removeFromCart($event, item)" ng-hide="!isItemInCart(item)"> <div class="direct-purchase-cart-button-container"> <span class="remove-shopping-cart-icon"></span> <span class="remove-text-cart-tile" ng-bind="\'Action.Remove\' | translate"></span> </div> </button> <button class="btn-growth-md hover-button try-on-button" ng-show="itemLoading(item) && itemAvailableToPurchase(item)" ng-click="purchaseItem($event, item)"> <div class="direct-purchase-button-container"> <span class="icon-robux-white-16x16"></span> <span class="text-robux-tile" ng-if="lowestAvailablePrice || lowestAvailablePrice >= 0" ng-bind="lowestAvailablePrice | number"></span> </div> </button> <button class="btn-growth-md hover-button try-on-button" ng-show="itemLoading(item) && !itemAvailableToPurchase(item)" ng-disabled="!itemAvailableToPurchase(item)" ng-bind="\'Message.Unavailable\' | translate"> </button> <button class="btn-growth-md hover-button try-on-button" ng-show="!itemLoading(item)"> <span class="try-on-text spinner spinner-sm"></span> </button> </div> <div class="item-card-caption" ng-if="layout.isItemDetailsLoaded || (item.detailsLoaded && isInfiniteScrollWebEnabled())"> <div class="item-card-name-link"> <div class="item-card-name" title="{{ item.name }}"><span class="icon-premium-small" ng-if="shouldShowPremiumIcon()"></span> {{item.name}}</div> </div> <div ng-if="hasSecondaryInfo()" ng-class="{\'margin-top-none\' : !hasSecondaryInfo()}" class="item-card-secondary-info text-secondary"> <div ng-if="item.unitsAvailableForConsumption && false" class="text-overflow item-card-label"> <span ng-bind="\'Label.Card.Remaining\' | translate"></span> <span ng-bind="item.unitsAvailableForConsumption | number"></span> </div> <div ng-if="isCreatorNameShown()"> <div class="creator-name-container"> <div class="text-overflow item-card-label"> <span ng-bind-html="\'Label.ByCreatorLink\'| translate:{\r\n                            linkStart: \'<a target=_self class=\\\'creator-name text-link\\\' href=\\\'\' + item.creatorLink + \'\\\'>\', linkEnd: \'</a>\', creator: item.nameForDisplay }"> </span> <span class="mobile-creator-name">{{ item.nameForDisplay }}</span> </div> <span ng-if="showVerifiedBadge(item)" class="verified-badge-icon-catalog-item" data-size="Title" data-overrideimgclass="verified-badge-icon-catalog-item-rendered"> </span> </div> </div> <div ng-if="getDisplayPrice() && item.lowestPrice && false" class="text-overflow item-card-label"> <span ng-bind="\'Label.Card.PriceWas\' | translate"></span> <span class="icon-robux-gray-16x16"></span> <span class="strike-through" ng-bind="getDisplayPrice() | number"></span> </div> </div> <div class="text-overflow item-card-price font-header-2 text-subheader" ng-class="{\'margin-top-none\' : hasSecondaryInfo()}" ng-if="item.priceStatus"> <span class="text text-label" ng-class="{\'text-robux-tile\': item.isFree}"> {{item.priceStatus}} </span> </div> <div class="text-overflow item-card-price font-header-2 text-subheader" ng-class="{\'margin-top-none\' : hasSecondaryInfo()}" ng-if="!item.priceStatus"> <span class="icon icon-robux-16x16" ng-if="getDisplayPrice() || item.lowestPrice"></span> <span class="text-robux-tile" ng-if="getDisplayPrice() && !item.lowestPrice" ng-bind="getDisplayPrice() | number"></span> <span class="text-robux-tile" ng-if="item.lowestPrice" ng-bind="item.lowestPrice | number"></span> </div> </div> <ul class="item-card-caption-progressive-loading shimmer-lines" ng-if="!layout.isItemDetailsLoaded && (!item.detailsLoaded || !isInfiniteScrollWebEnabled())"> <li class="placeholder shimmer-line"></li> <li class="placeholder shimmer-line"></li> <li class="placeholder shimmer-line"></li> </ul> </a> '},3771:function(e,t,r){e.exports='<div class="catalog-results" ng-controller="itemsContainerController"> <h2 class="featured-items-heading" ng-if="!layout.isNavigationMenuLoaded"> <span class="shimmer-lines"> <span class="placeholder shimmer-line"></span> </span> </h2> <div id="sponsored-catalog-items" data-placement-location="AvatarShop" ng-if="isCurrentCategoryRecommended() && isCatalogAdsRowOnRecommendedPageEnabled && avatarShopPlacement == \'top\'"></div> <h2 ng-show="shouldShowHeading()" class="featured-items-heading"> <span class="line-height" ng-bind-html="showRecommendedHeading() ? (\'Label.RecommendedItemsForYou\' | translate ) : (\'Label.FeaturedItemsOnRoblox\' | translate:{spanStart: \'<span class=text-roblox>\', spanEnd: \'</span>\', roblox: \'Roblox\'})"> </span> </h2> <div ng-if="isBreadcrumbsAvailable()" ng-show="!shouldShowHeading()"> <div catalog-breadcrumbs></div> </div> <div class="topic-container" ng-if="topicBasedBrowsingEnabled && topicBasedBrowsingDisplayEnabled && topicBasedBrowsingEnabledForCategory"> <span id="topic-navigation-left" class="topic-navigation-left topic-navigation-blur-left" ng-show="topicCarouselWidth > 0 && showTopicNavigationButton(true)"> <button class="topic-navigation-button" ng-click="onTopicNavigationButtonClicked(true)"> <span class="icon-left-gray"> </button> </span> <span id="topic-navigation-clear" ng-show="showTopicNavigationClearButton()" class="topic-navigation-left"> <button class="topic-navigation-button" ng-click="onTopicClearButtonClicked()"> <span class="icon-actions-clear-sm"> </button> </span> <span class="topic-carousel" id="topic-carousel"> <span ng-repeat="topic in selectedTopics" class="topic selected-topic" ng-click="onTopicClicked(topic)"> {{formatTopic(topic.displayName)}} <span class="icon-close"></span> </span> <span ng-repeat="topic in topics" class="topic unselected-topic" ng-click="onTopicClicked(topic)"> {{formatTopic(topic.displayName)}}</span> </span> <span class="topic-carousel-placeholder" ng-if="(!selectedTopics && !topics) || (selectedTopics.length === 0 && topics.length === 0)"> </span> <span id="topic-navigation-right" class="topic-navigation-right topic-navigation-blur-right" ng-show="topicCarouselWidth > 0 && showTopicNavigationButton(false)"> <button class="topic-navigation-button" ng-click="onTopicNavigationButtonClicked(false)"> <span class="icon-right-gray"> </button> </span> </div> <div ng-if="topUp.featureEnabled && topUp.showTopUp && \r\n        topUp.currentUserBalance > topUp.robuxMinThreshold && \r\n        topUp.currentUserBalance <= topUp.robuxMaxThreshold &&\r\n        topUp.displayCategories.includes(data.query.Category) &&\r\n        data.query.Keyword === undefined && data.query.topics === undefined" class="top-up-container"> <div class="robux" ng-if="!topUp.giftCard"> <div class="top-up-background"></div> <div class="top-up-robux"></div> <img src="'+r(990)+'" class="top-up-chest"> <div class="top-up-body"> <h1 class="top-up-header" ng-bind="topUp.headerText | translate"> </h1> <div class="top-up-message" ng-bind="topUp.messageText | translate"> </div> <a class="top-up-button btn-cta-md" ng-bind="topUp.buttonText | translate" target="_self" href="{{ topUp.buttonUrl }}"> </a> </div> <a class="top-up-click-background" target="_self" href="{{ topUp.buttonUrl }}"></a> <a class="top-up-close-background" ng-click="onTopUpClear()"></a> <a class="top-up-close icon-close" ng-click="onTopUpClear()"></a> </div> <div class="gift-card" ng-if="topUp.giftCard"> <div class="top-up-background"></div> <img src="'+r(7723)+'" class="top-up-gift-card-back"> <img src="'+r(9127)+'" class="top-up-gift-card-front"> <div class="top-up-body"> <h1 class="top-up-header" ng-bind="topUp.headerText | translate"> </h1> <div class="top-up-message" ng-bind="topUp.messageText | translate"> </div> <a class="top-up-button btn-cta-md" ng-bind="topUp.buttonText | translate" target="_self" href="{{ topUp.buttonUrl }}"> </a> </div> <a class="top-up-click-background" target="_self" href="{{ topUp.buttonUrl }}"></a> <a class="top-up-close-background" ng-click="onTopUpClear()"></a> <a class="top-up-close icon-close" ng-click="onTopUpClear()"></a> </div> </div> <div id="results" class="results-container"> <div class="section-content-off" ng-if="!isLayeredClothingCategory" ng-show="layout.showNoResultsMessage && layout.isSearchItemsLoaded" ng-bind="\'Response.NoItemsFound\' | translate"> </div> <div class="section-content-off" ng-if="isLayeredClothingCategory" ng-show="layout.showNoResultsMessage && layout.isSearchItemsLoaded" ng-bind="\'Label.ComingSoon\' | translate"> </div> <div class="section-content-off" ng-show="layout.showErrorMessage && layout.isSearchItemsLoaded" ng-bind="\'Response.TemporarilyUnavailable\' | translate"> </div> <ul class="hlist item-cards-stackable" ng-if="isInfiniteScrollEnabled()" infinite-scroll="fetchNextFromInfiniteScroll()"> <li class="list-item item-card" item-card ng-repeat="item in searchResultDict | orderList: searchResultList | limitTo: !isInfiniteScrollWebEnabled()? getNumberItemToDisplay(): Infinity" ng-controller="itemCardController"> </li> </ul> <ul class="hlist item-cards-stackable" ng-if="isRegularItemsResultAvailable() && (!isInfiniteScrollEnabled() || !isInfiniteScrollWebEnabled())" ng-class="{\'faded\' : layout.loading}"> <li class="list-item item-card" item-card ng-repeat="item in searchResultDict | orderList: searchResultList | limitTo: getNumberItemToDisplay()" ng-controller="itemCardController"> </li> </ul> <div class="spinner spinner-sm" ng-if="layout.initialized" ng-show="layout.loading && (!isInfiniteScrollEnabled() || !isInfiniteScrollWebEnabled())"> </div> <div shimmer-container ng-if="!layout.initialized && !layout.isSearchItemsLoaded "></div> </div> <div ng-if="topUp.featureEnabled && topUp.showTopUp && \r\n            (topUp.currentUserBalance <= topUp.robuxMinThreshold || \r\n            topUp.currentUserBalance > topUp.robuxMaxThreshold) &&\r\n            topUp.displayCategories.includes(data.query.Category) &&\r\n            data.query.Keyword === undefined && data.query.topics === undefined" class="top-up-container"> <div class="robux" ng-if="!topUp.giftCard"> <div class="top-up-background"></div> <div class="top-up-robux"></div> <img src="'+r(990)+'" class="top-up-chest"> <div class="top-up-body"> <h1 class="top-up-header" ng-bind="topUp.headerText | translate"> </h1> <div class="top-up-message" ng-bind="topUp.messageText | translate"> </div> <a class="top-up-button btn-cta-md" ng-bind="topUp.buttonText | translate" target="_self" href="{{ topUp.buttonUrl }}"> </a> </div> <a class="top-up-click-background" target="_self" href="{{ topUp.buttonUrl }}"></a> <a class="top-up-close-background" ng-click="onTopUpClear()"></a> <a class="top-up-close icon-close" ng-click="onTopUpClear()"></a> </div> <div class="gift-card" ng-if="topUp.giftCard"> <div class="top-up-background"></div> <img src="'+r(7723)+'" class="top-up-gift-card-back"> <img src="'+r(9127)+'" class="top-up-gift-card-front"> <div class="top-up-body"> <h1 class="top-up-header" ng-bind="topUp.headerText | translate"> </h1> <div class="top-up-message" ng-bind="topUp.messageText | translate"> </div> <a class="top-up-button btn-cta-md" ng-bind="topUp.buttonText | translate" target="_self" href="{{ topUp.buttonUrl }}"> </a> </div> <a class="top-up-click-background" target="_self" href="{{ topUp.buttonUrl }}"></a> <a class="top-up-close-background" ng-click="onTopUpClear()"></a> <a class="top-up-close icon-close" ng-click="onTopUpClear()"></a> </div> </div> <button ng-if="showViewAllFeaturedItemsButton()" ng-click="getAllFeaturedItems()" class="btn-control-md btn-full-width view-all" ng-bind="getTranslationKeyForViewFeaturedButton() | translate"></button> <div class="pager-holder" cursor-pagination="pager" ng-show="paginations.isEnabled" ng-if="!isInfiniteScrollEnabled()"></div> <div class="spinner spinner-default spinner-infinite-scroll" ng-show="layout.loading && isInfiniteScrollEnabled()" ng-if="isInfiniteScrollWebEnabled()"></div> <button class="scroll-to-top icon-back-to-top" ng-click="returnToTop()" ng-show="!layout.loading && isInfiniteScrollEnabled() && !showViewAllFeaturedItemsButton() && showReturnToTop()"> </div> <div id="sponsored-catalog-items" data-placement-location="AvatarShop" ng-if="isCurrentCategoryRecommended() && isCatalogAdsRowOnRecommendedPageEnabled && avatarShopPlacement == \'bottom\'"></div> '},4507:function(e){e.exports='<div class="mobile-search-container" stick-to-top is-element-at-top="layout.isSearchBarFixed" ng-class="{\'stick-to-top\': library.isPhone && layout.isSearchBarFixed}"> <div class="search-bar"> <button id="search-options-button" type="button" class="btn-generic-menu-black-md mobile-menu-button" ng-click="toggleSearchOptions(true)"> <span class="icon-menu-black"></span> </button> <form name="forms.keywordForm" class="form-horizontal search-form"> <div class="form-group"> <div class="input-group"> <input class="form-control input-field" placeholder="{{ \'Label.SearchField\' | translate }}" type="text" maxlength="50" ng-keypress="onKeywordKeypress($event)" ng-model="searchLayout.keyword"/> <div class="input-group-btn"> <button class="input-addon-btn" type="submit" ng-click="searchKeyword()"> <span class="icon-search"></span> </button> </div> </div> </div> </form> </div> </div>'},6003:function(e){e.exports='<div id="mobile-search-options" class="mobile-panel mobile-search-options" ng-show="layout.isSearchOptionsOpen"> <form name="forms.searchOptionsForm" class="search-options-form" role="form" novalidate> <div class="section-content-off" ng-if="layout.hasSearchOptionsError" ng-bind="\'Response.GenericError\' | translate"> </div> <div class="rbx-tabs-horizontal" ng-if="!layout.hasSearchOptionsError"> <ul id="horizontal-tabs" class="nav nav-tabs" role="tablist"> <li class="rbx-tab active"> <a class="rbx-tab-heading" data-toggle="tab" data-target="#category-tab"> <span class="font-header-1" ng-bind="\'Label.Filter.Category\' | translate"></span> </a> </li> <li class="rbx-tab" ng-class="{ \'disabled\' : isCurrentCategoryRecommended() }"> <a ng-show="!isCurrentCategoryRecommended()" class="rbx-tab-heading" data-toggle="tab" data-target="#filter-tab"> <span class="font-header-1" ng-bind="\'Label.Filter.Filter\' | translate"></span> </a> <a ng-show="isCurrentCategoryRecommended()" class="rbx-tab-heading"> <span class="font-header-1" ng-bind="\'Label.Filter.Filter\' | translate"></span> </a> </li> <li class="rbx-tab" ng-class="{ \'disabled\' : isCurrentCategoryRecommended() }"> <a ng-show="!isCurrentCategoryRecommended()" class="rbx-tab-heading" data-toggle="tab" data-target="#sorting-tab"> <span class="font-header-1" ng-bind="\'Label.Filter.Sorting\' | translate"></span> </a> <a ng-show="isCurrentCategoryRecommended()" class="rbx-tab-heading"> <span class="font-header-1" ng-bind="\'Label.Filter.Sorting\' | translate"></span> </a> </li> </ul> <div class="tab-content rbx-tab-content"> <div id="category-tab" class="section-content tab-pane active"> <ul id="category-panel-group" class="panel-group"> <li ng-repeat="category in navigationMenu.categories" class="panel panel-default"> <a data-target="#mobile-category-{{ category.categoryId }}" class="panel-heading" ng-class="{\'font-bold\' : category.categoryId === currentQuery.category.categoryId}" ng-click="mobileCategoryClick(category)" data-toggle="collapse" data-parent="#category-panel-group" role="tab"> <span ng-show="category.categoryId === currentQuery.category.categoryId" class="icon-checkmark-blue selected-icon"></span> {{ category.name }} <span ng-show="category.categoryId === currentQuery.category.categoryId && currentQuery.subcategory.length > 0">({{currentQuery.subcategory.shortName\r\n                                    || currentQuery.subcategory.name}})</span> <span ng-if="category.subcategories.length > 0" class="icon-down-16x16 arrow-icon"></span> </a> <div id="mobile-category-{{ category.categoryId }}" class="panel-collapse collapse" accordion-menu data-toggle="collapsible-element" role="tabpanel"> <ul ng-if="category.subcategories"> <li ng-repeat="subcategory in category.subcategories" class="radio top-border"> <input type="radio" name="radio-category" id="mobile-radio-cat-{{ category.categoryId }}-{{ subcategory.subcategoryId }}" ng-model="currentQuery.subcategory" ng-value="subcategory" ng-click="mobileCategoryClick(category, true)"/> <label for="mobile-radio-cat-{{ category.categoryId }}-{{ subcategory.subcategoryId }}">{{\r\n                                            subcategory.name }}</label> </li> </ul> </div> </li> </ul> </div> <div id="filter-tab" class="tab-pane"> <h4 ng-if="data.currencyTypes" class="font-header-2" ng-bind="\'Label.Filter.Price\' | translate"> </h4> <div ng-if="data.currencyTypes" class="section-content"> <div price-filters></div> </div> <div ng-if="data.salesTypeFilters && data.salesTypeFilters.length > 0" class="filter-label font-header-2" ng-bind="\'Label.Filter.SalesType\' | translate"> </div> <div ng-if="data.salesTypeFilters && data.salesTypeFilters.length > 0" sales-type-filter></div> <div ng-if="data.sortMenus.sortOptions && data.sortMenus.sortOptions.length > 0" class="filter-label font-header-2" ng-bind="\'Label.Filter.Sorts\' | translate"> </div> <div ng-if="data.sortMenus.sortOptions && data.sortMenus.sortOptions.length > 0" sort-filter></div> <div ng-if="data.creators" class="font-header-2" ng-bind="\'Label.Filter.Creator\' | translate"></div> <div ng-if="data.creators" class="section-content"> <div creator-filters></div> </div> <div ng-if="showUnavailableFilter()" class="font-header-2" ng-bind="\'Label.Filter.UnavailableItems\' | translate"></div> <div ng-if="showUnavailableFilter()" class="section-content"> <div show-unavailable-filter></div> </div> </div> <div id="sorting-tab" class="tab-pane"> <div class="section-content"> <ul> <li ng-repeat="sort in navigationMenu.sortMenus.sortOptions" ng-hide="sort.isPriceRelated && data.currencyType && data.currencyType.excludePriceSorts" class="radio top-border"> <input type="radio" name="radio-sort" id="radio-sort-{{ sort.sortType }}" ng-model="data.sortType" ng-value="sort"/> <label for="radio-sort-{{ sort.sortType }}">{{ sort.name }}</label> </li> </ul> </div> <div ng-show="data.sortType.hasSubMenu"> <div class="text-label" ng-bind="\'Label.Filter.ByTime\' | translate"></div> <div class="section-content"> <ul> <li ng-repeat="sort in navigationMenu.sortMenus.sortAggregations" class="radio top-border"> <input type="radio" name="radio-sub-sort" id="radio-sub-sort-{{ sort.sortAggregation }}" ng-model="data.sortAggregation" ng-value="sort"/> <label for="radio-sub-sort-{{ sort.sortAggregation }}">{{ sort.name }}</label> </li> </ul> </div> </div> </div> </div> </div> <div class="button-container"> <button id="cancel-button" class="btn-control-lg" ng-click="toggleSearchOptions(false)" ng-bind="\'Action.Filter.Cancel\' | translate"></button> <button class="btn-primary-lg apply-button" ng-if="!layout.hasSearchOptionsError" ng-click="applyMobileSearch()" ng-bind="\'Action.Filter.Apply\' | translate"></button> </div> </form> </div>'},6904:function(e){e.exports='<ul ng-if="data.currencyTypes"> <li ng-repeat="currencyType in data.currencyTypes" class="radio top-border font-caption-body" ng-show="showCurrencyType(currencyType)"> <input type="radio" name="radio-price" id="radio-price-{{ currencyType.currencyType }}" ng-model="data.currencyType" ng-value="currencyType" ng-change="filterChanged()"/> <label ng-if="currencyType.currencyType !== library.robuxFilterId && currencyType.currencyType !== library.customRobuxFilterId" for="radio-price-{{ currencyType.currencyType }}"> {{ currencyType.name }} </label> <label for="radio-price-{{ currencyType.currencyType }}" class="has-input" ng-if="(currencyType.currencyType === library.robuxFilterId || currencyType.currencyType === library.customRobuxFilterId)"> <input class="form-control input-field input-number price-input font-caption-body" type="number" pattern="[0-9]*" min="0" name="minPrice" placeholder="{{ \'Label.Filter.PriceMin\' | translate }}" ng-model="data.minPrice" ng-keydown="onPriceFilterKeydown($event)" ng-focus="data.currencyType = currencyType"/> <input class="form-control input-field input-number price-input font-caption-body" type="number" pattern="[0-9]*" min="0" name="maxPrice" placeholder="{{ \'Label.Filter.PriceMax\' | translate }}" ng-model="data.maxPrice" ng-keydown="onPriceFilterKeydown($event)" ng-focus="data.currencyType = currencyType"/> <button class="btn-secondary-xs btn-update-filter" ng-disabled="data.currencyType.currencyType !== library.robuxFilterId && data.currencyType.currencyType !== library.customRobuxFilterId" ng-click="applySearch(true)" ng-bind="\'Action.Go\' | translate"></button> </label> </li> </ul>'},4526:function(e){e.exports='<ul> <li ng-repeat="salesType in data.salesTypeFilters" class="radio top-border font-caption-body"> <input type="radio" name="radio-sales-type" id="radio-sales-type-{{ salesType.filter }}" ng-value="salesType" ng-model="data.salesTypeFilter" ng-change="filterChanged()"/> <label for="radio-sales-type-{{ salesType.filter }}"> {{ salesType.name }} </label> </li> </ul> '},4801:function(e){e.exports='<div class="search-container search-container-original search-container-no-categories"> <div class="input-group"> <div id="search-bar-container" click-outside="onClickOutsideAutocomplete()"> <input id="avatar-shop-keyword-input" class="form-control input-field search-input input-rounded" placeholder="{{ \'Label.SearchField\' | translate }}" maxlength="50" ng-keypress="onKeywordKeypress($event, true)" ng-keydown="onKeywordKeydown($event)" ng-model="searchLayout.keyword" ng-change="keywordChanged()" ng-click="onKeywordInputClicked($event)" autocomplete="off" autocorrect="off" spellcheck="false" name="searchField" type="text"/> <span id="navbar-search-clear-btn" tabIndex="{0}" role="button" aria-label="Clear Search" class="clear-search icon-actions-clear-sm" ng-if="searchLayout.keyword.length > 0" ng-click="onKeywordClear($event)"> </span> <div class="autocomplete-dropdown-menu" ng-class="{\'open\': searchLayout.keyword.length > 0 && autocompleteSuggestions.show}"> <ul id="autocomplete-list" class="dropdown-menu" role="menu" data-toggle="dropdown-menu"> <li id="autocomplete-suggestion-li-{{$index}}" ng-repeat="suggestion in autocompleteSuggestions.suggestions"> <a id="autocomplete-suggestion-{{$index}}" ng-click="onAutocompleteSuggestionClicked(suggestion.Query, $index)"> <span class="icon navbar-list-option-icon icon-search"> </span> <span> {{suggestion.Query}} </span> </a> </li> </ul> </div> </div> <div class="input-group-btn-category input-group-btn"> <button ng-if="!layout.hasSearchOptionsError" type="button" data-toggle="dropdown" class="input-dropdown-btn category-options" ng-disabled="disabled" aria-haspopup="true" aria-expanded="false"> <span class="text-overflow rbx-selection-label">{{ getCategoryDropdownValue() }}</span> <span class="icon-down-16x16"></span> </button> <ul class="dropdown-menu" data-toggle="dropdown-menu" role="menu"> <li ng-repeat="category in navigationMenu.categories | filter: isSearchableCategory | orderBy : \'orderIndex\'"> <a ng-click="updateCategory($event, true, false, category)">{{category.name}}</a> </li> </ul> <button class="input-addon-btn" type="submit" ng-click="applySearch(true)"> <span class="icon-search"></span> </button> </div> <div class="buy-btns-container"> <a class="btn-growth-md buy-robux" target="_self" ng-click="buyRobuxButtonOnClick()" ng-bind="\'Action.BuyRobux\' | translate"></a> <div id="shopping-cart-btn-entry" class="shopping-cart-btn-entry"></div> </div> </div> </div> '},640:function(e){e.exports='<div id="search-options" class="search-options" ng-controller="searchOptionsController"> <form name="forms.searchOptionsForm" class="border-right search-options-form" role="form" novalidate> <div class="section-content-off" ng-if="layout.hasSearchOptionsError" ng-bind="\'Response.GenericError\' | translate"> </div> <div ng-if="!layout.hasSearchOptionsError"> <div class="border-bottom category-section"> <h2 class="font-header-1 search-options-header" ng-bind="\'Heading.CatalogCategory\' | translate"></h2> <ul id="category-panel-group" class="panel-group"> <li ng-repeat="category in navigationMenu.categories" class="font-header-2 text-subheader panel panel-default"> <a id="expandable-menu-category-{{ category.categoryId }}" data-target="#category-{{ category.categoryId }}" class="small text menu-link text-link-secondary panel-heading panel-heading-layered-clothing-ui" data-toggle="collapse" data-parent="#category-panel-group" role="tab"> <button class="category-name btn-text" ng-click="categoryNameClick($event, category)">{{ category.name }}</button> <button ng-show="canToggleSubmenu(category)" class="toggle-submenu btn-text icon-down" ng-click="categoryClick($event, category)"></button> </a> <div id="category-{{ category.categoryId }}" class="panel-collapse collapse" accordion-menu use-secondary-icons="true" data-toggle="collapsible-element" role="tabpanel" data-expanded-icon="icon-up" data-collapsed-icon="icon-down"> <ul ng-if="category.subcategories" class="subcategory-menu"> <li ng-repeat="subcategory in category.subcategories" class="top-border"> <button class="small text menu-link text-link-secondary btn-text" ng-class="{\'active\' : currentQuery.category.categoryId === category.categoryId && currentQuery.subcategory.subcategoryId == subcategory.subcategoryId}" ng-click="updateCategory($event, false, true, category, subcategory)"> {{ subcategory.name }} </button> </li> </ul> </div> </li> </ul> </div> <div ng-show="canShowFilters()"> <h2 class="font-header-1 search-options-header filters-header" ng-bind="\'Label.Filter.Filters\' | translate"> </h2> <div class="border-bottom filters-section"> <div ng-if="data.salesTypeFilters && data.salesTypeFilters.length > 0" class="filter-label font-header-2" ng-bind="\'Label.Filter.SalesType\' | translate"> </div> <div ng-if="data.salesTypeFilters && data.salesTypeFilters.length > 0" sales-type-filter></div> <div ng-if="data.creators" class="filter-label font-header-2" ng-bind="\'Label.Filter.Creator\' | translate"> Creator </div> <div creator-filters></div> <div ng-if="data.currencyTypes" class="filter-label font-header-2" ng-bind="\'Label.Filter.Price\' | translate"> </div> <div price-filters></div> <div ng-if="data.sortMenus.sortOptions && data.sortMenus.sortOptions.length > 0" class="filter-label font-header-2" ng-bind="\'Label.Filter.Sorts\' | translate"> </div> <div ng-if="data.sortMenus.sortOptions && data.sortMenus.sortOptions.length > 0" sort-filter></div> <div class="font-header-2 filter-label" ng-bind="\'Label.Filter.UnavailableItems\' | translate"></div> <div show-unavailable-filter></div> </div> </div> </div> </form> </div>'},6083:function(e){e.exports='<ul class="hlist item-cards-stackable"> <li class="list-item item-card" ng-repeat="i in [] | range: getNumberItemToDisplay()"> <div class="item-card-container"> <div class="item-card-link"> <div class="item-card-thumb-container"> <div class="shimmer item-card-thumb-progressive-loading"></div> </div> </div> <ul class="item-card-caption-progressive-loading shimmer-lines"> <li class="placeholder shimmer-line"></li> <li class="placeholder shimmer-line"></li> <li class="placeholder shimmer-line"></li> </ul> </div> </li> </ul>'},4137:function(e){e.exports='<div id="search-options" class="search-options"> <ul class="search-options-progressive-loading shimmer-lines"> <li class="placeholder shimmer-line" ng-repeat="i in [] | range: 9"></li> </ul> </div> '},904:function(e){e.exports='<ul> <li class="radio top-border font-caption-body"> <input type="radio" name="radio-unavailable" id="radio-unavailable-hide" ng-value="false" ng-model="data.includeNotForSale" ng-change="filterChanged()"/> <label for="radio-unavailable-hide" ng-bind="\'Label.Filter.Hide\' | translate"></label> </li> <li class="radio top-border font-caption-body"> <input type="radio" name="radio-unavailable" id="radio-unavailable-show" ng-value="true" ng-model="data.includeNotForSale" ng-change="filterChanged()"/> <label for="radio-unavailable-show" ng-bind="\'Label.Filter.Show\' | translate"></label> </li> </ul>'},9326:function(e){e.exports='<ul> <li ng-repeat="sortOption in data.sortMenus.sortOptions" class="radio top-border font-caption-body"> <input type="radio" name="radio-sort-option" id="radio-sort-option-{{ sortOption.sortType }}" ng-value="sortOption" ng-model="data.sortType" ng-change="filterChanged()"/> <label for="radio-sort-option-{{ sortOption.sortType }}"> {{ sortOption.name }} </label> <ul ng-if="sortOption.hasSubMenu && data.sortType === sortOption"> <li ng-repeat="sortAggregation in data.sortMenus.sortAggregations" class="radio top-border font-caption-body"> <input type="radio" name="radio-sort-aggregation" id="radio-sort-aggregation-{{ sortAggregation.sortAggregation }}" ng-value="sortAggregation" ng-model="data.sortAggregation" ng-change="filterChanged()"/> <label for="radio-sort-aggregation-{{ sortAggregation.sortAggregation }}"> {{ sortAggregation.name }} </label> </li> </ul> </li> </ul> '},9515:function(e,t,r){var a=r(8761)(r(7772),"DataView");e.exports=a},9612:function(e,t,r){var a=r(2118),n=r(6909),o=r(8138),i=r(4174),s=r(7942);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}c.prototype.clear=a,c.prototype.delete=n,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,e.exports=c},235:function(e,t,r){var a=r(3945),n=r(1846),o=r(8028),i=r(2344),s=r(4769);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}c.prototype.clear=a,c.prototype.delete=n,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,e.exports=c},326:function(e,t,r){var a=r(8761)(r(7772),"Map");e.exports=a},6738:function(e,t,r){var a=r(2411),n=r(6417),o=r(6928),i=r(9493),s=r(4150);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}c.prototype.clear=a,c.prototype.delete=n,c.prototype.get=o,c.prototype.has=i,c.prototype.set=s,e.exports=c},2760:function(e,t,r){var a=r(8761)(r(7772),"Promise");e.exports=a},2143:function(e,t,r){var a=r(8761)(r(7772),"Set");e.exports=a},5386:function(e,t,r){var a=r(6738),n=r(2842),o=r(2482);function i(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new a;++t<r;)this.add(e[t])}i.prototype.add=i.prototype.push=n,i.prototype.has=o,e.exports=i},6571:function(e,t,r){var a=r(235),n=r(5243),o=r(2858),i=r(4417),s=r(8605),c=r(1418);function l(e){var t=this.__data__=new a(e);this.size=t.size}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=s,l.prototype.set=c,e.exports=l},857:function(e,t,r){var a=r(7772).Symbol;e.exports=a},9162:function(e,t,r){var a=r(7772).Uint8Array;e.exports=a},3215:function(e,t,r){var a=r(8761)(r(7772),"WeakMap");e.exports=a},7552:function(e){e.exports=function(e,t){for(var r=-1,a=null==e?0:e.length,n=0,o=[];++r<a;){var i=e[r];t(i,r,e)&&(o[n++]=i)}return o}},1634:function(e,t,r){var a=r(6473),n=r(9631),o=r(6152),i=r(3226),s=r(9045),c=r(7598),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=o(e),u=!r&&n(e),d=!r&&!u&&i(e),p=!r&&!u&&!d&&c(e),m=r||u||d||p,g=m?a(e.length,String):[],f=g.length;for(var y in e)!t&&!l.call(e,y)||m&&("length"==y||d&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,f))||g.push(y);return g}},5067:function(e){e.exports=function(e,t){for(var r=-1,a=t.length,n=e.length;++r<a;)e[n+r]=t[r];return e}},7064:function(e){e.exports=function(e,t){for(var r=-1,a=null==e?0:e.length;++r<a;)if(t(e[r],r,e))return!0;return!1}},2218:function(e,t,r){var a=r(1225);e.exports=function(e,t){for(var r=e.length;r--;)if(a(e[r][0],t))return r;return-1}},1897:function(e,t,r){var a=r(5067),n=r(6152);e.exports=function(e,t,r){var o=t(e);return n(e)?o:a(o,r(e))}},3366:function(e,t,r){var a=r(857),n=r(2107),o=r(7157),i=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?n(e):o(e)}},5183:function(e,t,r){var a=r(3366),n=r(5125);e.exports=function(e){return n(e)&&"[object Arguments]"==a(e)}},8746:function(e,t,r){var a=r(1952),n=r(5125);e.exports=function e(t,r,o,i,s){return t===r||(null==t||null==r||!n(t)&&!n(r)?t!=t&&r!=r:a(t,r,o,i,e,s))}},1952:function(e,t,r){var a=r(6571),n=r(4871),o=r(1491),i=r(7416),s=r(940),c=r(6152),l=r(3226),u=r(7598),d="[object Arguments]",p="[object Array]",m="[object Object]",g=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,f,y,v){var b=c(e),h=c(t),S=b?p:s(e),C=h?p:s(t),T=(S=S==d?m:S)==m,E=(C=C==d?m:C)==m,I=S==C;if(I&&l(e)){if(!l(t))return!1;b=!0,T=!1}if(I&&!T)return v||(v=new a),b||u(e)?n(e,t,r,f,y,v):o(e,t,S,r,f,y,v);if(!(1&r)){var w=T&&g.call(e,"__wrapped__"),x=E&&g.call(t,"__wrapped__");if(w||x){var P=w?e.value():e,A=x?t.value():t;return v||(v=new a),y(P,A,r,f,v)}}return!!I&&(v||(v=new a),i(e,t,r,f,y,v))}},6840:function(e,t,r){var a=r(1049),n=r(7394),o=r(9259),i=r(7035),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,p=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||n(e))&&(a(e)?p:s).test(i(e))}},5522:function(e,t,r){var a=r(3366),n=r(1158),o=r(5125),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&n(e.length)&&!!i[a(e)]}},6411:function(e,t,r){var a=r(6001),n=r(4248),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!a(e))return n(e);var t=[];for(var r in Object(e))o.call(e,r)&&"constructor"!=r&&t.push(r);return t}},3228:function(e){var t=Math.ceil,r=Math.max;e.exports=function(e,a,n,o){for(var i=-1,s=r(t((a-e)/(n||1)),0),c=Array(s);s--;)c[o?s:++i]=e,e+=n;return c}},6473:function(e){e.exports=function(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}},1704:function(e,t,r){var a=r(2153),n=/^\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(n,""):e}},7826:function(e){e.exports=function(e){return function(t){return e(t)}}},9950:function(e){e.exports=function(e,t){return e.has(t)}},4019:function(e,t,r){var a=r(7772)["__core-js_shared__"];e.exports=a},2941:function(e,t,r){var a=r(3228),n=r(2406),o=r(5707);e.exports=function(e){return function(t,r,i){return i&&"number"!=typeof i&&n(t,r,i)&&(r=i=void 0),t=o(t),void 0===r?(r=t,t=0):r=o(r),i=void 0===i?t<r?1:-1:o(i),a(t,r,i,e)}}},4871:function(e,t,r){var a=r(5386),n=r(7064),o=r(9950);e.exports=function(e,t,r,i,s,c){var l=1&r,u=e.length,d=t.length;if(u!=d&&!(l&&d>u))return!1;var p=c.get(e),m=c.get(t);if(p&&m)return p==t&&m==e;var g=-1,f=!0,y=2&r?new a:void 0;for(c.set(e,t),c.set(t,e);++g<u;){var v=e[g],b=t[g];if(i)var h=l?i(b,v,g,t,e,c):i(v,b,g,e,t,c);if(void 0!==h){if(h)continue;f=!1;break}if(y){if(!n(t,(function(e,t){if(!o(y,t)&&(v===e||s(v,e,r,i,c)))return y.push(t)}))){f=!1;break}}else if(v!==b&&!s(v,b,r,i,c)){f=!1;break}}return c.delete(e),c.delete(t),f}},1491:function(e,t,r){var a=r(857),n=r(9162),o=r(1225),i=r(4871),s=r(5179),c=r(4207),l=a?a.prototype:void 0,u=l?l.valueOf:void 0;e.exports=function(e,t,r,a,l,d,p){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new n(e),new n(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var m=s;case"[object Set]":var g=1&a;if(m||(m=c),e.size!=t.size&&!g)return!1;var f=p.get(e);if(f)return f==t;a|=2,p.set(e,t);var y=i(m(e),m(t),a,l,d,p);return p.delete(e),y;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},7416:function(e,t,r){var a=r(3483),n=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,o,i,s){var c=1&r,l=a(e),u=l.length;if(u!=a(t).length&&!c)return!1;for(var d=u;d--;){var p=l[d];if(!(c?p in t:n.call(t,p)))return!1}var m=s.get(e),g=s.get(t);if(m&&g)return m==t&&g==e;var f=!0;s.set(e,t),s.set(t,e);for(var y=c;++d<u;){var v=e[p=l[d]],b=t[p];if(o)var h=c?o(b,v,p,t,e,s):o(v,b,p,e,t,s);if(!(void 0===h?v===b||i(v,b,r,o,s):h)){f=!1;break}y||(y="constructor"==p)}if(f&&!y){var S=e.constructor,C=t.constructor;S==C||!("constructor"in e)||!("constructor"in t)||"function"==typeof S&&S instanceof S&&"function"==typeof C&&C instanceof C||(f=!1)}return s.delete(e),s.delete(t),f}},1242:function(e,t,r){var a="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=a},3483:function(e,t,r){var a=r(1897),n=r(633),o=r(249);e.exports=function(e){return a(e,o,n)}},7937:function(e,t,r){var a=r(8304);e.exports=function(e,t){var r=e.__data__;return a(t)?r["string"==typeof t?"string":"hash"]:r.map}},8761:function(e,t,r){var a=r(6840),n=r(8109);e.exports=function(e,t){var r=n(e,t);return a(r)?r:void 0}},2107:function(e,t,r){var a=r(857),n=Object.prototype,o=n.hasOwnProperty,i=n.toString,s=a?a.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),r=e[s];try{e[s]=void 0;var a=!0}catch(e){}var n=i.call(e);return a&&(t?e[s]=r:delete e[s]),n}},633:function(e,t,r){var a=r(7552),n=r(981),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(e){return null==e?[]:(e=Object(e),a(i(e),(function(t){return o.call(e,t)})))}:n;e.exports=s},940:function(e,t,r){var a=r(9515),n=r(326),o=r(2760),i=r(2143),s=r(3215),c=r(3366),l=r(7035),u="[object Map]",d="[object Promise]",p="[object Set]",m="[object WeakMap]",g="[object DataView]",f=l(a),y=l(n),v=l(o),b=l(i),h=l(s),S=c;(a&&S(new a(new ArrayBuffer(1)))!=g||n&&S(new n)!=u||o&&S(o.resolve())!=d||i&&S(new i)!=p||s&&S(new s)!=m)&&(S=function(e){var t=c(e),r="[object Object]"==t?e.constructor:void 0,a=r?l(r):"";if(a)switch(a){case f:return g;case y:return u;case v:return d;case b:return p;case h:return m}return t}),e.exports=S},8109:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},2118:function(e,t,r){var a=r(9191);e.exports=function(){this.__data__=a?a(null):{},this.size=0}},6909:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},8138:function(e,t,r){var a=r(9191),n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(a){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return n.call(t,e)?t[e]:void 0}},4174:function(e,t,r){var a=r(9191),n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return a?void 0!==t[e]:n.call(t,e)}},7942:function(e,t,r){var a=r(9191);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=a&&void 0===t?"__lodash_hash_undefined__":t,this}},9045:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var a=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==a||"symbol"!=a&&t.test(e))&&e>-1&&e%1==0&&e<r}},2406:function(e,t,r){var a=r(1225),n=r(7878),o=r(9045),i=r(9259);e.exports=function(e,t,r){if(!i(r))return!1;var s=typeof t;return!!("number"==s?n(r)&&o(t,r.length):"string"==s&&t in r)&&a(r[t],e)}},8304:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7394:function(e,t,r){var a,n=r(4019),o=(a=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"";e.exports=function(e){return!!o&&o in e}},6001:function(e){var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},3945:function(e){e.exports=function(){this.__data__=[],this.size=0}},1846:function(e,t,r){var a=r(2218),n=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=a(t,e);return!(r<0)&&(r==t.length-1?t.pop():n.call(t,r,1),--this.size,!0)}},8028:function(e,t,r){var a=r(2218);e.exports=function(e){var t=this.__data__,r=a(t,e);return r<0?void 0:t[r][1]}},2344:function(e,t,r){var a=r(2218);e.exports=function(e){return a(this.__data__,e)>-1}},4769:function(e,t,r){var a=r(2218);e.exports=function(e,t){var r=this.__data__,n=a(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}},2411:function(e,t,r){var a=r(9612),n=r(235),o=r(326);e.exports=function(){this.size=0,this.__data__={hash:new a,map:new(o||n),string:new a}}},6417:function(e,t,r){var a=r(7937);e.exports=function(e){var t=a(this,e).delete(e);return this.size-=t?1:0,t}},6928:function(e,t,r){var a=r(7937);e.exports=function(e){return a(this,e).get(e)}},9493:function(e,t,r){var a=r(7937);e.exports=function(e){return a(this,e).has(e)}},4150:function(e,t,r){var a=r(7937);e.exports=function(e,t){var r=a(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}},5179:function(e){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,a){r[++t]=[a,e]})),r}},9191:function(e,t,r){var a=r(8761)(Object,"create");e.exports=a},4248:function(e,t,r){var a=r(241)(Object.keys,Object);e.exports=a},4146:function(e,t,r){e=r.nmd(e);var a=r(1242),n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,i=o&&o.exports===n&&a.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=s},7157:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},241:function(e){e.exports=function(e,t){return function(r){return e(t(r))}}},7772:function(e,t,r){var a=r(1242),n="object"==typeof self&&self&&self.Object===Object&&self,o=a||n||Function("return this")();e.exports=o},2842:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2482:function(e){e.exports=function(e){return this.__data__.has(e)}},4207:function(e){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},5243:function(e,t,r){var a=r(235);e.exports=function(){this.__data__=new a,this.size=0}},2858:function(e){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},4417:function(e){e.exports=function(e){return this.__data__.get(e)}},8605:function(e){e.exports=function(e){return this.__data__.has(e)}},1418:function(e,t,r){var a=r(235),n=r(326),o=r(6738);e.exports=function(e,t){var r=this.__data__;if(r instanceof a){var i=r.__data__;if(!n||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new o(i)}return r.set(e,t),this.size=r.size,this}},7035:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},2153:function(e){var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},1225:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},9631:function(e,t,r){var a=r(5183),n=r(5125),o=Object.prototype,i=o.hasOwnProperty,s=o.propertyIsEnumerable,c=a(function(){return arguments}())?a:function(e){return n(e)&&i.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},6152:function(e){var t=Array.isArray;e.exports=t},7878:function(e,t,r){var a=r(1049),n=r(1158);e.exports=function(e){return null!=e&&n(e.length)&&!a(e)}},3226:function(e,t,r){e=r.nmd(e);var a=r(7772),n=r(6330),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,s=i&&i.exports===o?a.Buffer:void 0,c=(s?s.isBuffer:void 0)||n;e.exports=c},8149:function(e,t,r){var a=r(8746);e.exports=function(e,t){return a(e,t)}},1049:function(e,t,r){var a=r(3366),n=r(9259);e.exports=function(e){if(!n(e))return!1;var t=a(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1158:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},9259:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},5125:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},4795:function(e,t,r){var a=r(3366),n=r(5125);e.exports=function(e){return"symbol"==typeof e||n(e)&&"[object Symbol]"==a(e)}},7598:function(e,t,r){var a=r(5522),n=r(7826),o=r(4146),i=o&&o.isTypedArray,s=i?n(i):a;e.exports=s},249:function(e,t,r){var a=r(1634),n=r(6411),o=r(7878);e.exports=function(e){return o(e)?a(e):n(e)}},2689:function(e,t,r){var a=r(2941)();e.exports=a},981:function(e){e.exports=function(){return[]}},6330:function(e){e.exports=function(){return!1}},5707:function(e,t,r){var a=r(7642),n=1/0;e.exports=function(e){return e?(e=a(e))===n||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},7642:function(e,t,r){var a=r(1704),n=r(9259),o=r(4795),i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var r=s.test(e);return r||c.test(e)?l(e.slice(2),r?2:8):i.test(e)?NaN:+e}},3527:function(e,t,r){"use strict";r.d(t,{_u:function(){return a},cs:function(){return n}});var a={assetRootUrlTemplate:"catalog",bundleRootUrlTemplate:"bundles"},n={bundle:"bundle",asset:"asset"};t.ZP={maxSelectedItems:20}},7124:function(e,t,r){"use strict";r.d(t,{LE:function(){return p},G0:function(){return m},Co:function(){return g},ex:function(){return f}});var a=r(792),n=r(4720),o=r(6174),i=r(2722),s=function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))},c=function(e,t){var r,a,n,o,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){i.label=o[1];break}if(6===o[0]&&i.label<n[1]){i.label=n[1],n=o;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(o);break}n[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l=a.EnvironmentUrls.economyApi,u=[];function d(e){return void 0===e&&(e=[]),s(this,void 0,Promise,(function(){var t,r;return c(this,(function(n){switch(n.label){case 0:return t=e.map((function(e){return{id:e.itemId,itemType:e.itemType}})),[4,a.ItemDetailsHydrationService.getItemDetails(t,!1,!0)];case 1:return(r=n.sent())?[2,r.map(i.Fi)]:[2,[]]}}))}))}function p(e){return void 0===e&&(e=[]),s(this,void 0,Promise,(function(){var t,r;return c(this,(function(a){switch(a.label){case 0:return t={},(null==e?void 0:e.length)?(r=(0,i.Pc)(e),r[0],r[1],[4,d(e)]):[2,t];case 1:return a.sent().forEach((function(e){t[e.id]=e})),[2,t]}}))}))}function m(e){return s(this,void 0,Promise,(function(){var t,r,o,u,d,p,m,g;return c(this,(function(f){switch(f.label){case 0:return t={},e.items,e.itemDetails,r=(0,i.os)(e),o=r.limited1,u=r.limited2,o.length||u.length?o.length?[4,Promise.all(o.map((function(e){return function(e){var t;return s(this,void 0,Promise,(function(){var r,a;return c(this,(function(o){switch(o.label){case 0:return e?(r={url:l+"/v1/assets/"+e+"/resellers?cursor=&limit=100",withCredentials:!0},[4,n.httpService.get(r)]):[2,{itemId:e,resellers:[]}];case 1:return 200===(a=o.sent()).status&&(null===(t=a.data)||void 0===t?void 0:t.data)?[2,{itemId:e,resellers:a.data.data||[]}]:[2,{itemId:e,resellers:[]}]}}))}))}(e.itemId)})))]:[3,2]:[2,t];case 1:return p=f.sent(),[3,3];case 2:p=[],f.label=3;case 3:return d=p,u.length?[4,Promise.all(u.map((function(e){return function(e,t){var r;return s(this,void 0,Promise,(function(){var o,i;return c(this,(function(s){switch(s.label){case 0:return e&&t?[4,n.httpService.get({url:a.EnvironmentUrls.apiGatewayUrl+"/marketplace-sales/v1/item/"+t+"/resellers?limit=30",retryable:!0,withCredentials:!0})]:[2,{itemId:e,collectibleItemId:t,resellers:[]}];case 1:return o=s.sent(),i=((null===(r=o.data)||void 0===r?void 0:r.data)||[]).filter((function(e){var t,r;return(null===(r=null===(t=e.seller)||void 0===t?void 0:t.sellerId)||void 0===r?void 0:r.toString())!==a.CurrentUser.userId})),[2,{itemId:e,collectibleItemId:t,resellers:i}]}}))}))}(e.itemId,e.collectibleItemId)})))]:[3,5];case 4:return g=f.sent(),[3,6];case 5:g=[],f.label=6;case 6:return m=g,d.forEach((function(e){e.itemId&&(t[e.itemId]=e.resellers)})),m.forEach((function(e){e.itemId&&(t[e.itemId]=e.resellers)})),[2,t]}}))}))}function g(){var e,t;return s(this,void 0,Promise,(function(){var r,o;return c(this,(function(i){switch(i.label){case 0:return r={url:l+"/v1/users/"+a.CurrentUser.userId+"/currency",withCredentials:!0},[4,n.httpService.get(r)];case 1:return 200===(o=i.sent()).status?[2,null!==(t=null===(e=null==o?void 0:o.data)||void 0===e?void 0:e.robux)&&void 0!==t?t:null]:[2,null]}}))}))}var f=function(){var e={state:{items:[],selectedItems:{},totalPrice:null,currentUserBalance:null,resellers:{},itemDetails:{}}};function t(e){var t=function(e){var t="s_"+(0,i.TN)(8)+Date.now(),r={subscriptionId:t,handler:e};return u.push(r),{listeners:u,listener:r,subscriptionId:t}}(e);return{remove:function(){var e;e=t.subscriptionId,u=u.filter((function(t){var r=t.subscriptionId;return!(r&&r===e)}))}}}var r=function(t){return s(void 0,void 0,void 0,(function(){var r;return c(this,(function(a){switch(a.label){case 0:return[4,(0,o.ZP)(t)];case 1:return(r=a.sent())&&(e.state=r,n=r,u.forEach((function(e){e.subscriptionId;var t=e.handler;try{null==t||t(n)}catch(e){console.error("emitStateChange err:",e)}}))),[2]}var n}))}))};return function(){return{getCartState:i.rW,onCartStateChange:t,dispatch:r,getLatestCachedState:function(){return e.state}}}}()},3119:function(e,t,r){"use strict";r.d(t,{O$:function(){return c},K6:function(){return l}});var a=r(792),n=r(4720),o=r(9849),i=new a.TranslationResourceProvider,s={featureCatalog:i.getTranslationResource(o.ip.feature),featureItem:i.getTranslationResource(o.SW.feature),featureItemModel:i.getTranslationResource(o.lj.feature)},c={actionSeeMoreReseller:function(){return s.featureCatalog.get("Action.SeeMoreReseller",{linkStart:'<a href="#resellers" class="text-link">',resellerLink:s.featureCatalog.get("Heading.Resellers",{}),linkEnd:"</a>"})},actionBuy:function(){return s.featureCatalog.get("Action.Buy",{})},labelCategoryType:function(){return s.featureCatalog.get("Label.CategoryType",{})},labelTags:function(){return s.featureCatalog.get("Label.Tags",{})},labelSalesType:function(){return s.featureCatalog.get("Label.Filter.SalesType",{})},labelCollectibles:function(){return s.featureCatalog.get("LabelCollectibles",{})},messageCollectiblesInfo:function(){return s.featureCatalog.get("Message.CollectiblesInfo",{})},labelNewCollectibles:function(){return s.featureCatalog.get("Label.NewCollectibles",{})},labelByCreatorLink:function(e){return s.featureCatalog.get("Label.ByCreatorLink",e)},labelTradable:function(){return s.featureCatalog.get("Label.Tradable",{})},labelDescription:function(){return s.featureCatalog.get("Label.Description",{})},labelNotAvailable:function(){return s.featureCatalog.get("Label.NotAvailable",{})},labelNoResellers:function(){return s.featureCatalog.get("LabelNoResellers",{})},actionAddToCart:function(){return s.featureCatalog.get("Action.AddToCart",{})},actionRemoveFromCart:function(){return s.featureCatalog.get("Action.RemoveFromCart",{})},headingItemAddedToCart:function(e){return s.featureCatalog.get("Heading.ItemAddedToCart",e)},headingItemRemovedFromCart:function(e){return s.featureCatalog.get("Heading.ItemRemovedFromCart",e)},labelTotalUnformatted:function(){return s.featureCatalog.get("Label.TotalUnformatted",{})},messageRemainingBalance:function(e){return s.featureCatalog.get("Message.RemainingBalance",e)},messageInsufficientFundsForTransaction:function(){return s.featureCatalog.get("Message.InsufficientFundsForTransaction",{})},labelShoppingCart:function(){return s.featureCatalog.get("Label.ShoppingCart",{})},labelTotalItems:function(e){return s.featureCatalog.get("Label.TotalItems",e)},messagePurchaseLimit:function(e){return s.featureCatalog.get("Message.PurchaseLimit",e)},actionAddItemsToCart:function(e){return s.featureCatalog.get("Action.AddItemsToCart",{items:e})},actionRemoveItemsFromCart:function(e){return s.featureCatalog.get("Action.RemoveItemsFromCart",{items:e})},headingItemsRemovedFromCart:function(e){return s.featureCatalog.get("Heading.ItemsRemovedFromCart",e)},headingItemsAddedToCart:function(e){return s.featureCatalog.get("Heading.ItemsAddedToCart",e)}},l={labelShowLess:function(){return s.featureItem.get("Label.ShowLess",{})},labelReadMore:function(){return s.featureItem.get("Label.ReadMore",{})},labelFree:function(){return s.featureItem.get("Label.Free",{})},actionGetPremium:function(){return s.featureItem.get("Action.GetPremium",{})},actionBuy:function(){return s.featureItem.get("Action.Buy",{})},labelPremiumDiscountSavings:function(e,t){var r='<span class="discount-savings-original-price"><span class="icon-robux-16x16"></span>'+n.numberFormat.getNumberFormat(t)+"</span>";return s.featureItem.get("Label.PremiumDiscountSavings",{discountPercentage:n.numberFormat.getNumberFormat(e),originalPrice:r})},labelPremiumDiscountOpportunityPrompt:function(e){var t='<span class="discount-savings-original-price"><span class="icon-robux-16x16"></span>'+n.numberFormat.getNumberFormat(e)+"</span>";return s.featureItem.get("Label.PremiumDiscountOpportunityPrompt",{premiumDiscountedPrice:t})},labelBestPrice:function(){return s.featureItem.get("Label.BestPrice",{})},labelPrice:function(){return s.featureItem.get("Label.Price",{})},actionYes:function(){return s.featureItem.get("Action.Yes",{})},actionNo:function(){return s.featureItem.get("Action.No",{})},actionInventory:function(){return s.featureItem.get("Action.Inventory",{})},labelItemNotForSale:function(){return s.featureItem.get("Label.ItemNotForSale",{})}}},9849:function(e,t,r){"use strict";r.d(t,{ip:function(){return a},SW:function(){return n},lj:function(){return o}});var a={common:[""],feature:"Feature.Catalog"},n={common:[""],feature:"Feature.Item"},o={common:[""],feature:"Feature.ItemModel"}},6174:function(e,t,r){"use strict";r.d(t,{mP:function(){return d},ZP:function(){return v}});var a,n=r(2722),o=r(7124),i=r(3119),s=function(){return(s=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},c=function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((a=a.apply(e,t||[])).next())}))},l=function(e,t){var r,a,n,o,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){i.label=o[1];break}if(6===o[0]&&i.label<n[1]){i.label=n[1],n=o;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(o);break}n[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},u=function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e},d=function(e){a=e};function p(e){var t;return c(this,void 0,Promise,(function(){var r,c,d,p,m,g;return l(this,(function(l){switch(l.label){case 0:return r=(0,n.rW)(),(null==e?void 0:e.item)?(null===(t=r.items)||void 0===t?void 0:t.find((function(t){return t.itemId&&t.itemId===e.item.itemId})))?[2,r]:(c={itemId:e.item.itemId,itemType:e.item.itemType,itemName:e.item.itemName,collectibleItemId:e.item.collectibleItemId,addedToCardAt:Date.now()},[4,(0,o.LE)([c])]):[2,r];case 1:return d=l.sent(),(p=r.itemDetails)[c.itemId]=d[c.itemId],(m=r.selectedItems)[""+e.item.itemType.toLowerCase()+e.item.itemId]=!0,g=(0,n.iO)(s(s({},r),{itemDetails:p,items:u(u([],r.items),[c]),selectedItems:m})),(0,n.F5)(g),e.displaySystemFeedback&&void 0!==a&&a.success(i.O$.headingItemAddedToCart({itemName:c.itemName?c.itemName:""}),0,2e3),[2,g]}}))}))}function m(e){return c(this,void 0,Promise,(function(){var t,r,c,d,p;return l(this,(function(l){switch(l.label){case 0:return t=(0,n.rW)(),(null==e?void 0:e.items)?(r=t.selectedItems,c=t.itemDetails,d=e.items.map((function(e){var a;if(null===(a=t.items)||void 0===a?void 0:a.find((function(t){return t.itemId&&t.itemId===e.itemId&&t.itemType===e.itemType})))return null;var n={itemId:e.itemId,itemType:e.itemType,itemName:e.itemName,collectibleItemId:e.collectibleItemId,addedToCardAt:Date.now()};return r[""+e.itemType.toLowerCase()+e.itemId]=!0,n})).filter((function(e){return null!==e})),[4,Promise.all(d.map((function(e){return(0,o.LE)([e])})))]):[2,t];case 1:return l.sent().forEach((function(e,t){c[d[t].itemId]=e[d[t].itemId]})),p=(0,n.iO)(s(s({},t),{itemDetails:c,items:u(u([],t.items),d),selectedItems:r})),(0,n.F5)(p),e.displaySystemFeedback&&void 0!==a&&a.success(i.O$.headingItemsAddedToCart({itemCount:""+e.items.length}),0,2e3),[2,p]}}))}))}function g(e){var t,r,o,c=null===(t=null==e?void 0:e.item)||void 0===t?void 0:t.itemId,l=null===(r=null==e?void 0:e.item)||void 0===r?void 0:r.itemType,u=(0,n.rW)(),d="";if(!c)return u;var p=null===(o=(null==u?void 0:u.items)||[])||void 0===o?void 0:o.filter((function(e){return!e.itemId||e.itemId!==c||!e.itemType||e.itemType!==l||(e,d=e.itemName?e.itemName:"",!1)})),m=u.selectedItems,g=u.resellers;delete m[""+l.toLowerCase()+c],delete g[c];var f=(0,n.iO)(s(s({},u),{selectedItems:s({},m),resellers:s({},g),items:p}));return(0,n.F5)(f),e.displaySystemFeedback&&void 0!==a&&a.success(i.O$.headingItemRemovedFromCart({itemName:d}),0,2e3),f}function f(e){var t=(0,n.rW)(),r=t.selectedItems,o=t.resellers,c=t.items;e.items.forEach((function(e){var t,a=null==e?void 0:e.itemId,n=null==e?void 0:e.itemType;return!!a&&(c=null===(t=c||[])||void 0===t?void 0:t.filter((function(e){return!e.itemId||e.itemId!==a||!e.itemType||e.itemType!==n||(e,e.itemName?e.itemName:"",!1)})),delete r[""+n.toLowerCase()+a],delete o[a],!0)}));var l=(0,n.iO)(s(s({},t),{selectedItems:s({},r),resellers:s({},o),items:c}));return(0,n.F5)(l),e.displaySystemFeedback&&void 0!==a&&a.success(i.O$.headingItemsRemovedFromCart({itemCount:""+e.items.length}),0,2e3),l}function y(){var e;return c(this,void 0,Promise,(function(){var t,r,a,i,c,u,d,p,m;return l(this,(function(l){switch(l.label){case 0:t=(0,n.rW)(),l.label=1;case 1:return l.trys.push([1,6,,7]),(r={items:t.items,selectedItems:t.selectedItems,totalPrice:t.totalPrice,currentUserBalance:t.currentUserBalance,resellers:t.resellers,itemDetails:t.itemDetails}).items||(r.items=[]),(null===(e=r.items)||void 0===e?void 0:e.length)?[4,(0,o.LE)(r.items)]:[3,4];case 2:return a=l.sent(),r.items=r.items.map((function(e){var t=null==a?void 0:a[e.itemId];return t?s(s({},e),{itemName:t.name,collectibleItemId:t.collectibleItemId||null}):e})),Object.keys(a).length&&(r.itemDetails=s(s({},r.itemDetails),a)),[4,(0,o.G0)(r)];case 3:i=l.sent(),Object.keys(i).length&&(r.resellers=s(s({},r.resellers),i)),l.label=4;case 4:return c=r.items.map((function(e){return e.itemId.toString()})),u=Object.keys(r.itemDetails),d=Object.keys(r.resellers),c.length!==u.length&&u.forEach((function(e){c.includes(e)||delete r.itemDetails[e]})),c.length!==d.length&&d.forEach((function(e){c.includes(e)||delete r.resellers[e]})),[4,(0,o.Co)()];case 5:return p=l.sent(),r.currentUserBalance=p,m=(0,n.iO)(r),(0,n.F5)(m),[2,m];case 6:return l.sent(),[2,t];case 7:return[2]}}))}))}function v(e){return c(this,void 0,Promise,(function(){return l(this,(function(t){return(null==e?void 0:e.type)?"ADD_ITEM"===e.type?[2,p(e)]:"ADD_ITEMS"===e.type?[2,m(e)]:"REMOVE_ITEM"===e.type?[2,g(e)]:"REMOVE_ITEMS"===e.type?[2,f(e)]:"REFRESH_CART"===e.type?[2,y()]:[2,console.error('reducer action unknown a "type" property',e)]:[2,console.error('reducer action missing a "type" property',e)]}))}))}},7904:function(e,t,r){"use strict";r.d(t,{uR:function(){return o},ly:function(){return i},ex:function(){return s}});var a=r(2722),n=function(){return(n=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},o=function(e,t){return{type:"ADD_ITEM",item:(0,a.EI)(e),displaySystemFeedback:t}},i=function(e,t){var r,a,o;return{type:"REMOVE_ITEM",item:n(n({},e),{itemId:null!==(a=null!==(r=e.itemId)&&void 0!==r?r:e.id)&&void 0!==a?a:null===(o=null==e?void 0:e.item)||void 0===o?void 0:o.id}),displaySystemFeedback:t}},s=function(){return{type:"REFRESH_CART"}}},2722:function(e,t,r){"use strict";r.d(t,{TN:function(){return u},rW:function(){return p},F5:function(){return m},jD:function(){return g},iO:function(){return f},gg:function(){return y},EI:function(){return v},Fi:function(){return b},Pc:function(){return h},os:function(){return S},YK:function(){return T},vp:function(){return E}});var a,n=r(792),o=r(292),i=r(4720),s=r(3527),c=function(){return(c=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},l=function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e},u=(a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",function(e){void 0===e&&(e=12);for(var t="",r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*a.length));return t});function d(){return"Roblox.AvatarMarketplace.Cart:"+(n.CurrentUser.isAuthenticated&&n.CurrentUser.userId||"")}function p(){var e=d();return c({totalPrice:null,currentUserBalance:null,items:[],selectedItems:{},resellers:{},purchaseParams:{},itemDetails:{}},o.localStorageService.getLocalStorage(e))}function m(e){var t=d();o.localStorageService.setLocalStorage(t,e)}function g(e){var t,r,a=e.lowestPrice;return void 0!==e.collectibleItemId&&"ExperiencesDevApiOnly"===e.collectibleItemDetails.saleLocationType?a=e.collectibleItemDetails.lowestResalePrice:n.CurrentUser.isPremiumUser&&void 0!==e.premiumPricing&&void 0!==(null===(t=e.premiumPricing)||void 0===t?void 0:t.premiumPriceInRobux)?a=null===(r=e.premiumPricing)||void 0===r?void 0:r.premiumPriceInRobux:void 0===a&&(a=e.price),a||0}function f(e){var t=e.items,r=e.itemDetails,a=t.reduce((function(e,t){var a=r[t.itemId];if(void 0===a)return e;var n=g(a);return n<0&&(n=0),e+(n||0)}),0);return c(c({},e),{totalPrice:a})}function y(e,t){var r=e.itemDetails;return t.reduce((function(e,t){if(void 0===r[t.itemId])return e;var a=g(r[t.itemId]);return a<0&&(a=0),e+(a||0)}),0)}function v(e){var t;return c(c({},e),{itemId:e.itemId||e.id||e.itemTargetId,itemName:null!==(t=e.name)&&void 0!==t?t:e.itemName})}function b(e){return c(c({},e),{creatorType:"Group"===e.creatorType?"Group":"User",itemType:"Bundle"===e.itemType?"Bundle":"Asset",price:void 0===e.price?-1:e.price,bundledItems:[]})}function h(e){void 0===e&&(e=[]);return e.reduce((function(e,t){var r=e[0],a=e[1];return t.collectibleItemId?[r,l(l([],a),[t])]:[l(l([],r),[t]),a]}),[[],[]])}function S(e){var t=e.items,r=e.itemDetails;return t.reduce((function(e,t){var a=e.limited1,n=e.limited2,o=r[t.itemId],i=t.collectibleItemId||o.collectibleItemId;if(i){var s=c(c({},t),{collectibleItemId:i});return{limited1:a,limited2:l(l([],n),[s])}}return(null==o?void 0:o.itemRestrictions.includes("Limited"))||(null==o?void 0:o.itemRestrictions.includes("LimitedUnique"))?{limited1:l(l([],a),[t]),limited2:n}:{limited1:a,limited2:n}}),{limited1:[],limited2:[]})}function C(e,t){var r,a=document.querySelectorAll(t);if(null==a?void 0:a.length)for(var n=0;n<a.length;n++){var o=a[n];if(null===(r=o.contains)||void 0===r?void 0:r.call(o,e))return!0}return!1}function T(e){return C(e,".shopping-cart-btn")||C(e,".modal-backdrop.in")||C(e,".in.modal")||C(e,".add-to-cart-btn-container")}var E=function(e,t,r){var a=s._u.assetRootUrlTemplate;return function(e){return e.toLowerCase().includes(s.cs.bundle)}(r)&&(a=s._u.bundleRootUrlTemplate),n.EnvironmentUrls.websiteUrl+"/"+a+"/"+e+"/"+i.seoName.formatSeoName(t)}},990:function(e){e.exports="https://images.rbxcdn.com/181357c91bc2235e4ab4d3027aebf1f2-TopUpChest.png"},7723:function(e){e.exports="https://images.rbxcdn.com/2d611259a987824e8e1a6b2a9363dd27-TopUpGiftCardBackDec.png"},9127:function(e){e.exports="https://images.rbxcdn.com/b9a4639670c8c1cd0683ccbc13484618-TopUpGiftCardFrontDec.png"},292:function(e){"use strict";e.exports=CoreRobloxUtilities},4720:function(e){"use strict";e.exports=CoreUtilities},792:function(e){"use strict";e.exports=Roblox},5734:function(e){"use strict";e.exports=angular}},t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={id:a,loaded:!1,exports:{}};return e[a](n,n.exports,r),n.loaded=!0,n.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e=r(5734),t=r.n(e),a=r(3544),n=r(9597);(0,a.importFilesUnderPath)(r(6811)),(0,a.importFilesUnderPath)(r(2002)),(0,a.importFilesUnderPath)(r(7481)),(0,a.importFilesUnderPath)(r(6811)),(0,a.importFilesUnderPath)(r(7344)),(0,a.importFilesUnderPath)(r(9630));var o=r(3634),i=r(3634),s=(0,a.templateCacheGenerator)(t(),"catalogPageTemplates",o,i);t().element((function(){t().bootstrap("#catalog-container",[n.Z.name,s.name])}))}()}();
//# sourceMappingURL=https://js.rbxcdn.com/7a9c6ad52ef88d13ba69baba4bc4a908-catalog.bundle.min.js.map

/*! For license information please see catalogReact.bundle.min.js.LICENSE.txt */
!function(){var e={2779:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)){if(r.length){var i=a.apply(null,r);i&&e.push(i)}}else if("object"===o){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var c in r)n.call(r,c)&&r[c]&&e.push(c)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},9515:function(e,t,r){var n=r(8761)(r(7772),"DataView");e.exports=n},9612:function(e,t,r){var n=r(2118),a=r(6909),o=r(8138),i=r(4174),c=r(7942);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=a,s.prototype.get=o,s.prototype.has=i,s.prototype.set=c,e.exports=s},235:function(e,t,r){var n=r(3945),a=r(1846),o=r(8028),i=r(2344),c=r(4769);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=a,s.prototype.get=o,s.prototype.has=i,s.prototype.set=c,e.exports=s},326:function(e,t,r){var n=r(8761)(r(7772),"Map");e.exports=n},6738:function(e,t,r){var n=r(2411),a=r(6417),o=r(6928),i=r(9493),c=r(4150);function s(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=a,s.prototype.get=o,s.prototype.has=i,s.prototype.set=c,e.exports=s},2760:function(e,t,r){var n=r(8761)(r(7772),"Promise");e.exports=n},2143:function(e,t,r){var n=r(8761)(r(7772),"Set");e.exports=n},5386:function(e,t,r){var n=r(6738),a=r(2842),o=r(2482);function i(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}i.prototype.add=i.prototype.push=a,i.prototype.has=o,e.exports=i},6571:function(e,t,r){var n=r(235),a=r(5243),o=r(2858),i=r(4417),c=r(8605),s=r(1418);function l(e){var t=this.__data__=new n(e);this.size=t.size}l.prototype.clear=a,l.prototype.delete=o,l.prototype.get=i,l.prototype.has=c,l.prototype.set=s,e.exports=l},857:function(e,t,r){var n=r(7772).Symbol;e.exports=n},9162:function(e,t,r){var n=r(7772).Uint8Array;e.exports=n},3215:function(e,t,r){var n=r(8761)(r(7772),"WeakMap");e.exports=n},7552:function(e){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,o=[];++r<n;){var i=e[r];t(i,r,e)&&(o[a++]=i)}return o}},1634:function(e,t,r){var n=r(6473),a=r(9631),o=r(6152),i=r(3226),c=r(9045),s=r(7598),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=o(e),u=!r&&a(e),d=!r&&!u&&i(e),p=!r&&!u&&!d&&s(e),m=r||u||d||p,f=m?n(e.length,String):[],g=f.length;for(var v in e)!t&&!l.call(e,v)||m&&("length"==v||d&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||c(v,g))||f.push(v);return f}},5067:function(e){e.exports=function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}},7064:function(e){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},2218:function(e,t,r){var n=r(1225);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},1897:function(e,t,r){var n=r(5067),a=r(6152);e.exports=function(e,t,r){var o=t(e);return a(e)?o:n(o,r(e))}},3366:function(e,t,r){var n=r(857),a=r(2107),o=r(7157),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},5183:function(e,t,r){var n=r(3366),a=r(5125);e.exports=function(e){return a(e)&&"[object Arguments]"==n(e)}},8746:function(e,t,r){var n=r(1952),a=r(5125);e.exports=function e(t,r,o,i,c){return t===r||(null==t||null==r||!a(t)&&!a(r)?t!=t&&r!=r:n(t,r,o,i,e,c))}},1952:function(e,t,r){var n=r(6571),a=r(4871),o=r(1491),i=r(7416),c=r(940),s=r(6152),l=r(3226),u=r(7598),d="[object Arguments]",p="[object Array]",m="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,g,v,y){var h=s(e),b=s(t),E=h?p:c(e),S=b?p:c(t),C=(E=E==d?m:E)==m,I=(S=S==d?m:S)==m,T=E==S;if(T&&l(e)){if(!l(t))return!1;h=!0,C=!1}if(T&&!C)return y||(y=new n),h||u(e)?a(e,t,r,g,v,y):o(e,t,E,r,g,v,y);if(!(1&r)){var w=C&&f.call(e,"__wrapped__"),x=I&&f.call(t,"__wrapped__");if(w||x){var N=w?e.value():e,k=x?t.value():t;return y||(y=new n),v(N,k,r,g,y)}}return!!T&&(y||(y=new n),i(e,t,r,g,v,y))}},6840:function(e,t,r){var n=r(1049),a=r(7394),o=r(9259),i=r(7035),c=/^\[object .+?Constructor\]$/,s=Function.prototype,l=Object.prototype,u=s.toString,d=l.hasOwnProperty,p=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||a(e))&&(n(e)?p:c).test(i(e))}},5522:function(e,t,r){var n=r(3366),a=r(1158),o=r(5125),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&a(e.length)&&!!i[n(e)]}},6411:function(e,t,r){var n=r(6001),a=r(4248),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return a(e);var t=[];for(var r in Object(e))o.call(e,r)&&"constructor"!=r&&t.push(r);return t}},3228:function(e){var t=Math.ceil,r=Math.max;e.exports=function(e,n,a,o){for(var i=-1,c=r(t((n-e)/(a||1)),0),s=Array(c);c--;)s[o?c:++i]=e,e+=a;return s}},6473:function(e){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},1704:function(e,t,r){var n=r(2153),a=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(a,""):e}},7826:function(e){e.exports=function(e){return function(t){return e(t)}}},9950:function(e){e.exports=function(e,t){return e.has(t)}},4019:function(e,t,r){var n=r(7772)["__core-js_shared__"];e.exports=n},2941:function(e,t,r){var n=r(3228),a=r(2406),o=r(5707);e.exports=function(e){return function(t,r,i){return i&&"number"!=typeof i&&a(t,r,i)&&(r=i=void 0),t=o(t),void 0===r?(r=t,t=0):r=o(r),i=void 0===i?t<r?1:-1:o(i),n(t,r,i,e)}}},4871:function(e,t,r){var n=r(5386),a=r(7064),o=r(9950);e.exports=function(e,t,r,i,c,s){var l=1&r,u=e.length,d=t.length;if(u!=d&&!(l&&d>u))return!1;var p=s.get(e),m=s.get(t);if(p&&m)return p==t&&m==e;var f=-1,g=!0,v=2&r?new n:void 0;for(s.set(e,t),s.set(t,e);++f<u;){var y=e[f],h=t[f];if(i)var b=l?i(h,y,f,t,e,s):i(y,h,f,e,t,s);if(void 0!==b){if(b)continue;g=!1;break}if(v){if(!a(t,(function(e,t){if(!o(v,t)&&(y===e||c(y,e,r,i,s)))return v.push(t)}))){g=!1;break}}else if(y!==h&&!c(y,h,r,i,s)){g=!1;break}}return s.delete(e),s.delete(t),g}},1491:function(e,t,r){var n=r(857),a=r(9162),o=r(1225),i=r(4871),c=r(5179),s=r(4207),l=n?n.prototype:void 0,u=l?l.valueOf:void 0;e.exports=function(e,t,r,n,l,d,p){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var m=c;case"[object Set]":var f=1&n;if(m||(m=s),e.size!=t.size&&!f)return!1;var g=p.get(e);if(g)return g==t;n|=2,p.set(e,t);var v=i(m(e),m(t),n,l,d,p);return p.delete(e),v;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},7416:function(e,t,r){var n=r(3483),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,o,i,c){var s=1&r,l=n(e),u=l.length;if(u!=n(t).length&&!s)return!1;for(var d=u;d--;){var p=l[d];if(!(s?p in t:a.call(t,p)))return!1}var m=c.get(e),f=c.get(t);if(m&&f)return m==t&&f==e;var g=!0;c.set(e,t),c.set(t,e);for(var v=s;++d<u;){var y=e[p=l[d]],h=t[p];if(o)var b=s?o(h,y,p,t,e,c):o(y,h,p,e,t,c);if(!(void 0===b?y===h||i(y,h,r,o,c):b)){g=!1;break}v||(v="constructor"==p)}if(g&&!v){var E=e.constructor,S=t.constructor;E==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof E&&E instanceof E&&"function"==typeof S&&S instanceof S||(g=!1)}return c.delete(e),c.delete(t),g}},1242:function(e,t,r){var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},3483:function(e,t,r){var n=r(1897),a=r(633),o=r(249);e.exports=function(e){return n(e,o,a)}},7937:function(e,t,r){var n=r(8304);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},8761:function(e,t,r){var n=r(6840),a=r(8109);e.exports=function(e,t){var r=a(e,t);return n(r)?r:void 0}},2107:function(e,t,r){var n=r(857),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,c=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,c),r=e[c];try{e[c]=void 0;var n=!0}catch(e){}var a=i.call(e);return n&&(t?e[c]=r:delete e[c]),a}},633:function(e,t,r){var n=r(7552),a=r(981),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,c=i?function(e){return null==e?[]:(e=Object(e),n(i(e),(function(t){return o.call(e,t)})))}:a;e.exports=c},940:function(e,t,r){var n=r(9515),a=r(326),o=r(2760),i=r(2143),c=r(3215),s=r(3366),l=r(7035),u="[object Map]",d="[object Promise]",p="[object Set]",m="[object WeakMap]",f="[object DataView]",g=l(n),v=l(a),y=l(o),h=l(i),b=l(c),E=s;(n&&E(new n(new ArrayBuffer(1)))!=f||a&&E(new a)!=u||o&&E(o.resolve())!=d||i&&E(new i)!=p||c&&E(new c)!=m)&&(E=function(e){var t=s(e),r="[object Object]"==t?e.constructor:void 0,n=r?l(r):"";if(n)switch(n){case g:return f;case v:return u;case y:return d;case h:return p;case b:return m}return t}),e.exports=E},8109:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},2118:function(e,t,r){var n=r(9191);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},6909:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},8138:function(e,t,r){var n=r(9191),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return a.call(t,e)?t[e]:void 0}},4174:function(e,t,r){var n=r(9191),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:a.call(t,e)}},7942:function(e,t,r){var n=r(9191);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},9045:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},2406:function(e,t,r){var n=r(1225),a=r(7878),o=r(9045),i=r(9259);e.exports=function(e,t,r){if(!i(r))return!1;var c=typeof t;return!!("number"==c?a(r)&&o(t,r.length):"string"==c&&t in r)&&n(r[t],e)}},8304:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7394:function(e,t,r){var n,a=r(4019),o=(n=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!o&&o in e}},6001:function(e){var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},3945:function(e){e.exports=function(){this.__data__=[],this.size=0}},1846:function(e,t,r){var n=r(2218),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():a.call(t,r,1),--this.size,!0)}},8028:function(e,t,r){var n=r(2218);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},2344:function(e,t,r){var n=r(2218);e.exports=function(e){return n(this.__data__,e)>-1}},4769:function(e,t,r){var n=r(2218);e.exports=function(e,t){var r=this.__data__,a=n(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}},2411:function(e,t,r){var n=r(9612),a=r(235),o=r(326);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||a),string:new n}}},6417:function(e,t,r){var n=r(7937);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},6928:function(e,t,r){var n=r(7937);e.exports=function(e){return n(this,e).get(e)}},9493:function(e,t,r){var n=r(7937);e.exports=function(e){return n(this,e).has(e)}},4150:function(e,t,r){var n=r(7937);e.exports=function(e,t){var r=n(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}},5179:function(e){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},9191:function(e,t,r){var n=r(8761)(Object,"create");e.exports=n},4248:function(e,t,r){var n=r(241)(Object.keys,Object);e.exports=n},4146:function(e,t,r){e=r.nmd(e);var n=r(1242),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,i=o&&o.exports===a&&n.process,c=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=c},7157:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},241:function(e){e.exports=function(e,t){return function(r){return e(t(r))}}},7772:function(e,t,r){var n=r(1242),a="object"==typeof self&&self&&self.Object===Object&&self,o=n||a||Function("return this")();e.exports=o},2842:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2482:function(e){e.exports=function(e){return this.__data__.has(e)}},4207:function(e){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},5243:function(e,t,r){var n=r(235);e.exports=function(){this.__data__=new n,this.size=0}},2858:function(e){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},4417:function(e){e.exports=function(e){return this.__data__.get(e)}},8605:function(e){e.exports=function(e){return this.__data__.has(e)}},1418:function(e,t,r){var n=r(235),a=r(326),o=r(6738);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var i=r.__data__;if(!a||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new o(i)}return r.set(e,t),this.size=r.size,this}},7035:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},2153:function(e){var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},1225:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},9631:function(e,t,r){var n=r(5183),a=r(5125),o=Object.prototype,i=o.hasOwnProperty,c=o.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(e){return a(e)&&i.call(e,"callee")&&!c.call(e,"callee")};e.exports=s},6152:function(e){var t=Array.isArray;e.exports=t},7878:function(e,t,r){var n=r(1049),a=r(1158);e.exports=function(e){return null!=e&&a(e.length)&&!n(e)}},3226:function(e,t,r){e=r.nmd(e);var n=r(7772),a=r(6330),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,c=i&&i.exports===o?n.Buffer:void 0,s=(c?c.isBuffer:void 0)||a;e.exports=s},8149:function(e,t,r){var n=r(8746);e.exports=function(e,t){return n(e,t)}},1049:function(e,t,r){var n=r(3366),a=r(9259);e.exports=function(e){if(!a(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1158:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},9259:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},5125:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},4795:function(e,t,r){var n=r(3366),a=r(5125);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==n(e)}},7598:function(e,t,r){var n=r(5522),a=r(7826),o=r(4146),i=o&&o.isTypedArray,c=i?a(i):n;e.exports=c},249:function(e,t,r){var n=r(1634),a=r(6411),o=r(7878);e.exports=function(e){return o(e)?n(e):a(e)}},2689:function(e,t,r){var n=r(2941)();e.exports=n},981:function(e){e.exports=function(){return[]}},6330:function(e){e.exports=function(){return!1}},5707:function(e,t,r){var n=r(7642),a=1/0;e.exports=function(e){return e?(e=n(e))===a||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},7642:function(e,t,r){var n=r(1704),a=r(9259),o=r(4795),i=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=c.test(e);return r||s.test(e)?l(e.slice(2),r?2:8):i.test(e)?NaN:+e}},990:function(e){e.exports="https://images.rbxcdn.com/181357c91bc2235e4ab4d3027aebf1f2-TopUpChest.png"},7723:function(e){e.exports="https://images.rbxcdn.com/2d611259a987824e8e1a6b2a9363dd27-TopUpGiftCardBackDec.png"},9127:function(e){e.exports="https://images.rbxcdn.com/b9a4639670c8c1cd0683ccbc13484618-TopUpGiftCardFrontDec.png"}},t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n](a,a.exports,r),a.loaded=!0,a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e=React,t=r.n(e),n=CoreUtilities,a=ReactDOM,o=ReactRouterDOM,i=Roblox,c=r.n(i),s=CoreRobloxUtilities,l=-1,u=function(e){addEventListener("pageshow",(function(t){t.persisted&&(l=t.timeStamp,e(t))}),!0)},d=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},p=function(){var e=d();return e&&e.activationStart||0},m=function(e,t){var r=d(),n="navigate";return l>=0?n="back-forward-cache":r&&(document.prerendering||p()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},f=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return n.observe(Object.assign({type:e,buffered:!0},r||{})),n}}catch(e){}},g=function(e,t,r,n){var a,o;return function(i){t.value>=0&&(i||n)&&((o=t.value-(a||0))||void 0===a)&&(a=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,r),e(t))}},v=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},y=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},h=function(e){var t=!1;return function(r){t||(e(r),t=!0)}},b=-1,E=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},S=function(e){"hidden"===document.visibilityState&&b>-1&&(b="visibilitychange"===e.type?e.timeStamp:0,I())},C=function(){addEventListener("visibilitychange",S,!0),addEventListener("prerenderingchange",S,!0)},I=function(){removeEventListener("visibilitychange",S,!0),removeEventListener("prerenderingchange",S,!0)},T=function(){return b<0&&(b=E(),C(),u((function(){setTimeout((function(){b=E(),C()}),0)}))),{get firstHiddenTime(){return b}}},w=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},x=[1800,3e3],N=function(e,t){t=t||{},w((function(){var r,n=T(),a=m("FCP"),o=f("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<n.firstHiddenTime&&(a.value=Math.max(e.startTime-p(),0),a.entries.push(e),r(!0)))}))}));o&&(r=g(e,a,x,t.reportAllChanges),u((function(n){a=m("FCP"),r=g(e,a,x,t.reportAllChanges),v((function(){a.value=performance.now()-n.timeStamp,r(!0)}))})))}))},k=[.1,.25],A=function(e,t){t=t||{},N(h((function(){var r,n=m("CLS",0),a=0,o=[],i=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=o[0],r=o[o.length-1];a&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(a+=e.value,o.push(e)):(a=e.value,o=[e])}})),a>n.value&&(n.value=a,n.entries=o,r())},c=f("layout-shift",i);c&&(r=g(e,n,k,t.reportAllChanges),y((function(){i(c.takeRecords()),r(!0)})),u((function(){a=0,n=m("CLS",0),r=g(e,n,k,t.reportAllChanges),v((function(){return r()}))})),setTimeout(r,0))})))},P=(new Date,[2500,4e3]),F={},O=function(e,t){t=t||{},w((function(){var r,n=T(),a=m("LCP"),o=function(e){var t=e[e.length-1];t&&t.startTime<n.firstHiddenTime&&(a.value=Math.max(t.startTime-p(),0),a.entries=[t],r())},i=f("largest-contentful-paint",o);if(i){r=g(e,a,P,t.reportAllChanges);var c=h((function(){F[a.id]||(o(i.takeRecords()),i.disconnect(),F[a.id]=!0,r(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return setTimeout(c,0)}),!0)})),y(c),u((function(n){a=m("LCP"),r=g(e,a,P,t.reportAllChanges),v((function(){a.value=performance.now()-n.timeStamp,F[a.id]=!0,r(!0)}))}))}}))},D=[800,1800],U=function e(t){document.prerendering?w((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},R=function(e,t){t=t||{};var r=m("TTFB"),n=g(e,r,D,t.reportAllChanges);U((function(){var a=d();if(a){var o=a.responseStart;if(o<=0||o>performance.now())return;r.value=Math.max(o-p(),0),r.entries=[a],n(!0),u((function(){r=m("TTFB",0),(n=g(e,r,D,t.reportAllChanges))(!0)}))}}))},L=ReactUtilities,_=ReactStyleGuide,M=RobloxThumbnails,B=RobloxBadges,j=r(2779),V=r.n(j);var G=function(e){var r=e.numberOfItemsToDisplay,n=Array.from({length:r},(function(e,t){return t}));return t().createElement("ul",{id:"catalog-react-shimmer-container",className:"hlist item-cards-stackable"},n.map((function(e,r){return t().createElement("li",{key:e,className:"list-item item-card"},t().createElement("div",{className:"item-card-container"},t().createElement("div",{className:"item-card-link"},t().createElement("div",{className:"item-card-thumb-container"},t().createElement("div",{className:"shimmer item-card-thumb-progressive-loading"}))),t().createElement("ul",{className:"item-card-caption-progressive-loading shimmer-lines"},t().createElement("li",{className:"placeholder shimmer-line"}),t().createElement("li",{className:"placeholder shimmer-line"}),t().createElement("li",{className:"placeholder shimmer-line"}))))})))},W=function(t,r){var n=t.defaultCreatorId,a=(0,e.useState)(),o=a[0],i=a[1],c=(0,e.useState)(),s=c[0],l=c[1];(0,e.useEffect)((function(){var e=r.creatorName,t=r.creator,a=!!t&&t.userId!==n;i(e||(a?null==t?void 0:t.name:null)),l(a)}),[r,n]);var u=(0,e.useState)(!1),d=u[0],p=u[1];(0,e.useEffect)((function(){p(!!(s&&o&&o.length>0))}),[s,o]);var m=(0,e.useState)(),f=m[0];m[1];return{showCreatorBreadcrumb:d,isCreatorAGroup:f,creatorBreadcrumb:o}},H=function(t,r){var n=r.currencyType,a=r.minPrice,o=r.maxPrice,i=t.customRobuxFilterId,c=t.defaultCategoryId,s=t.freeFilterId,l=(0,e.useState)(!1),u=l[0],d=l[1];(0,e.useEffect)((function(){var e=!1;n&&n.currencyType===s?e=!0:n&&n.currencyType===i&&(a||0!==o||(e=!0)),d(e)}),[n,c,s,i,a,o]);var p=(0,e.useState)(!1),m=p[0],f=p[1];return(0,e.useEffect)((function(){var e=!1;(a||"number"==typeof o)&&(e=!0),n&&n.currencyType===i&&e?f(!0):f(!1)}),[n,c,s,i,a,o]),{showFreeBreadcrumb:u,showCustomPriceBreadcrumb:m}},z={defaults:{subcategory:"0"},allGearSubcategoryId:"0",buyRobuxUrl:i.EnvironmentUrls.websiteUrl+"/upgrades/robux?ctx=catalogNew",fallbackVngShopUrl:i.EnvironmentUrls.vngGamesShopUrl,catalogUrl:i.EnvironmentUrls.websiteUrl+"/catalog",numberOfSearchItems:30,numberOfSearchItemsForFullScreen:60,numberOfSearchItemsExpanded:120,expandedCategoryList:["Recommended"],endpoints:{getMetadata:{url:i.EnvironmentUrls.catalogApi+"/v1/catalog/metadata",retryable:!0,withCredentials:!0},getSearchOptionsUrl:{url:i.Endpoints?i.Endpoints.getAbsoluteUrl("/catalog/search-options"):"/catalog/search-options"},getNavigationMenuItems:{url:i.EnvironmentUrls.catalogApi+"/v1/search/navigation-menu-items",retryable:!0,withCredentials:!0},getSearchItems:{url:i.EnvironmentUrls.catalogApi+"/v1/search/items",retryable:!0,withCredentials:!0},getCatalogItemDetails:{url:i.EnvironmentUrls.catalogApi+"/v1/catalog/items/details",retryable:!1,withCredentials:!0},performanceMeasurements:{url:i.EnvironmentUrls.metricsApi+"/v1/performance/measurements",retryable:!1,withCredentials:!0},avatarRequestSuggestion:{url:i.EnvironmentUrls.apiGatewayUrl+"/autocomplete-avatar/v2/suggest",withCredentials:!0,timeout:5e3},avatarRequestCdnSuggestion:{url:i.EnvironmentUrls.apiGatewayCdnUrl+"/autocomplete-avatar/v2/suggest",withCredentials:!0,timeout:5e3},postGetTopics:{url:i.EnvironmentUrls.catalogApi+"/v1/topic/get-topics",withCredentials:!0,timeout:5e3},getUserCurrency:{url:"/v1/users/{userId}/currency",withCredentials:!0,timeout:5e3},postMarketplaceItemDetails:{url:i.EnvironmentUrls.apiGatewayUrl+"/marketplace-items/v1/items/details",retryable:!1,withCredentials:!0},getVngBuyRobuxBehavior:{url:i.EnvironmentUrls.universalAppConfigurationApi+"/v1/behaviors/vng-buy-robux/content",withCredentials:!0},getAppPolicyBehavior:{url:i.EnvironmentUrls.universalAppConfigurationApi+"/v1/behaviors/app-policy/content",withCredentials:!0},getSignedVngShopUrl:{url:i.EnvironmentUrls.apiGatewayUrl+"/vng-payments/v1/getVngShopUrl",withCredentials:!0}},getResellerDataUrl:function(e){return i.EnvironmentUrls.economyApi+"/v1/assets/"+e+"/resellers?limit=10"},itemTypes:{bundle:"Bundle",asset:"Asset"},priceStatus:{free:"Free",noResellers:"NoResellers"},itemRestrictionTypes:{thirteenPlus:"ThirteenPlus",limitedUnique:"LimitedUnique",limited:"Limited",rthro:"Rthro",dynamicHead:"Live",collectible:"Collectible"},itemRestrictionIcons:{thirteenPlus:"icon-thirteen-plus-label",limited:"icon-limited-label",limitedUnique:"icon-limited-unique-label",thirteenPlusLimited:"icon-thirteen-plus-limited-label",thirteenPlusLimitedUnique:"icon-thirteen-plus-limited-unique-label",rthroLabel:"icon-rthro-label",rthroLimitedLabel:"icon-rthro-limited-label",dynamicHead:"icon-default-dynamichead",collectible:"icon-limited-unique-label"},robloxSystemUserId:1,userTypes:{user:"User",group:"Group"},errorMessages:{categoryName:"CatalogPageAjaxErrors",endpointNames:{getSearchItems:"SearchItems",getCatalogItemDetails:"CatalogItemDetails"}},englishLanguageCode:"en",autocompleteQueryAmount:10,autocompleteSuggestionEventData:{autocompleteSuggestionEventContext:"webAvatarShop",autocompleteSuggestionEventTimeoutDelay:200,searchAutocompleteEvent:"searchAutocomplete",searchTextTrimEvent:"searchTextTrim",catalogSearchEvent:"catalogSearch",searchClearEvent:"searchClear",searchSuggestionClickedEvent:"searchSuggestionClicked",pageName:"Avatar Shop",searchBox:"avatarShopDesktop",searchType:"avatarshopsearch",suggestionSource:"server"},topics:{categoriesToShowTopics:[1,15],maxTopicsToRequest:40,numberOfItemsToSend:10,topicCarouselId:"topic-carousel",topicCarouselScrollValue:500},topicEventData:{topicEventContext:"webAvatarShop",topicSelectEventName:"selectCatalogTopic",topicDeselectEventName:"deselectCatalogTopic",topicClearEventName:"clearAllTopics"},itemTypeIds:{asset:1,bundle:2},topUp:{resetTime:6048e5,robuxThreshold:50,displayCategories:[1]},keywordSearch:{censoredKey:"###"}},Q={common:[""],feature:"Feature.Catalog"},K=Q;var q,X=(0,L.withTranslations)((function(r){var n=r.searchOptions,a=r.catalogQuery,o=r.isKeywordCensored,i=r.getCategoryOption,c=r.setSubcategory,s=r.setCreator,l=r.setCurrencyType,u=r.clearKeyword,d=r.translate,p=n.creators,m=n.defaultCreatorId,f=n.currencyTypes,g=a.category,v=a.subcategory,y=a.minPrice,h=a.maxPrice,b=a.keyword,E=W(n,a),S=E.showCreatorBreadcrumb,C=E.isCreatorAGroup,I=E.creatorBreadcrumb,T=H(n,a),w=T.showFreeBreadcrumb,x=T.showCustomPriceBreadcrumb,N=o||b&&b.length>0,k=(0,e.useState)(!1),A=k[0],P=k[1];(0,e.useEffect)((function(){var e=i(g);if(e&&e.subcategories&&v){var t=e.subcategories[0];P(t.subcategoryId!==v.subcategoryId)}else P(!1)}),[i,g,v]);var F=(0,e.useCallback)((function(e){void 0===e&&(e=!1),l(f?f[0]:null),e||u()}),[u,f,l]),O=(0,e.useCallback)((function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var r=null==p?void 0:p.find((function(e){return e.userId===m}));s(r),e?u():F(t)}),[p,m,u,F,s]),D=(0,e.useCallback)((function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),e?u():O(!1,t)}),[u,O]),U=(0,e.useCallback)((function(){var e=i(g);if(e&&e.subcategories){var t=e.subcategories[0];c(t)}else c(null);D()}),[g,i,D,c]);return t().createElement("div",{id:"catalog-react-breadcrumbs",className:"breadcrumbs"},t().createElement("ul",{className:"breadcrumb-container"},t().createElement("li",null,t().createElement("button",{type:"button",className:"text-link breadcrumb-link",onClick:U},null==g?void 0:g.name)),A&&t().createElement(t().Fragment,null,t().createElement("li",null,t().createElement("span",{className:"icon-right-16x16"})),t().createElement("li",null,t().createElement("button",{type:"button",className:"text-link breadcrumb-link",onClick:D},null==v?void 0:v.name))),(w||x||S)&&t().createElement("li",null,t().createElement("span",{className:"icon-right-16x16"})),S&&t().createElement("li",{className:"breadcrumb-filter"},t().createElement("button",{type:"button",onClick:F},t().createElement("span",{className:"breadcrumb-filter-name"},C&&t().createElement("span",{className:"breadcrumb-group-label"},d("Label.BreadCrumb.Group")),I))),w||x&&t().createElement("li",{className:"breadcrumb-filter"},t().createElement("button",{type:"button",onClick:u},w&&t().createElement("span",{className:"breadcrumb-filter-name"},d("Label.BreadCrumb.Free")),x&&t().createElement("span",{className:"breadcrumb-filter-name"},y&&!h?t().createElement(t().Fragment,null,t().createElement("span",{className:"icon-robux-gray-16x16"}),d("Label.BreadCrumb.PriceAbove",{price:y.toString()})):null,h&&y?t().createElement(t().Fragment,null,t().createElement("span",{className:"icon-robux-gray-16x16"}),y," - ",t().createElement("span",{className:"icon-robux-gray-16x16"}),h):null,h&&!y?t().createElement(t().Fragment,null,t().createElement("span",{className:"icon-robux-gray-16x16"}),d("Label.BreadCrumb.PriceBelow",{price:h.toString()})):null))),N&&t().createElement(t().Fragment,null,t().createElement("li",null,t().createElement("span",{className:"icon-right-16x16"})),t().createElement("li",null,t().createElement("span",{className:"text-link breadcrumb-link"},o?z.keywordSearch.censoredKey:b)))))}),K),$="catalog",J="bundles",Y="bundle",Z={maxSelectedItems:20},ee=function(){return(ee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},te=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},re=(q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",function(e){void 0===e&&(e=12);for(var t="",r=0;r<e;r++)t+=q.charAt(Math.floor(Math.random()*q.length));return t});function ne(){return"Roblox.AvatarMarketplace.Cart:"+(i.CurrentUser.isAuthenticated&&i.CurrentUser.userId||"")}function ae(){var e=ne();return ee({totalPrice:null,currentUserBalance:null,items:[],selectedItems:{},resellers:{},purchaseParams:{},itemDetails:{}},s.localStorageService.getLocalStorage(e))}function oe(e){var t=ne();s.localStorageService.setLocalStorage(t,e)}function ie(e){var t,r,n=e.lowestPrice;return void 0!==e.collectibleItemId&&"ExperiencesDevApiOnly"===e.collectibleItemDetails.saleLocationType?n=e.collectibleItemDetails.lowestResalePrice:i.CurrentUser.isPremiumUser&&void 0!==e.premiumPricing&&void 0!==(null===(t=e.premiumPricing)||void 0===t?void 0:t.premiumPriceInRobux)?n=null===(r=e.premiumPricing)||void 0===r?void 0:r.premiumPriceInRobux:void 0===n&&(n=e.price),n||0}function ce(e){var t=e.items,r=e.itemDetails,n=t.reduce((function(e,t){var n=r[t.itemId];if(void 0===n)return e;var a=ie(n);return a<0&&(a=0),e+(a||0)}),0);return ee(ee({},e),{totalPrice:n})}function se(e,t){var r=e.itemDetails;return t.reduce((function(e,t){if(void 0===r[t.itemId])return e;var n=ie(r[t.itemId]);return n<0&&(n=0),e+(n||0)}),0)}function le(e){return ee(ee({},e),{creatorType:"Group"===e.creatorType?"Group":"User",itemType:"Bundle"===e.itemType?"Bundle":"Asset",price:void 0===e.price?-1:e.price,bundledItems:[]})}function ue(e,t){var r,n=document.querySelectorAll(t);if(null==n?void 0:n.length)for(var a=0;a<n.length;a++){var o=n[a];if(null===(r=o.contains)||void 0===r?void 0:r.call(o,e))return!0}return!1}var de,pe=function(e,t,r){var a=$;return function(e){return e.toLowerCase().includes(Y)}(r)&&(a=J),i.EnvironmentUrls.websiteUrl+"/"+a+"/"+e+"/"+n.seoName.formatSeoName(t)},me={common:[""],feature:"Feature.Catalog"},fe=new i.TranslationResourceProvider,ge={featureCatalog:fe.getTranslationResource(me.feature),featureItem:fe.getTranslationResource("Feature.Item"),featureItemModel:fe.getTranslationResource("Feature.ItemModel")},ve=function(){return ge.featureCatalog.get("Action.Buy",{})},ye=function(){return ge.featureCatalog.get("LabelNoResellers",{})},he=function(e){return ge.featureCatalog.get("Heading.ItemAddedToCart",e)},be=function(e){return ge.featureCatalog.get("Heading.ItemRemovedFromCart",e)},Ee=function(e){return ge.featureCatalog.get("Message.RemainingBalance",e)},Se=function(){return ge.featureCatalog.get("Message.InsufficientFundsForTransaction",{})},Ce=function(){return ge.featureCatalog.get("Label.ShoppingCart",{})},Ie=function(e){return ge.featureCatalog.get("Label.TotalItems",e)},Te=function(e){return ge.featureCatalog.get("Message.PurchaseLimit",e)},we=function(e){return ge.featureCatalog.get("Heading.ItemsRemovedFromCart",e)},xe=function(e){return ge.featureCatalog.get("Heading.ItemsAddedToCart",e)},Ne=function(){return ge.featureItem.get("Label.Free",{})},ke=function(){return ge.featureItem.get("Label.ItemNotForSale",{})},Ae=function(){return(Ae=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Pe=function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}s((n=n.apply(e,t||[])).next())}))},Fe=function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},Oe=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e};function De(e){var t;return Pe(this,void 0,Promise,(function(){var r,n,a,o,i,c;return Fe(this,(function(s){switch(s.label){case 0:return r=ae(),(null==e?void 0:e.item)?(null===(t=r.items)||void 0===t?void 0:t.find((function(t){return t.itemId&&t.itemId===e.item.itemId})))?[2,r]:[4,He([n={itemId:e.item.itemId,itemType:e.item.itemType,itemName:e.item.itemName,collectibleItemId:e.item.collectibleItemId,addedToCardAt:Date.now()}])]:[2,r];case 1:return a=s.sent(),(o=r.itemDetails)[n.itemId]=a[n.itemId],(i=r.selectedItems)[""+e.item.itemType.toLowerCase()+e.item.itemId]=!0,oe(c=ce(Ae(Ae({},r),{itemDetails:o,items:Oe(Oe([],r.items),[n]),selectedItems:i}))),e.displaySystemFeedback&&void 0!==de&&de.success(he({itemName:n.itemName?n.itemName:""}),0,2e3),[2,c]}}))}))}function Ue(e){return Pe(this,void 0,Promise,(function(){var t,r,n,a,o;return Fe(this,(function(i){switch(i.label){case 0:return t=ae(),(null==e?void 0:e.items)?(r=t.selectedItems,n=t.itemDetails,a=e.items.map((function(e){var n;if(null===(n=t.items)||void 0===n?void 0:n.find((function(t){return t.itemId&&t.itemId===e.itemId&&t.itemType===e.itemType})))return null;var a={itemId:e.itemId,itemType:e.itemType,itemName:e.itemName,collectibleItemId:e.collectibleItemId,addedToCardAt:Date.now()};return r[""+e.itemType.toLowerCase()+e.itemId]=!0,a})).filter((function(e){return null!==e})),[4,Promise.all(a.map((function(e){return He([e])})))]):[2,t];case 1:return i.sent().forEach((function(e,t){n[a[t].itemId]=e[a[t].itemId]})),oe(o=ce(Ae(Ae({},t),{itemDetails:n,items:Oe(Oe([],t.items),a),selectedItems:r}))),e.displaySystemFeedback&&void 0!==de&&de.success(xe({itemCount:""+e.items.length}),0,2e3),[2,o]}}))}))}function Re(e){var t,r,n,a=null===(t=null==e?void 0:e.item)||void 0===t?void 0:t.itemId,o=null===(r=null==e?void 0:e.item)||void 0===r?void 0:r.itemType,i=ae(),c="";if(!a)return i;var s=null===(n=(null==i?void 0:i.items)||[])||void 0===n?void 0:n.filter((function(e){return!e.itemId||e.itemId!==a||!e.itemType||e.itemType!==o||(e,c=e.itemName?e.itemName:"",!1)})),l=i.selectedItems,u=i.resellers;delete l[""+o.toLowerCase()+a],delete u[a];var d=ce(Ae(Ae({},i),{selectedItems:Ae({},l),resellers:Ae({},u),items:s}));return oe(d),e.displaySystemFeedback&&void 0!==de&&de.success(be({itemName:c}),0,2e3),d}function Le(e){var t=ae(),r=t.selectedItems,n=t.resellers,a=t.items;e.items.forEach((function(e){var t,o=null==e?void 0:e.itemId,i=null==e?void 0:e.itemType;return!!o&&(a=null===(t=a||[])||void 0===t?void 0:t.filter((function(e){return!e.itemId||e.itemId!==o||!e.itemType||e.itemType!==i||(e,e.itemName?e.itemName:"",!1)})),delete r[""+i.toLowerCase()+o],delete n[o],!0)}));var o=ce(Ae(Ae({},t),{selectedItems:Ae({},r),resellers:Ae({},n),items:a}));return oe(o),e.displaySystemFeedback&&void 0!==de&&de.success(we({itemCount:""+e.items.length}),0,2e3),o}function _e(){var e;return Pe(this,void 0,Promise,(function(){var t,r,n,a,o,i,c,s,l;return Fe(this,(function(u){switch(u.label){case 0:t=ae(),u.label=1;case 1:return u.trys.push([1,6,,7]),(r={items:t.items,selectedItems:t.selectedItems,totalPrice:t.totalPrice,currentUserBalance:t.currentUserBalance,resellers:t.resellers,itemDetails:t.itemDetails}).items||(r.items=[]),(null===(e=r.items)||void 0===e?void 0:e.length)?[4,He(r.items)]:[3,4];case 2:return n=u.sent(),r.items=r.items.map((function(e){var t=null==n?void 0:n[e.itemId];return t?Ae(Ae({},e),{itemName:t.name,collectibleItemId:t.collectibleItemId||null}):e})),Object.keys(n).length&&(r.itemDetails=Ae(Ae({},r.itemDetails),n)),[4,ze(r)];case 3:a=u.sent(),Object.keys(a).length&&(r.resellers=Ae(Ae({},r.resellers),a)),u.label=4;case 4:return o=r.items.map((function(e){return e.itemId.toString()})),i=Object.keys(r.itemDetails),c=Object.keys(r.resellers),o.length!==i.length&&i.forEach((function(e){o.includes(e)||delete r.itemDetails[e]})),o.length!==c.length&&c.forEach((function(e){o.includes(e)||delete r.resellers[e]})),[4,Qe()];case 5:return s=u.sent(),r.currentUserBalance=s,oe(l=ce(r)),[2,l];case 6:return u.sent(),[2,t];case 7:return[2]}}))}))}function Me(e){return Pe(this,void 0,Promise,(function(){return Fe(this,(function(t){return(null==e?void 0:e.type)?"ADD_ITEM"===e.type?[2,De(e)]:"ADD_ITEMS"===e.type?[2,Ue(e)]:"REMOVE_ITEM"===e.type?[2,Re(e)]:"REMOVE_ITEMS"===e.type?[2,Le(e)]:"REFRESH_CART"===e.type?[2,_e()]:[2,console.error('reducer action unknown a "type" property',e)]:[2,console.error('reducer action missing a "type" property',e)]}))}))}var Be=function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}s((n=n.apply(e,t||[])).next())}))},je=function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},Ve=i.EnvironmentUrls.economyApi,Ge=[];function We(e){return void 0===e&&(e=[]),Be(this,void 0,Promise,(function(){var t,r;return je(this,(function(n){switch(n.label){case 0:return t=e.map((function(e){return{id:e.itemId,itemType:e.itemType}})),[4,i.ItemDetailsHydrationService.getItemDetails(t,!1,!0)];case 1:return(r=n.sent())?[2,r.map(le)]:[2,[]]}}))}))}function He(e){return void 0===e&&(e=[]),Be(this,void 0,Promise,(function(){var t,r;return je(this,(function(n){switch(n.label){case 0:return t={},(null==e?void 0:e.length)?(r=function(e){return void 0===e&&(e=[]),e.reduce((function(e,t){var r=e[0],n=e[1];return t.collectibleItemId?[r,te(te([],n),[t])]:[te(te([],r),[t]),n]}),[[],[]])}(e),r[0],r[1],[4,We(e)]):[2,t];case 1:return n.sent().forEach((function(e){t[e.id]=e})),[2,t]}}))}))}function ze(e){return Be(this,void 0,Promise,(function(){var t,r,a,o,c,s,l,u;return je(this,(function(d){switch(d.label){case 0:return t={},e.items,e.itemDetails,r=function(e){var t=e.items,r=e.itemDetails;return t.reduce((function(e,t){var n=e.limited1,a=e.limited2,o=r[t.itemId],i=t.collectibleItemId||o.collectibleItemId;if(i){var c=ee(ee({},t),{collectibleItemId:i});return{limited1:n,limited2:te(te([],a),[c])}}return(null==o?void 0:o.itemRestrictions.includes("Limited"))||(null==o?void 0:o.itemRestrictions.includes("LimitedUnique"))?{limited1:te(te([],n),[t]),limited2:a}:{limited1:n,limited2:a}}),{limited1:[],limited2:[]})}(e),a=r.limited1,o=r.limited2,a.length||o.length?a.length?[4,Promise.all(a.map((function(e){return function(e){var t;return Be(this,void 0,Promise,(function(){var r,a;return je(this,(function(o){switch(o.label){case 0:return e?(r={url:Ve+"/v1/assets/"+e+"/resellers?cursor=&limit=100",withCredentials:!0},[4,n.httpService.get(r)]):[2,{itemId:e,resellers:[]}];case 1:return 200===(a=o.sent()).status&&(null===(t=a.data)||void 0===t?void 0:t.data)?[2,{itemId:e,resellers:a.data.data||[]}]:[2,{itemId:e,resellers:[]}]}}))}))}(e.itemId)})))]:[3,2]:[2,t];case 1:return s=d.sent(),[3,3];case 2:s=[],d.label=3;case 3:return c=s,o.length?[4,Promise.all(o.map((function(e){return function(e,t){var r;return Be(this,void 0,Promise,(function(){var a,o;return je(this,(function(c){switch(c.label){case 0:return e&&t?[4,n.httpService.get({url:i.EnvironmentUrls.apiGatewayUrl+"/marketplace-sales/v1/item/"+t+"/resellers?limit=30",retryable:!0,withCredentials:!0})]:[2,{itemId:e,collectibleItemId:t,resellers:[]}];case 1:return a=c.sent(),o=((null===(r=a.data)||void 0===r?void 0:r.data)||[]).filter((function(e){var t,r;return(null===(r=null===(t=e.seller)||void 0===t?void 0:t.sellerId)||void 0===r?void 0:r.toString())!==i.CurrentUser.userId})),[2,{itemId:e,collectibleItemId:t,resellers:o}]}}))}))}(e.itemId,e.collectibleItemId)})))]:[3,5];case 4:return u=d.sent(),[3,6];case 5:u=[],d.label=6;case 6:return l=u,c.forEach((function(e){e.itemId&&(t[e.itemId]=e.resellers)})),l.forEach((function(e){e.itemId&&(t[e.itemId]=e.resellers)})),[2,t]}}))}))}function Qe(){var e,t;return Be(this,void 0,Promise,(function(){var r,a;return je(this,(function(o){switch(o.label){case 0:return r={url:Ve+"/v1/users/"+i.CurrentUser.userId+"/currency",withCredentials:!0},[4,n.httpService.get(r)];case 1:return 200===(a=o.sent()).status?[2,null!==(t=null===(e=null==a?void 0:a.data)||void 0===e?void 0:e.robux)&&void 0!==t?t:null]:[2,null]}}))}))}var Ke=function(){var e={state:{items:[],selectedItems:{},totalPrice:null,currentUserBalance:null,resellers:{},itemDetails:{}}};function t(e){var t=function(e){var t="s_"+re(8)+Date.now(),r={subscriptionId:t,handler:e};return Ge.push(r),{listeners:Ge,listener:r,subscriptionId:t}}(e);return{remove:function(){var e;e=t.subscriptionId,Ge=Ge.filter((function(t){var r=t.subscriptionId;return!(r&&r===e)}))}}}var r=function(t){return Be(void 0,void 0,void 0,(function(){var r;return je(this,(function(n){switch(n.label){case 0:return[4,Me(t)];case 1:return(r=n.sent())&&(e.state=r,a=r,Ge.forEach((function(e){e.subscriptionId;var t=e.handler;try{null==t||t(a)}catch(e){console.error("emitStateChange err:",e)}}))),[2]}var a}))}))};return function(){return{getCartState:ae,onCartStateChange:t,dispatch:r,getLatestCachedState:function(){return e.state}}}}(),qe=function(){return(qe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Xe=function(e,t){var r,n,a;return{type:"REMOVE_ITEM",item:qe(qe({},e),{itemId:null!==(n=null!==(r=e.itemId)&&void 0!==r?r:e.id)&&void 0!==n?n:null===(a=null==e?void 0:e.item)||void 0===a?void 0:a.id}),displaySystemFeedback:t}},$e=function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}s((n=n.apply(e,t||[])).next())}))},Je=function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},Ye=Ke(),Ze=Ye.getCartState,et=Ye.onCartStateChange,tt=Ye.dispatch,rt=Ye.getLatestCachedState;function nt(){var t=this,r=(0,e.useState)(rt()),n=r[0],a=r[1],o=n.items.map((function(e){return e.itemId})).sort();(0,e.useEffect)((function(){var e=Ze();a(e),tt({type:"REFRESH_CART"}).catch((function(){console.error("could not refresh cart state")}))}),[]),(0,e.useEffect)((function(){var e=et((function(e){return a(e)}));return function(){var t;return null===(t=null==e?void 0:e.remove)||void 0===t?void 0:t.call(e)}}),[]);var i=(0,e.useCallback)((function(e){return o.includes(e)}),[JSON.stringify(o)]);return{dispatch:tt,cart:n,isItemInCart:i,addItemToCart:function(e,r){return $e(t,void 0,void 0,(function(){return Je(this,(function(t){switch(t.label){case 0:return[4,tt({type:"ADD_ITEM",item:e,displaySystemFeedback:r})];case 1:return t.sent(),[2,tt({type:"REFRESH_CART"})]}}))}))},addItemsToCart:function(e,r){return $e(t,void 0,void 0,(function(){return Je(this,(function(t){switch(t.label){case 0:return[4,tt({type:"ADD_ITEMS",items:e,displaySystemFeedback:r})];case 1:return t.sent(),[2,tt({type:"REFRESH_CART"})]}}))}))},removeItemFromCart:function(e,r,n){return $e(t,void 0,void 0,(function(){return Je(this,(function(t){switch(t.label){case 0:return[4,tt({type:"REMOVE_ITEM",item:{itemId:e,itemType:r},displaySystemFeedback:n})];case 1:return t.sent(),[2,tt({type:"REFRESH_CART"})]}}))}))},removeItemsFromCart:function(e,r){return $e(t,void 0,void 0,(function(){return Je(this,(function(t){switch(t.label){case 0:return[4,tt({type:"REMOVE_ITEMS",items:e,displaySystemFeedback:r})];case 1:return t.sent(),[2,tt({type:"REFRESH_CART"})]}}))}))}}}var at=r(7723),ot=r.n(at),it=r(9127),ct=r.n(it),st=r(990),lt=r.n(st);var ut=Object.keys({Keyword:"example keyword",TriggeredByTopicDiscovery:!0,topics:"example topic",Category:1,Subcategory:2,Gears:3,CreatorID:1234,CreatorType:"example type",CreatorName:"Example Name",CurrencyType:1,pxMin:100,pxMax:1e3,salesTypeFilter:2,SortType:1,SortAggregation:1,IncludeNotForSale:!0});var dt={New:{class:"status-new",label:"Label.New"},Sale:{class:"status-sale",label:"Label.Sale"},XboxExclusive:{class:"status-default has-text",label:"Label.Xbox"},AmazonExclusive:{class:"status-default has-text",label:"Label.Amazon"},GooglePlayExclusive:{class:"status-default has-text",label:"Label.GoogleOnly"},IosExclusive:{class:"status-default has-text",label:"Label.AppleOnly"},SaleTimer:{isIcon:!0,type:"icon-clock"}},pt=function(){return(pt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},mt=function(){function e(){}return e.buildItemDetailsUrl=function(e){var t=e.itemType,r=e.id,n=z.itemTypes;switch(t){case n.bundle:return i.Endpoints.getAbsoluteUrl?i.Endpoints.getAbsoluteUrl("/bundles/"+r+"/"):i.EnvironmentUrls.websiteUrl+"/bundles/"+r+"/";case n.asset:default:return i.Endpoints.getAbsoluteUrl?i.Endpoints.getAbsoluteUrl("/catalog/"+r+"/"):i.EnvironmentUrls.websiteUrl+"/catalog/"+r+"/"}},e.getNameForDisplay=function(e){var t=z.userTypes,r=z.robloxSystemUserId,a=e.creatorName,o=e.creatorType,c=e.creatorTargetId;return t.user===o&&r!==c&&i.DisplayNames.Enabled()?n.concatTexts.concat(["",a]):a},e.getQueriesValueIntoInt=function(e){var t={};return e.forEach((function(e,r){var n=parseInt(e,10);"Category"===r?t.Category=n:"Subcategory"===r?t.Subcategory=n:"SortType"===r?t.SortType=n:"SortAggregation"===r?t.SortAggregation=n:"CurrencyType"===r?t.CurrencyType=n:"Gears"===r?t.Gears=n:"CreatorID"===r?t.CreatorID=n:"pxMin"===r?t.pxMin=n<0?0:n:"pxMax"===r?t.pxMax=n<0?0:n:"salesTypeFilter"===r?t.salesTypeFilter=n:"IncludeNotForSale"===r?"false"!==e&&(t.IncludeNotForSale=!0):"Keyword"===r?t.Keyword=e:"topics"===r?t.topics=e:"CreatorType"===r?t.CreatorType=e:"CreatorName"===r?t.CreatorName=e:"TriggeredByTopicDiscovery"===r&&(t.TriggeredByTopicDiscovery="true"===e)})),t},e.getCatalogContentKey=function(e){var t=e.id;return e.itemType+"_"+t},e.updateSearchItemDetails=function(t,r){t&&t.forEach((function(t){var n=t.key,a=pt(pt({},t),{detailsUrl:e.buildItemDetailsUrl(t),nameForDisplay:e.getNameForDisplay(t),detailsLoaded:!0});Object.assign(r[n],a)}))},e.formatQueries=function(e,t){var r={};return Object.entries(e).forEach((function(e){var t=e[0],n=e[1],a=t;"Category"===a?r.category=n:"Subcategory"===a||"Gears"===a?r.subcategory=n:"topics"===a?r.topics=n:"SortType"===a?r.sortType=n:"SortAggregation"===a?r.sortAggregation=n:"Keyword"===a?r.keyword=n:"pxMin"===a?r.minPrice=n:"pxMax"===a?r.maxPrice=n:"TriggeredByTopicDiscovery"===a?r.TriggeredByTopicDiscovery=n:"CreatorID"===a?r.creatorTargetId=n:"CreatorType"===a?r.creatorType=n:"CreatorName"===a?r.creatorName=n:"IncludeNotForSale"===a?r.includeNotForSale=n:"salesTypeFilter"===a&&(r.salesTypeFilter=n)})),t&&(r.cursor=t),r},e.appendQueryParamsToUrl=function(e,t){var r=new URL(window.location.href),n=new URLSearchParams(r.search);ut.forEach((function(e){n.has(e)&&n.delete(e)})),Object.entries(e).forEach((function(e){var t=e[0],r=e[1];null!=r&&(!0===r||n.set(t,r.toString()))}));var a=n.toString();Object.entries(e).forEach((function(e){var t=e[0];!0===e[1]&&(a+="&"+t)}));var o=""+r.origin+r.pathname+"?"+a;o!==window.location.href&&(window.history.pushState({path:o},"",o),t(o))},e.mapItemRestrictionIcons=function(e){var t={isLimited:!1,isRthro:!1,isThirteenPlus:!1,isLimitedUnique:!1,itemRestrictionIcon:"",isCollectible:!1,isDynamicHead:!1};if(e&&e.itemRestrictions){var r=z.itemTypes,n=z.itemRestrictionTypes,a=z.itemRestrictionIcons,o=e.itemRestrictions;t.isLimited=o.includes(n.limited),t.isCollectible=o.includes(n.collectible),t.isRthro=o.includes(n.rthro),t.isDynamicHead=o.includes(n.dynamicHead),t.isThirteenPlus=o.includes(n.thirteenPlus),t.isLimitedUnique=o.includes(n.limitedUnique),e.itemType===r.bundle?t.isLimited?t.itemRestrictionIcon=t.isRthro?a.rthroLimitedLabel:a.rthroLabel:t.isDynamicHead?t.itemRestrictionIcon=a.dynamicHead:t.isCollectible&&(t.itemRestrictionIcon=a.collectible):t.isLimitedUnique?t.itemRestrictionIcon=t.isThirteenPlus?a.thirteenPlusLimitedUnique:a.limitedUnique:t.isLimited?t.itemRestrictionIcon=t.isThirteenPlus?a.thirteenPlusLimited:a.limited:t.isThirteenPlus?t.itemRestrictionIcon=a.thirteenPlus:t.isDynamicHead?t.itemRestrictionIcon=a.dynamicHead:t.isCollectible&&(t.itemRestrictionIcon=a.collectible)}return t},e.mapItemStatusIconsAndLabels=function(e,t){if(e&&e.itemStatus){var r=[];return e.itemStatus.forEach((function(e){var n=dt[e];n&&(!function(e){return void 0!==e.isIcon}(n)?r.push({class:n.class,label:t(n.label)}):r.push(n))})),r}},e.translateToEnumStrings=function(e,t){var r={category:null,subcategory:null},n=t.category,a=t.subcategory,o=t.gears;if(n&&e&&e[n]){var i=e[n],c=i.categoryEnum,s=i.subcategoryEnums;if(r=pt(pt({},r),{category:c}),s){var l=null;o?l=s[o]:a&&(l=s[a]),l&&(r=pt(pt({},r),{subcategory:l}))}}return pt(pt({},t),r)},e.buildUserLink=function(e){var t=e||{},r=t.creatorType,n=t.creatorTargetId,a=z.userTypes;switch(r){case a.group:return i.Endpoints.getAbsoluteUrl("/groups/"+n);case a.user:default:return i.Endpoints.getAbsoluteUrl("/users/"+n+"/profile")}},e.formatTopic=function(e){return e.toLowerCase()},e.buildTopicKeyword=function(t,r){var n="";return t.forEach((function(t){n.length>0&&(n+=r),n+=e.formatTopic(t.displayName)})),n},e.getCategoryMenu=function(e,t){if(void 0!==t)return null==e?void 0:e.find((function(e){return e.categoryId===t}))},e.isKeywordResultCensored=function(e){return e===z.keywordSearch.censoredKey},e.buildErrorMessages=function(e,t){var r="userId-"+i.CurrentUser.userId;return e&&e.length>0&&e.forEach((function(e){var t=e.code,n=e.message;r+="-code-"+(t||"")+"-message-"+n})),r+="-userAgent-"+t},e}(),ft=function(){function e(){}return e.sendSearchAutocompleteEvent=function(e,t,r,a,o,c,s,l){i.EventStream&&i.EventStream.SendEventWithTarget(z.autocompleteSuggestionEventData.searchAutocompleteEvent,z.autocompleteSuggestionEventData.searchType,{algorithm:e,maxResults:s,timeoutDelay:z.autocompleteSuggestionEventData.autocompleteSuggestionEventTimeoutDelay,suggestions:t,kwd:r,previouskwd:a,page:n.pageName.PageNameProvider.getInternalPageName(),searchBox:z.autocompleteSuggestionEventData.searchBox,locale:o,searchType:z.autocompleteSuggestionEventData.searchType,latency:c,suggestionSource:z.autocompleteSuggestionEventData.suggestionSource,isPersonalizedBasedOnPreviousQuery:l},i.EventStream.TargetTypes.WWW)},e.sendSearchTextTrimEvent=function(e,t){i.EventStream&&i.EventStream.SendEventWithTarget(z.autocompleteSuggestionEventData.searchTextTrimEvent,z.autocompleteSuggestionEventData.searchType,{kwd:e,resultingkwd:t,searchType:z.autocompleteSuggestionEventData.searchType},i.EventStream.TargetTypes.WWW)},e.sendCatalogSearchEvent=function(e){i.EventStream&&i.EventStream.SendEventWithTarget(z.autocompleteSuggestionEventData.catalogSearchEvent,z.autocompleteSuggestionEventData.searchType,{autoCompleteFlag:e,previousPage:n.pageName.PageNameProvider.getInternalPageName()},i.EventStream.TargetTypes.WWW)},e.sendSearchClearEvent=function(e){i.EventStream&&i.EventStream.SendEventWithTarget(z.autocompleteSuggestionEventData.searchClearEvent,z.autocompleteSuggestionEventData.searchType,{kwd:e,searchType:z.autocompleteSuggestionEventData.searchType,page:n.pageName.PageNameProvider.getInternalPageName()},i.EventStream.TargetTypes.WWW)},e.sendSearchSuggestionClickedEvent=function(e,t,r,n){i.EventStream&&i.EventStream.SendEventWithTarget(z.autocompleteSuggestionEventData.searchSuggestionClickedEvent,z.autocompleteSuggestionEventData.searchType,{kwd:e,searchType:z.autocompleteSuggestionEventData.searchType,suggestionPosition:t,suggestionClicked:r,suggestions:n,maxResults:0},i.EventStream.TargetTypes.WWW)},e.sendTopicSelectedEvent=function(e,t,r,n,a,o,c){i.EventStream&&i.EventStream.SendEventWithTarget(z.topicEventData.topicSelectEventName,z.topicEventData.topicEventContext,{topic:e,rank:t+1,categoryName:r,subcategoryName:n,query:a,allTopics:o,previousSelectedTopics:c},i.EventStream.TargetTypes.WWW)},e.sendTopicDeselectedEvent=function(e,t,r,n,a,o){i.EventStream&&i.EventStream.SendEventWithTarget(z.topicEventData.topicDeselectEventName,z.topicEventData.topicEventContext,{topic:e,rank:t+1,categoryName:r,subcategoryName:n,query:a,allTopics:o},i.EventStream.TargetTypes.WWW)},e.sendTopicClearedEvent=function(e,t,r,n){i.EventStream&&i.EventStream.SendEventWithTarget(z.topicEventData.topicClearEventName,z.topicEventData.topicEventContext,{categoryName:e,subcategoryName:t,query:r,allTopics:n},i.EventStream.TargetTypes.WWW)},e}(),gt=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},vt=function(t,r,n,a,o,i){var c=(0,e.useState)(0),s=c[0],l=c[1],u=i.current,d=(0,e.useCallback)((function(){u&&l(u.scrollWidth-u.offsetWidth)}),[u]);(0,e.useEffect)((function(){return d(),window.addEventListener("resize",d),function(){return window.removeEventListener("resize",d)}}),[d]),(0,e.useEffect)((function(){d()}),[r,t.topics,d]);var p=(0,e.useState)(0),m=p[0],f=p[1];(0,e.useEffect)((function(){f(0)}),[r]);var g=(0,e.useState)(),v=g[0],y=g[1],h=(0,e.useState)(),b=h[0],E=h[1],S=(0,e.useState)(),C=S[0],I=S[1];(0,e.useEffect)((function(){var e,r=s>0&&m>0;y(r),E(s>0&&m+1<s);var n=!r&&!!(null===(e=t.topics)||void 0===e?void 0:e.length);I(n)}),[m,s,t.topics]),(0,e.useEffect)((function(){var e=u,t=function(t){e&&f(e.scrollLeft)};return e&&e.addEventListener("scroll",t,!0),function(){e&&e.removeEventListener("scroll",t,!0)}}),[u]);var T=function(){a(!0)};return{showLeftTopicNavigationButton:v,onTopicNavigationButtonClicked:function(e){var t=u;if(t){var r=t.scrollLeft;e?(t.scrollLeft-=z.topics.topicCarouselScrollValue,r-=z.topics.topicCarouselScrollValue):(t.scrollLeft+=z.topics.topicCarouselScrollValue,r+=z.topics.topicCarouselScrollValue),f(r)}},showClearTopicNavigationButton:C,onTopicClearButtonClicked:function(){var e,n;ft.sendTopicClearedEvent(null===(e=t.category)||void 0===e?void 0:e.name,null===(n=t.subcategory)||void 0===n?void 0:n.name,t.keyword,mt.buildTopicKeyword(r,",")),o(),T()},onTopicClicked:function(e){var a=t.category,o=t.subcategory,i=t.keyword,c=t.topics,s=c.indexOf(e),l=gt([],c);s>-1?(ft.sendTopicDeselectedEvent(e.displayName,s,null==a?void 0:a.name,null==o?void 0:o.name,i,mt.buildTopicKeyword(r,",")),l=l.filter((function(e,t){return t!==s}))):(ft.sendTopicSelectedEvent(e.displayName,r.indexOf(e),null==a?void 0:a.name,null==o?void 0:o.name,i,mt.buildTopicKeyword(r,","),mt.buildTopicKeyword(c,",")),l.push(e)),n(l),l.length||T(),u&&(u.scrollLeft=0,f(0))},showRightTopicNavigationButton:b}};var yt=function(r){var n=r.topicBasedBrowsingEnabledForCategory,a=r.catalogQuery,o=r.topics,i=r.setSelectedTopics,c=r.onClearFilters,s=r.clearTopics,l=(0,e.useRef)(null),u=vt(a,o,i,c,s,l),d=u.showLeftTopicNavigationButton,p=u.onTopicNavigationButtonClicked,m=u.showClearTopicNavigationButton,f=u.onTopicClearButtonClicked,g=u.onTopicClicked,v=u.showRightTopicNavigationButton;return t().createElement(t().Fragment,null,n&&t().createElement("div",{className:"topic-container"},d&&t().createElement("span",{className:"topic-navigation-left topic-navigation-blur-left"},t().createElement("button",{type:"button",className:"topic-navigation-button",onClick:function(){return p(!0)}},t().createElement("span",{className:"icon-left-gray"}))),m&&t().createElement("span",{className:"topic-navigation-clear"},t().createElement("button",{type:"button",className:"topic-navigation-button",onClick:f},t().createElement("span",{className:"icon-actions-clear-sm"}))),t().createElement("span",{className:"topic-carousel",id:"topic-carousel",ref:l},a.topics.map((function(e){return t().createElement("button",{type:"button",key:e.displayName+"-"+e.originalTopicName,className:"topic selected-topic selected-topic-react",onClick:function(){return g(e)}},mt.formatTopic(e.displayName),t().createElement("span",{className:"icon-close"}))})),o.map((function(e){return t().createElement("button",{type:"button",key:e.displayName+"-"+e.originalTopicName,className:"topic unselected-topic",onClick:function(){return g(e)}},mt.formatTopic(e.displayName))}))),(!a.topics||!o||0===a.topics.length&&0===o.length)&&t().createElement("span",{className:"topic-carousel-placeholder"}),v&&t().createElement("span",{className:"topic-navigation-right topic-navigation-blur-right"},t().createElement("button",{type:"button",className:"topic-navigation-button",onClick:function(){return p(!1)}},t().createElement("span",{className:"icon-right-gray"})))))};var ht=function(t,r,n,a,o){var i=(0,e.useState)(),c=i[0],s=i[1],l=(0,e.useState)(),u=l[0],d=l[1],p=!(t.isSearchItemsLoaded&&u)&&!t.searchItemsError;return(0,e.useEffect)((function(){if(d(!1),s(void 0),null!==n&&t.isSearchItemsLoaded){var e=[];if(n.length){if(null==r)return;e=function(e,t){var r=[];return t.forEach((function(t){if(t in e){var n=e[t];r.push(n)}})),r}(r,n)}var i=-1;if(a||(i=o),-1===i)s(e);else{var c=e.slice(0,i);s(c)}d(!0)}}),[r,n,o,t.isSearchItemsLoaded,a]),{orderedItems:c,showShimmer:p}};var bt=(0,L.withTranslations)((function(r){var n,a,o=r.layout,i=r.topicBasedBrowsingEnabledForCategory,c=r.topUp,s=r.fetchNextPage,l=r.canLoadNextPage,u=r.searchResultDict,d=r.searchResultList,p=r.isPaginationEnabled,m=r.isInfiniteScrollDisabled,f=r.catalogQuery,g=r.isKeywordCensored,v=r.searchOptions,y=r.library,h=r.topics,b=r.getCategoryOption,E=r.setSubcategory,S=r.setCreator,C=r.setCurrencyType,I=r.clearKeyword,T=r.onTopUpClear,w=r.setSelectedTopics,x=r.onClearFilters,N=r.clearTopics,k=r.translate,A=v.isSearchOptionsLoaded,P=nt(),F=P.isItemInCart,O=P.addItemToCart,D=P.removeItemFromCart,U=p&&!m,R=(0,e.useCallback)((function(){return f.category&&z.expandedCategoryList.includes(f.category.category)||p?z.numberOfSearchItemsExpanded:y.isFullScreen?z.numberOfSearchItemsForFullScreen:null===d?0:d.length}),[f.category,p,y.isFullScreen,d]),L=(0,e.useState)(0),j=L[0],W=L[1];(0,e.useEffect)((function(){W(R())}),[R]);var H=y.initialized&&!y.isPhone,Q=null!==d&&d.length>z.numberOfSearchItemsExpanded,K=!!(c.featureEnabled&&c.showTopUp&&void 0!==c.robuxMinThreshold&&void 0!==c.robuxMaxThreshold&&void 0!==c.currentUserBalance&&c.currentUserBalance>c.robuxMinThreshold&&c.currentUserBalance<=c.robuxMaxThreshold&&f.category&&(null===(n=c.displayCategories)||void 0===n?void 0:n.includes(f.category.categoryId))&&void 0===f.keyword&&!(null===(a=f.topics)||void 0===a?void 0:a.length)&&c.headerText),q=ht(o,u,d,p,j),$=q.orderedItems,J=q.showShimmer,Y=(0,e.useRef)(null);(0,e.useEffect)((function(){var e=new IntersectionObserver((function(e){e[0].isIntersecting&&s()}),{threshold:1}),t=Y.current;return t&&e.observe(t),function(){t&&e.unobserve(t)}}),[Y,s]);var Z=function(e){T(),e.stopPropagation()},ee=!(null==$?void 0:$.length);return t().createElement("div",{id:"react-items-container",className:"catalog-results"},!A&&t().createElement("h2",{className:"featured-items-heading"},t().createElement("span",{className:"shimmer-lines"},t().createElement("span",{className:"placeholder shimmer-line"}))),H&&t().createElement("div",null,t().createElement(X,{catalogQuery:f,searchOptions:v,getCategoryOption:b,setSubcategory:E,setCreator:S,setCurrencyType:C,clearKeyword:I,isKeywordCensored:g})),t().createElement(yt,{topicBasedBrowsingEnabledForCategory:i,catalogQuery:f,topics:h,setSelectedTopics:w,onClearFilters:x,clearTopics:N}),K&&t().createElement("div",{className:"top-up-container"},c.giftCard?t().createElement("div",{className:"gift-card",onClick:function(){window.location.href=c.buttonUrl},onKeyPress:function(e){"Enter"!==e.key&&"Space"!==e.key||(window.location.href=c.buttonUrl)},tabIndex:0,role:"link"},t().createElement("div",{className:"top-up-background"}),t().createElement("img",{src:ot(),className:"top-up-gift-card-back",alt:""}),t().createElement("img",{src:ct(),className:"top-up-gift-card-front",alt:""}),t().createElement("div",{className:"top-up-body"},t().createElement("h1",{className:"top-up-header"},k(c.headerText)),t().createElement("div",{className:"top-up-message"},k(c.messageText)),t().createElement("a",{className:"top-up-button btn-cta-md",href:c.buttonUrl,target:"_self"},k(c.buttonText))),t().createElement("button",{type:"button","aria-label":"Close top up",className:"top-up-close-background transparent-button",onClick:Z}),t().createElement("button",{type:"button","aria-label":"Close top up",className:"top-up-close icon-close transparent-button",onClick:Z})):t().createElement("div",{className:"robux",onClick:function(){window.location.href=c.buttonUrl},onKeyPress:function(e){"Enter"!==e.key&&"Space"!==e.key||(window.location.href=c.buttonUrl)},tabIndex:0,role:"link"},t().createElement("div",{className:"top-up-background"}),t().createElement("div",{className:"top-up-robux"}),t().createElement("img",{src:lt(),className:"top-up-chest",alt:""}),t().createElement("div",{className:"top-up-body"},t().createElement("h1",{className:"top-up-header"},k(c.headerText||"")),t().createElement("div",{className:"top-up-message"},k(c.messageText)),t().createElement("a",{className:"top-up-button btn-cta-md",href:c.buttonUrl,target:"_self"},k(c.buttonText))),t().createElement("button",{type:"button","aria-label":"Close top up",className:"top-up-close-background transparent-button",onClick:Z}),t().createElement("button",{type:"button","aria-label":"Close top up",className:"top-up-close icon-close transparent-button",onClick:Z}))),t().createElement("div",{id:"results",className:"results-container"},o.searchItemsError&&!o.loading&&t().createElement("div",{className:"section-content-off"},k("no_results"===o.searchItemsError?"Response.NoItemsFound":"Response.TemporarilyUnavailable")),t().createElement("ul",{className:V()("hlist item-cards-stackable",{faded:!p&&o.loading})},null==$?void 0:$.map((function(e){var r,n={isItemInCart:F(e.id),addItemToCart:O,removeItemFromCart:D};return t().createElement(_.ItemCard,{key:e.id,id:e.id,name:e.name,type:e.itemType,creatorName:e.creatorName,creatorType:e.creatorType,creatorTargetId:e.creatorTargetId,price:e.price,lowestPrice:e.lowestPrice,unitsAvailableForConsumption:e.unitsAvailableForConsumption,itemStatus:e.itemStatus,priceStatus:e.priceStatus,premiumPricing:null===(r=e.premiumPricing)||void 0===r?void 0:r.premiumPriceInRobux,itemRestrictions:e.itemRestrictions,thumbnail2d:t().createElement(M.Thumbnail2d,{type:_.ItemCardUtils.checkIfBundle(e.itemType)?M.ThumbnailTypes.bundleThumbnail:M.ThumbnailTypes.assetThumbnail,targetId:e.id,size:M.DefaultThumbnailSize}),iconToRender:e.creatorHasVerifiedBadge?t().createElement(B.VerifiedBadgeIconContainer,{overrideImgClass:"verified-badge-icon-catalog-item-rendered",size:B.BadgeSizes.TITLE,titleText:e.creatorTargetId.toString()}):void 0,shoppingCartProps:n})}))),o.initialized&&o.loading&&t().createElement("div",{className:"spinner spinner-sm"}),J&&t().createElement(G,{numberOfItemsToDisplay:j})),p&&t().createElement(t().Fragment,null,U?t().createElement("div",{ref:Y,style:{height:"1px",backgroundColor:"transparent"}}):!ee&&!o.loading&&l&&t().createElement("div",{className:"load-more-btn-container"},t().createElement("button",{type:"button",className:"btn-primary-md",onClick:s},t().createElement("span",null," ",k("Action.LoadMore")," "))),!ee&&t().createElement(t().Fragment,null,o.loading&&t().createElement("div",{className:"spinner spinner-default spinner-infinite-scroll"}),!o.loading&&Q&&t().createElement("button",{"aria-label":"Back to top",type:"button",className:"scroll-to-top icon-back-to-top",onClick:function(){window.scrollTo({top:0,behavior:"smooth"})}}))))}),Q);var Et=(0,L.withTranslations)((function(r){var n,a=r.currentCategory,o=r.currentSubcategory,i=r.category,c=r.updateCategory,s=r.categoryClick,l=r.categoryNameClick,u=r.translate,d=(0,e.useState)(),p=d[0],m=d[1];return(0,e.useEffect)((function(){var e=null==a?void 0:a.categoryId;e&&i.categoryId===e&&m(!0)}),[i.categoryId,null==a?void 0:a.categoryId]),t().createElement("li",{className:"font-header-2 text-subheader panel panel-default"},t().createElement("div",{id:"expandable-menu-category-"+i.categoryId,className:"small text menu-link text-link-secondary panel-heading panel-heading-div panel-heading-layered-clothing-ui",role:"tab"},t().createElement("button",{type:"button",className:"category-name btn-text",onClick:function(e){return l(e,i)}},i.name),function(e){var t=e.subcategories;return t&&t.length>0}(i)&&t().createElement("button",{type:"button",className:V()("toggle-submenu","btn-text",{"icon-up":p,"icon-down":!p}),onClick:function(e){s(e,i),m(!p)},"aria-label":u(p?"Action.Collapse":"Action.Expand")})),t().createElement("div",{className:V()("panel-collapse",{collapse:!p})},t().createElement("ul",{className:"subcategory-menu"},null===(n=i.subcategories)||void 0===n?void 0:n.map((function(e){return t().createElement("li",{key:e.subcategoryId,className:"top-border"},t().createElement("button",{type:"button",className:V()("small","text","menu-link","text-link-secondary","btn-text",{active:(null==a?void 0:a.categoryId)===i.categoryId&&(null==o?void 0:o.subcategoryId)===e.subcategoryId}),onClick:function(t){return c(t,!1,!0,i,e)}},e.name))})))))}),Q);var St=function(e){var r=e.salesTypeFilters,n=e.salesTypeFilter,a=e.onSalesTypeFilterChanged;return t().createElement("ul",null,r.map((function(e){return t().createElement("li",{key:e.filter,className:"radio top-border font-caption-body"},t().createElement("input",{type:"radio",name:"radio-sales-type",id:"radio-sales-type-"+e.filter,value:e.filter,checked:(null==n?void 0:n.filter)===e.filter,onChange:function(){return a(e.filter)}}),t().createElement("label",{htmlFor:"radio-sales-type-"+e.filter},e.name))})))};var Ct=function(e){var r=e.sortMenus,n=e.sortType,a=e.onSortTypeChanged,o=e.sortAggregation,i=e.onSortAggregationChanged,c="number"==typeof o?o:null==o?void 0:o.sortAggregation;return t().createElement("ul",null,r.sortOptions.map((function(e){return t().createElement("li",{key:e.sortType,className:"radio top-border font-caption-body"},t().createElement("input",{type:"radio",name:"radio-sort-option",id:"radio-sort-option-"+e.sortType,checked:(null==n?void 0:n.sortType)===e.sortType,onChange:function(){return a(e.sortType)}}),t().createElement("label",{htmlFor:"radio-sort-option-"+e.sortType},e.name),e.hasSubMenu&&(null==n?void 0:n.sortType)===e.sortType&&t().createElement("ul",null,r.sortAggregations.map((function(e){return t().createElement("li",{key:e.sortAggregation,className:"radio top-border font-caption-body"},t().createElement("input",{type:"radio",name:"radio-sort-aggregation",id:"radio-sort-aggregation-"+e.sortAggregation,checked:c===e.sortAggregation,onChange:function(){return i(e.sortAggregation)}}),t().createElement("label",{htmlFor:"radio-sort-aggregation-"+e.sortAggregation},e.name))}))))})))};var It=(0,L.withTranslations)((function(e){var r=e.includeNotForSale,n=e.onUnavailableFilterChanged,a=e.translate;return t().createElement("ul",null,t().createElement("li",{className:"radio top-border font-caption-body"},t().createElement("input",{type:"radio",name:"radio-unavailable",id:"radio-unavailable-hide",checked:!r,onChange:function(){return n(!1)}}),t().createElement("label",{htmlFor:"radio-unavailable-hide"},a("Label.Filter.Hide"))),t().createElement("li",{className:"radio top-border font-caption-body"},t().createElement("input",{type:"radio",name:"radio-unavailable",id:"radio-unavailable-show",checked:r,onChange:function(){return n(!0)}}),t().createElement("label",{htmlFor:"radio-unavailable-show"},a("Label.Filter.Show"))))}),Q);var Tt=(0,L.withTranslations)((function(e){var r=e.creators,n=e.selectedCreator,a=e.creatorNameInputValue,o=e.setCreatorNameInputValue,i=e.robloxUserId,c=e.isUGCOnly,s=e.isPhone,l=e.onCreatorChanged,u=e.applyCreatorNameToQuery,d=e.customText,p=e.isSearchOnBlurEnabled,m=e.translate;return t().createElement("ul",null,r.map((function(e){return function(e){var r=e.userId===d||"number"==typeof e.userId&&e.userId>=2;return t().createElement("li",{key:e.userId,className:"radio top-border font-caption-body",style:{display:e.userId===i&&c?"none":"block"}},t().createElement("input",{type:"radio",name:"radio-creator",id:"radio-creator-"+e.userId,checked:(null==n?void 0:n.userId)===e.userId,onChange:function(){return l(e)}}),!r&&t().createElement("label",{htmlFor:"radio-creator-"+e.userId},e.name),r&&t().createElement("label",{htmlFor:"radio-creator-custom",className:"has-input creator-name-input"},t().createElement("input",{className:"form-control input-field username-input font-caption-body",type:"text",name:"creatorName",placeholder:m("Label.Username"),maxLength:20,value:a,onChange:function(e){var t=e.target.value;o(t),p&&u(t)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),u(a))},onFocus:function(){(null==n?void 0:n.userId)!==e.userId&&l(e)},required:s&&(null==n?void 0:n.userId)===e.userId}),t().createElement("button",{type:"button",className:"btn-secondary-xs btn-update-filter",disabled:!a.length,onClick:function(){u(a)}},m("Action.Go"))))}(e)})))}),K);function wt(e){if(!(null==e?void 0:e.trim()))return"";var t=Number(e);return Number.isNaN(t)||!Number.isFinite(t)?"":t<0?0:t=Math.floor(t)}function xt(e){return""===e?void 0:e}var Nt=(0,L.withTranslations)((function(r){var n=r.currencyTypes,a=r.selectedCurrencyType,o=r.maxPrice,i=r.minPrice,c=r.maxPriceInputValue,s=r.minPriceInputValue,l=r.setMaxPriceInputValue,u=r.setMinPriceInputValue,d=r.showCurrencyType,p=r.robuxFilterId,m=r.customRobuxFilterId,f=r.applyMinPriceToQuery,g=r.applyMaxPriceToQuery,v=r.onCurrencyTypeChanged,y=r.isSearchOnBlurEnabled,h=r.translate;(0,e.useEffect)((function(){u(null==i?"":i)}),[i,u]),(0,e.useEffect)((function(){l(null==o?"":o)}),[o,l]);var b=function(){var e=xt(s);f(e);var t=xt(c);g(t)};return n?t().createElement("ul",null,n.filter(d).map((function(e){return t().createElement("li",{key:e.currencyType,className:"radio top-border font-caption-body"},t().createElement("input",{type:"radio",name:"radio-price",id:"radio-price-"+e.currencyType,checked:(null==a?void 0:a.currencyType)===e.currencyType,onChange:function(){v(e)}}),e.currencyType!==p&&e.currencyType!==m?t().createElement("label",{htmlFor:"radio-price-"+e.currencyType},e.name):t().createElement("label",{htmlFor:"radio-price-"+e.currencyType,className:"has-input price-min-max-input"},t().createElement("input",{className:"form-control input-field input-number price-input font-caption-body",type:"number",pattern:"[0-9]*",min:"0",name:"minPrice",placeholder:h("Label.Filter.PriceMin"),value:s,onChange:function(e){var t=wt(e.target.value);if(u(t),y){var r=xt(t);f(r)}},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),b())},onFocus:function(){v(e)}}),t().createElement("input",{className:"form-control input-field input-number price-input font-caption-body",type:"number",pattern:"[0-9]*",min:"0",name:"maxPrice",placeholder:h("Label.Filter.PriceMax"),value:c,onChange:function(e){var t=wt(e.target.value);if(l(t),y){var r=xt(t);g(r)}},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),b())},onFocus:function(){e!==a&&v(e)}}),t().createElement("button",{type:"button",className:"btn-secondary-xs btn-update-filter",disabled:(null==a?void 0:a.currencyType)!==p&&(null==a?void 0:a.currencyType)!==m,onClick:b},h("Action.Go"))))}))):null}),K);var kt=(0,L.withTranslations)((function(r){var n,a=r.searchOptions,o=r.isPhone,i=r.isMobile,c=r.catalogQuery,s=r.displayedQuery,l=r.setCreatorNameForDisplay,u=r.setMinPriceForDisplay,d=r.setMaxPriceForDisplay,p=r.updateCategory,m=r.categoryClick,f=r.categoryNameClick,g=r.isCurrentCategorySearchable,v=r.menuConstantsCategoryTypesCommunityCreations,y=r.onSalesTypeFilterChanged,h=r.onSortTypeChanged,b=r.onSortAggregationChanged,E=r.onUnavailableFilterChanged,S=r.onCreatorChanged,C=r.applyCreatorNameToQuery,I=r.applyMinPriceToQuery,T=r.applyMaxPriceToQuery,w=r.onCurrencyTypeChanged,x=r.isSearchOnBlurEnabled,N=r.translate,k=r.closeSearchOptions,A=r.resetFilters,P=g,F=a.categories,O=a.defaultCategoryId,D=a.freeFilterId,U=a.hasSearchOptionsError,R=a.salesTypeFilters,L=a.creators,_=a.robloxUserId,M=a.customText,B=a.robuxFilterId,j=a.customRobuxFilterId,G=a.sortMenus,W=a.currencyTypes,H=c.sortType,z=c.sortAggregation,Q=c.includeNotForSale,K=c.salesTypeFilter,q=c.creator,X=c.currencyType,$=c.maxPrice,J=c.minPrice,Y=c.category,Z=c.subcategory,ee=(0,e.useState)(!1),te=ee[0],re=ee[1];(0,e.useEffect)((function(){re((null==Y?void 0:Y.categoryId)===v)}),[null==Y?void 0:Y.categoryId,v]);var ne=(0,e.useCallback)((function(e){return!(!Y||!e)&&!(Y.categoryId===O&&e.currencyType===D)}),[Y,O,D]);return t().createElement("div",{id:"search-options",className:"search-options"},t().createElement("form",{className:V()("search-options-form",{"border-right":!i}),noValidate:!0},U?t().createElement("div",{className:"section-content-off"},N("Response.GenericError")):t().createElement("div",null,t().createElement("div",{className:"border-bottom category-section"},t().createElement("h2",{className:"font-header-1 search-options-header"},N("Heading.CatalogCategory")),t().createElement("ul",{id:"category-panel-group",className:"panel-group"},null==F?void 0:F.map((function(e){return t().createElement(Et,{key:e.categoryId,currentCategory:Y,currentSubcategory:Z,category:e,updateCategory:p,categoryClick:m,categoryNameClick:f})})))),P&&t().createElement("div",null,t().createElement("h2",{className:"font-header-1 search-options-header filters-header"},N("Label.Filter.Filters")),t().createElement("div",{className:V()("filters-section",{"border-bottom":!i})},R&&R.length>0&&t().createElement("div",null,t().createElement("div",{className:"filter-label font-header-2"},N("Label.Filter.SalesType")),t().createElement(St,{salesTypeFilters:R,salesTypeFilter:K,onSalesTypeFilterChanged:y})),L&&t().createElement("div",null,t().createElement("div",{className:"filter-label font-header-2"},N("Label.Filter.Creator")),t().createElement(Tt,{creators:L,creatorNameInputValue:s.creatorName,setCreatorNameInputValue:l,selectedCreator:q,robloxUserId:_,isUGCOnly:te,isPhone:!!o,onCreatorChanged:S,applyCreatorNameToQuery:C,customText:M,isSearchOnBlurEnabled:x})),W&&t().createElement("div",null,t().createElement("div",{className:"filter-label font-header-2"},N("Label.Filter.Price")),t().createElement(Nt,{currencyTypes:W,selectedCurrencyType:X,maxPrice:$,maxPriceInputValue:s.maxPrice,setMaxPriceInputValue:d,minPrice:J,minPriceInputValue:s.minPrice,setMinPriceInputValue:u,showCurrencyType:ne,robuxFilterId:B,customRobuxFilterId:j,applyMinPriceToQuery:I,applyMaxPriceToQuery:T,onCurrencyTypeChanged:w,isSearchOnBlurEnabled:x})),!!(null===(n=null==G?void 0:G.sortOptions)||void 0===n?void 0:n.length)&&t().createElement("div",null,t().createElement("div",{className:"filter-label font-header-2"},N("Label.Filter.Sorts")),t().createElement(Ct,{sortMenus:G,sortType:H,sortAggregation:z,onSortTypeChanged:h,onSortAggregationChanged:b})),t().createElement("div",{className:"font-header-2 filter-label"},N("Label.Filter.UnavailableItems")),t().createElement(It,{includeNotForSale:!!Q,onUnavailableFilterChanged:E}))))),i&&t().createElement("div",{className:"mobile-search-options-buttons-container"},t().createElement("button",{type:"button",className:"btn-secondary-lg",onClick:function(e){A()}},t().createElement("span",null," ",N("Action.Reset")," ")),t().createElement("button",{type:"button",className:"btn-primary-lg",onClick:function(e){k()}},t().createElement("span",null," ",N("Action.ViewItems")," "))))}),Q),At=r(2689),Pt=r.n(At);var Ft=function(){return t().createElement("div",{id:"search-options",className:"search-options"},t().createElement("ul",{className:"search-options-progressive-loading shimmer-lines"},Pt()(9).map((function(e){return t().createElement("li",{key:e,className:"placeholder shimmer-line"})}))))},Ot=function(){return(Ot=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Dt=function(){function e(){}return e.getMetadataFromApi=function(){return n.httpService.get(z.endpoints.getMetadata)},e.getSearchOptions=function(){var e=z.endpoints.getSearchOptionsUrl;return n.httpService.get(e)},e.getNavigationMenuItems=function(){return n.httpService.get(z.endpoints.getNavigationMenuItems)},e.getSearchItems=function(e,t,r){void 0===r&&(r=!1);var a=z.numberOfSearchItems,o=z.numberOfSearchItemsForFullScreen,i=z.numberOfSearchItemsExpanded,c=t?o:a;r&&(c=i);var s=new URLSearchParams(e);return s.set("limit",c.toString()),n.httpService.get(z.endpoints.getSearchItems,s)},e.getCatalogItemDetails=function(e,t){var r=z.endpoints,a=z.priceStatus,o={items:Object.values(e)};return n.httpService.post(r.getCatalogItemDetails,o).then((function(r){var n=r.data;return n&&n.data?n.data.map((function(r){var n=r.id,o=Ot(Ot(Ot({},r),{key:e[n].key}),r.priceStatus===a.free&&{isFree:!0}),i=Ot(Ot({},o),mt.mapItemRestrictionIcons(o)),c=mt.mapItemStatusIconsAndLabels(i,t);return Ot(Ot({},i),{itemStatusIconsAndLabels:c,creatorLink:mt.buildUserLink(i)})})):[]}))},e.getAvatarRequestSuggestion=function(e,t,r,a,o){void 0===o&&(o=!1);var i={prefix:e,limit:r,lang:t||z.englishLanguageCode,q:a};return o?n.httpService.get(z.endpoints.avatarRequestSuggestion,i):n.httpService.get(z.endpoints.avatarRequestCdnSuggestion,i)},e.postGetTopics=function(e,t,r){var a=!!r,o={maxResult:z.topics.maxTopicsToRequest,items:a?[]:e,selectTopics:t,inputQuery:a?r:void 0};return n.httpService.post(z.endpoints.postGetTopics,o)},e.getUserCurrency=function(){var e=z.endpoints.getUserCurrency,t=i.Endpoints.generateAbsoluteUrl(e.url,{userId:i.CurrentUser.userId},!0),r=""+i.EnvironmentUrls.economyApi+t;return e.url=r,n.httpService.get(e)},e.postMarketplaceItemDetails=function(e){var t={itemIds:[e]};return n.httpService.post(z.endpoints.postMarketplaceItemDetails,t)},e.getResellerData=function(e){var t={url:z.getResellerDataUrl(e),retryable:!0,withCredentials:!0};return n.httpService.get(t)},e}(),Ut={leaderboardAbp:"Leaderboard-Abp",skyscraperAdpRight:"Skyscraper-Abp-Right"};var Rt=function(){return{registerAd:(0,e.useCallback)((function(e){i.AdsHelper&&i.AdsHelper.AdRefresher&&i.AdsHelper.AdRefresher.registerAd(e)}),[]),refreshAllAds:(0,e.useCallback)((function(){i.AdsHelper&&i.AdsHelper.AdRefresher&&i.AdsHelper.AdRefresher.refreshAds()}),[]),adIds:Ut}},Lt=function(){return(Lt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};var _t=function(){var t=(0,e.useState)({initialized:!1}),r=t[0],n=t[1];return{library:r,setupLibrary:(0,e.useCallback)((function(){n((function(e){return Lt(Lt({},e),{isPhone:!!i.DeviceMeta&&(0,i.DeviceMeta)().isPhone,isDesktop:!i.DeviceMeta||(0,i.DeviceMeta)().isDesktop,isApp:!!i.DeviceMeta&&(0,i.DeviceMeta)().isInApp,catalogUrl:z.catalogUrl,isFullScreen:!!i.DeviceMeta&&!(0,i.DeviceMeta)().isInApp,initialized:!0})}))}),[])}},Mt=function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}s((n=n.apply(e,t||[])).next())}))},Bt=function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};var jt=function(){var t=this;return{getABTestEnrollment:(0,e.useCallback)((function(e,r,n){return Mt(t,void 0,Promise,(function(){var e;return Bt(this,(function(t){return(e=i.ExperimentationService.getAllValuesForLayer(r)).then((function(){i.ExperimentationService.logLayerExposure(r)})),[2,e]}))}))}),[])}},Vt={avatarShopPage:["avatarShopPlacement","isItemDetailsEnabled"],avatarShopRecommendationsAndSearchWeb:[],avatarShopRecommendationsAndSearch:["infiniteScroll"],avatarMarketplaceGuidedFeatures:["topicsEnabledWeb"],avatarMarketplaceShoppingCart:[],avatarMarketplaceSorts:[]},Gt={avatarShopPage:"AvatarMarketplace.UI",avatarShopRecommendationsAndSearchWeb:"AvatarMarketplace.RecommendationsAndSearch.Web",avatarShopRecommendationsAndSearch:"AvatarMarketplace.RecommendationsAndSearch",avatarMarketplaceGuidedFeatures:"AvatarMarketplace.GuidedFeatures",avatarMarketplaceShoppingCart:"AvatarMarketplace.ShoppingCart",avatarMarketplaceSorts:"AvatarMarketplace.Sorts"},Wt=1,Ht=function(){return(Ht=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};var zt=function(){var t=(0,e.useState)({featureEnabled:!1,showTopUp:!1,currentUserBalance:-1,headerText:"Heading.NeedMoreRobux",messageText:"Message.RunningLowRobux",buttonText:"Action.BuyRobux",buttonUrl:i.EnvironmentUrls.websiteUrl+"/upgrades/robux?ctx=catalogNew"}),r=t[0],n=t[1],a=(0,e.useState)(),o=(a[0],a[1]),c=(0,e.useState)(!1),l=c[0],u=(c[1],(0,e.useState)()),d=(u[0],u[1]),p=jt(),m=((0,e.useCallback)((function(){p.getABTestEnrollment(Wt,Gt.avatarShopPage,Vt.avatarShopPage).then((function(e){}),(function(){}))}),[p]),(0,e.useCallback)((function(){p.getABTestEnrollment(Wt,Gt.avatarShopRecommendationsAndSearchWeb,Vt.avatarShopRecommendationsAndSearchWeb).then((function(e){void 0!==(null==e?void 0:e.directPurchaseEnabled)&&null!==(null==e?void 0:e.directPurchaseEnabled)&&o(e.directPurchaseEnabled)}),(function(){}))}),[p])),f=(0,e.useCallback)((function(){p.getABTestEnrollment(Wt,Gt.avatarShopRecommendationsAndSearch,Vt.avatarShopRecommendationsAndSearch).then((function(e){void 0!==(null==e?void 0:e.infiniteScroll)&&null!==(null==e?void 0:e.infiniteScroll)&&d(e.infiniteScroll)}),(function(){}))}),[p]),g=(0,e.useCallback)((function(){p.getABTestEnrollment(Wt,Gt.avatarMarketplaceGuidedFeatures,Vt.avatarMarketplaceGuidedFeatures).then((function(e){var t,a;void 0!==(null==e?void 0:e.topUpEnabled)&&null!==(null==e?void 0:e.topUpEnabled)&&(n((function(t){return Ht(Ht({},t),{featureEnabled:!!e.topUpEnabled})})),r.featureEnabled&&void 0!==(null==e?void 0:e.topUpVariant)&&null!==(null==e?void 0:e.topUpVariant)&&("zeroBalance"===(null==e?void 0:e.topUpVariant)?n((function(e){return Ht(Ht({},e),{featureEnabled:!0,robuxMinThreshold:-1,robuxMaxThreshold:0,displayCategories:z.topUp.displayCategories,headerText:"Heading.NeedMoreRobux",messageText:"Message.WithRobux",buttonText:"Action.BuyRobux",buttonUrl:i.EnvironmentUrls.websiteUrl+"/upgrades/robux?ctx=catalogNew"})})):"lowBalance"===(null==e?void 0:e.topUpVariant)?n((function(e){return Ht(Ht({},e),{featureEnabled:!0,robuxMinThreshold:1,robuxMaxThreshold:z.topUp.robuxThreshold,displayCategories:z.topUp.displayCategories,headerText:"Heading.NeedMoreRobux",messageText:"Message.RunningLowRobux",buttonText:"Action.BuyRobux",buttonUrl:i.EnvironmentUrls.websiteUrl+"/upgrades/robux?ctx=catalogNew"})})):"giftCard"===(null==e?void 0:e.topUpVariant)&&n((function(e){return Ht(Ht({},e),{featureEnabled:!0,robuxMinThreshold:-1,robuxMaxThreshold:0,displayCategories:z.topUp.displayCategories,headerText:"Heading.TreatYourself",messageText:"Message.GiftCardPurchase",buttonText:"Action.ShopGiftCards",buttonUrl:"https://roblox.cashstar.com/gift-card/buy/?ref=1023gcwidget",giftCard:!0})})),t=s.localStorageService.getLocalStorage("Roblox.AvatarMarketplace.TopUpClearDate-"+i.CurrentUser.userId),a=Date.now()-t>z.topUp.resetTime,n((function(e){return Ht(Ht({},e),{showTopUp:a})}))))}),(function(){}))}),[p,r.featureEnabled]),v=((0,e.useCallback)((function(){p.getABTestEnrollment(Wt,Gt.avatarShopRecommendationsAndSearchWeb,Vt.avatarMarketplaceShoppingCart).then((function(e){}),(function(){}))}),[p]),(0,e.useCallback)((function(){p.getABTestEnrollment(Wt,Gt.avatarMarketplaceSorts,Vt.avatarMarketplaceSorts).then((function(e){}),(function(){}))}),[p]),(0,e.useCallback)((function(){m(),f(),g()}),[g,f,m]));return{topUp:r,setTopUp:n,isSearchOnBlurEnabled:l,getAvatarEnrollments:v}},Qt=function(){var t=(0,e.useState)(!1),r=t[0],n=t[1],a=(0,e.useState)(!1),o=a[0],i=a[1],c=(0,e.useState)(null),s=c[0],l=c[1],u=(0,e.useState)(!1),d=u[0],p=u[1],m=(0,e.useState)(!1),f=m[0],g=m[1],v=(0,e.useState)(),y=v[0];return{initialized:r,setInitialized:n,setIsSearchItemsLoaded:i,searchItemsError:s,setSearchItemsError:l,setLoading:p,adsInitialized:f,setAdsInitialized:g,showError:y,setShowError:v[1],layout:{initialized:r,isSearchItemsLoaded:o,searchItemsError:s,loading:d,adsInitialized:f,showError:y}}};var Kt=function(){var t=(0,e.useState)(!1),r=t[0],n=t[1],a=(0,e.useState)(),o=a[0],i=a[1],c=(0,e.useState)(),s=c[0],l=c[1],u=(0,e.useState)(),d=u[0],p=u[1],m=(0,e.useState)(),f=m[0],g=m[1];return(0,e.useEffect)((function(){Dt.getMetadataFromApi().then((function(e){i(!!e.data.isPremiumPriceOnItemTilesEnabled),l(!!e.data.isPremiumIconOnItemTilesEnabled),p(e.data.autocompleteAvatarSearchNumToDisplay),g(e.data.isCatalogAdsRowOnRecommendedPageEnabled),n(!0)}),(function(){n(!0)}))}),[]),{isMetadataInitialized:r,isPremiumIconOnItemTilesEnabled:s,isPremiumPriceOnItemTilesEnabled:o,autocompleteAvatarSearchNumToDisplay:d,isCatalogAdsRowOnRecommendedPageEnabled:f}},qt={categoryTypes:{Featured:0,All:1,Collectibles:2,Clothing:3,BodyParts:4,Gear:5,Models:6,Plugins:7,Decals:8,Audio:9,Meshes:10,Accessories:11,AvatarAnimations:12,CommunityCreations:13,Recommended:15},defaultGearSubcategoryId:0},Xt=function(){return(Xt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},$t=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},Jt=new i.Intl,Yt=function(e,t){var r=parseInt(z.allGearSubcategoryId,10);return e.subcategoryId===r?-1:t.subcategoryId===r?1:Jt.langSensitiveCompare(e.name,t.name)},Zt=function(e){var t={robloxUserId:e.robloxUserId,robloxUserName:e.robloxUserName,defaultCurrencyId:e.defaultCurrency,freeFilterId:e.freeFilter,customRobuxFilterId:e.customRobuxFilter,robuxFilterId:e.robuxFilter,allCategoriesId:e.allCategories,defaultCategoryId:e.defaultCategory,defaultCategoryIdForRecommendedSearch:e.defaultCategoryIdForRecommendedSearch,gearCategoryId:e.gearSubcategory,defaultGearSubcategoryId:qt.defaultGearSubcategoryId,defaultSortTypeId:e.defaultSortType,defaultSortAggregationId:e.defaultSortAggregation,defaultCreatorId:e.defaultCreator,customText:"custom",isSearchOptionsLoaded:!0},r=[];e.categoriesWithCreator&&e.categoriesWithCreator.forEach((function(e){r.push(e)})),t.categoriesWithCreatorFilters=r;var n=Xt({},e),a={};n.categories=e.categories.map((function(e){var t,r=Xt(Xt({},e),{typeId:e.categoryId,Data:null===(t=e.typeId)||void 0===t?void 0:t.toString(),Description:e.name});if(a[r.categoryId]={categoryEnum:r.category,subcategoryEnums:{}},r.subcategories){var n={};r.subcategories=r.subcategories.map((function(e){var t,r=Xt(Xt({},e),{typeId:e.subcategoryId,Data:null===(t=e.typeId)||void 0===t?void 0:t.toString(),Description:e.name});return n[r.subcategoryId]=r.subcategory,r})),Object.assign(a[r.categoryId].subcategoryEnums,n)}return r})),t.categoryEnumLibrary=a;var o={};null!==e.priceFilters&&(n.priceFilters=e.priceFilters.map((function(e){var t,r=Xt(Xt({},e),{typeId:e.currencyType,Data:null===(t=e.typeId)||void 0===t?void 0:t.toString(),Description:e.name});return o[r.currencyType]={typeId:r.currencyType,name:r.name},r}))),t.priceEnumLibrary=o,n.creatorFilters=e.creatorFilters.map((function(e){return Xt(Xt({},e),{Data:e.userId.toString(),Description:e.name})})),n.sortMenu.sortOptions=e.sortMenu.sortOptions.map((function(e){var t;return Xt(Xt({},e),{typeId:e.sortType,Data:null===(t=e.typeId)||void 0===t?void 0:t.toString(),Description:e.name})})),n.sortMenu.sortAggregations=e.sortMenu.sortAggregations.map((function(e){var t;return Xt(Xt({},e),{typeId:e.sortAggregation,Data:null===(t=e.typeId)||void 0===t?void 0:t.toString(),Description:e.name})}));var i=[];e.salesTypeFilters.forEach((function(e){var t={name:e.name.toString(),filter:e.filter};i.push(t)})),t.salesTypeFilters=i,n.categories.forEach((function(e){var r;e.categoryId===t.gearCategoryId&&(null===(r=e.subcategories)||void 0===r||r.sort(Yt))})),t.categories=n.categories,t.sortMenus=n.sortMenu;var c=n.sortMenu,s=c.sortOptions,l=c.sortAggregations;if(s){var u=s[0];t.defaultSortValue=u}if(l){var d=l[0];t.defaultSortAggregationValue=d}if(n.creatorFilters?t.creators=$t($t([],n.creatorFilters),[{name:null,isSelected:!1,userId:t.customText}]):t.creators=null,t.currencyTypes=n.priceFilters,n.priceFilters.length>0){var p=n.priceFilters[0];t.defaultCurrencyType=p}return t.filtersInitialized=!0,t},er=function(){return(er=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};var tr=function(t){var r=(0,e.useState)({isSearchOptionsLoaded:!1,creators:[],customText:"custom"}),n=r[0],a=r[1];return(0,e.useEffect)((function(){t&&Dt.getNavigationMenuItems().then((function(e){var t=Zt(e.data);a(er(er({},t),{isSearchOptionsLoaded:!0,hasSearchOptionsError:!1}))})).catch((function(){a((function(e){return er(er({},e),{isSearchOptionsLoaded:!0,hasSearchOptionsError:!0})}))}))}),[t]),{searchOptions:n}},rr=function(){return(rr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},nr=function(e,t){if(!e||0===e.length)return[];var r=e.split(t),n=[];return r.forEach((function(e){n.push({displayName:e,originalTopicName:""})})),n},ar=function(e,t){var r,n,a,o,i=e.categoryId,c=e.subcategoryId,s=e.gearsId,l=t.categories,u=t.defaultCategoryId,d=t.gearCategoryId,p=i;Number.isInteger(p)||(p=u),(a=null==l?void 0:l.find((function(e){return e.categoryId===p})))||(p=u,a=null==l?void 0:l.find((function(e){return e.categoryId===p}))),p===d?o=null===(r=null==a?void 0:a.subcategories)||void 0===r?void 0:r.find((function(e){var t;return e.subcategoryId===(s||(null===(t=null==a?void 0:a.subcategories)||void 0===t?void 0:t[0].subcategoryId))})):c&&(o=null===(n=null==a?void 0:a.subcategories)||void 0===n?void 0:n.find((function(e){return e.subcategoryId===c})));var m=void 0!==a&&z.topics.categoriesToShowTopics.includes(null==a?void 0:a.categoryId);return{category:a,subcategory:o,topicBasedBrowsingEnabledForCategory:m}},or=function(e,t,r){if(!r)return{sortType:void 0,sortAggregation:void 0};var n=r.sortOptions,a=r.sortAggregations;return{sortType:n?null==e?n[0]:n.find((function(t){return t.sortType===e})):void 0,sortAggregation:a?null==t?a[0]:a.find((function(e){return e.sortAggregation===t})):void 0}},ir=function(e,t){var r=t.creators,n=t.defaultCreatorId,a=t.robloxUserId,o=t.customText,i=e.creatorName,c=e.creatorId,s=e.creatorType,l=r;if(!l)return{};var u=null,d=null,p=c;return i?(u=l.find((function(e){return e.userId===o})),d=i):(p||(p=n),p&&(!a||p>a)?(u=l.find((function(e){return e.userId===o})))&&(u=rr(rr({},u),{userId:p})):u=null==l?void 0:l.find((function(e){return e.userId===p}))),u&&s&&(u=rr(rr({},u),{type:s})),{creator:u,creatorName:d}},cr=function(e,t,r,n){var a=n.currencyTypes,o=n.defaultCurrencyType,i=n.customRobuxFilterId;if(!a)return{currencyType:void 0,minPrice:t,maxPrice:r};var c=a.find((function(t){return t.currencyType===e}))||o,s=t,l=r;return(null==c?void 0:c.currencyType)===i&&(s=s||null,l=l||null),{currencyType:c,minPrice:0!==s?s:null,maxPrice:0!==l?l:null}},sr=function(e,t){var r,n=e||1;return{salesTypeFilter:null===(r=t.salesTypeFilters)||void 0===r?void 0:r.find((function(e){return e.filter===n}))}},lr=function(e){return e?{includeNotForSale:!0}:{}},ur=function(e,t){var r=new URLSearchParams(t?"":window.location.search),n=mt.getQueriesValueIntoInt(r),a=mt.formatQueries(n),o=nr(a.topics||"",",");return rr(rr(rr(rr(rr(rr(rr({},ar({categoryId:n.Category,subcategoryId:n.Subcategory,gearsId:n.Gears},e)),or(n.SortType,n.SortAggregation,e.sortMenus)),ir({creatorId:n.CreatorID,creatorName:n.CreatorName,creatorType:n.CreatorType},e)),cr(n.CurrencyType,n.pxMin,n.pxMax,e)),sr(n.salesTypeFilter,e)),{topics:o,keyword:n.Keyword}),lr(n.IncludeNotForSale))};var dr=function(t,r){var n=(0,e.useState)(0),a=n[0],o=n[1];return(0,e.useEffect)((function(){if(t){var e,n,a=ur(r,!0),i=(e=t,n=a,Object.keys(e).filter((function(e){return"topicBasedBrowsingEnabledForCategory"!==e&&"keyword"!==e})).reduce((function(t,r){var a=e[r],o=n[r];if(!a&&!o)return t;var i=JSON.stringify(e[r])!==JSON.stringify(n[r]);return"subcategory"===r&&i&&e.category!==n.category&&(i=!1),i?t+1:t}),0));o(i)}}),[t,r]),a},pr=function(){return(pr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};var mr=function(t,r){var n=(0,e.useState)({topics:[]}),a=n[0],o=n[1],i=dr(a,t),c=(0,e.useState)(!1),s=c[0],l=c[1],u=function(e){o((function(t){return pr(pr({},t),{sortType:e,cursor:void 0})}))},d=function(e){o((function(t){return pr(pr({},t),{currencyType:e,cursor:void 0})}))},p=(0,e.useCallback)((function(e,t){var r=ur(e,t);return o(r),l(!0),r}),[]);return(0,e.useEffect)((function(){var e=t.defaultSortValue,r=a.currencyType,n=a.sortType;r&&r.excludePriceSorts&&n&&n.isPriceRelated&&u(e)}),[a,t]),(0,e.useEffect)((function(){var e=t.defaultCategoryId,r=t.freeFilterId,n=t.defaultCurrencyType,o=a.category,i=a.currencyType;o&&o.categoryId===e&&i&&i.currencyType===r&&d(n)}),[a,t]),{setCategory:function(e){var t=void 0!==e&&z.topics.categoriesToShowTopics.includes(null==e?void 0:e.categoryId);o((function(r){return pr(pr({},r),{category:e,topicBasedBrowsingEnabledForCategory:t})}))},setSubcategory:function(e){o((function(t){return pr(pr({},t),{subcategory:e,cursor:void 0})}))},setCreator:function(e){o((function(t){return pr(pr({},t),{creator:e,cursor:void 0})}))},setCreatorName:function(e){o((function(t){return pr(pr({},t),{creatorName:e,cursor:void 0})}))},setCurrencyType:d,setMinPrice:function(e){o((function(t){return pr(pr({},t),{minPrice:e,cursor:void 0})}))},setMaxPrice:function(e){o((function(t){return pr(pr({},t),{maxPrice:e,cursor:void 0})}))},setIncludeNotForSale:function(e){o((function(t){return pr(pr({},t),{includeNotForSale:e,cursor:void 0})}))},setSalesTypeFilter:function(e){o((function(t){return pr(pr({},t),{salesTypeFilter:e,cursor:void 0})}))},setSortType:u,setSortAggregation:function(e){o((function(t){return pr(pr({},t),{sortAggregation:e,cursor:void 0})}))},setSelectedTopics:function(e){o((function(t){return pr(pr({},t),{topics:e,cursor:void 0})}))},setKeyword:function(e){o((function(t){return pr(pr({},t),{keyword:e,cursor:void 0})})),r(e||"")},setCursor:function(e){o((function(t){return pr(pr({},t),{cursor:e})}))},numberOfAppliedFilters:i,catalogQuery:a,isCatalogQueryInitialized:s,keyword:a.keyword,initializeCatalogQuery:p}},fr=RobloxItemPurchase,gr=function(){return(gr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},vr=M.Thumbnail2d,yr=M.DefaultThumbnailSize,hr=M.ThumbnailTypes,br=M.ThumbnailFormat;function Er(e){e.item;var r=e.itemDetails,a=ie(r);if(void 0!==r.collectibleItemId){var o="ShopAndAllExperiences"===r.saleLocationType||"ShopOnly"===r.saleLocationType,i=r.hasResellers;if(!o&&!i)return t().createElement("div",{className:"item-price"},t().createElement("span",{className:"price-text text-alert"},ke()))}if("number"==typeof a&&a>0)return t().createElement("div",{className:"item-price"},t().createElement("span",{className:"icon-robux-16x16"}),t().createElement("span",{className:"price-text text"},n.numberFormat.getNumberFormat(a)));if("number"==typeof a&&a<0)return t().createElement("div",{className:"item-price"},t().createElement("span",{className:"price-text text"},r.priceStatus));if("number"==typeof a&&0===a)return t().createElement("div",{className:"item-price"},t().createElement("span",{className:"price-text text"},Ne()));var c=((null==r?void 0:r.itemRestrictions)||[]).some((function(e){return"Limited"===e||"LimitedUnique"===e||"Collectible"===e}));if(c){if(c&&!!(null==r?void 0:r.lowestPrice)&&"number"!=typeof(null==r?void 0:r.lowestPrice))return t().createElement("div",{className:"item-price"},t().createElement("span",{className:"price-text text-alert"},ye()))}else if("number"!=typeof a)return t().createElement("div",{className:"item-price"},t().createElement("span",{className:"price-text text-alert"},ke()));return t().createElement("div",{className:"item-price"},t().createElement("span",{className:"price-text"}))}function Sr(e){var r,n=e.item,a=e.itemDetails,o=e.dispatch,i=e.onCheckboxClicked,c=e.selectedItemsRecord,s=(null==a?void 0:a.name)||n.itemName,l=null==a?void 0:a.creatorName;return t().createElement("div",{className:"cart-item-container"},t().createElement("div",{className:"cart-item"},t().createElement("div",{className:"thumbnail-container",onClick:function(){return i(n)},"aria-hidden":"true"},t().createElement(vr,{type:"bundle"===(null===(r=n.itemType)||void 0===r?void 0:r.toLowerCase())?hr.bundleThumbnail:hr.assetThumbnail,size:yr,targetId:n.itemId,containerClass:"cart-item-thumb",format:br.webp,altName:(s||"Cart Item")+(l?" by "+l:"")})),t().createElement("div",{className:"checkbox purchase-checkbox-container"},t().createElement("input",{className:"input-checkbox",id:"checkbox-"+n.itemId,type:"checkbox",checked:c[""+n.itemType.toLowerCase()+n.itemId],onChange:function(){i(n)},disabled:!1}),t().createElement("label",{htmlFor:"checkbox-"+n.itemId})),t().createElement("div",{className:"item-details-container"},t().createElement("a",{href:pe(n.itemId,s,n.itemType),target:"_self",className:"item-name"},s),t().createElement(Er,{item:n,itemDetails:a}))),t().createElement("div",{className:"rm-item-btn-container icon-actions-clear-sm"},t().createElement("button",{type:"button",onClick:function(){o(Xe(n,!0)).catch((function(){console.error("Failed to remove item")}))}})))}function Cr(r){var a,o=r.totalPrice,c=r.remainingBalance,l=r.items,u=r.selectedItemsList,d=r.systemFeedbackService,p=r.totalCartValue,m=r.itemDetails,f=r.dispatch,g=function(e){var t;if(e.itemRestrictions.includes("LimitedUnique")||e.itemRestrictions.includes("Limited"))return!0;if(void 0!==e.collectibleItemId&&void 0!==e.collectibleItemDetails&&e.itemRestrictions.includes("Collectible")){if(!(void 0!==e.collectibleItemDetails.unitsAvailableForConsumption&&e.collectibleItemDetails.unitsAvailableForConsumption>0))return!0;if(void 0!==e.collectibleItemDetails.lowestResalePrice&&e.collectibleItemDetails.lowestResalePrice>(null===(t=e.collectibleItemDetails)||void 0===t?void 0:t.price)||"ExperiencesDevApiOnly"===e.collectibleItemDetails.saleLocationType)return!0}return!1},v=(0,e.useCallback)((function(e,t,r){var n={totalNumberOfItemsInCart:l.length,totalValueOfItemsInCart:p,totalNumberOfSelectedItemsInCheckout:t,totalValueOfSelectedItemsInCheckout:r,purchaseData:JSON.stringify(e),userId:i.CurrentUser.userId};s.eventStreamService.sendEvent({name:"shoppingCartPurchaseResult",type:"shoppingCartPurchaseResult",context:"shoppingCart"},n),s.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(s.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_CATALOG_CART_ROBUX_UPSELL,!0,s.paymentFlowAnalyticsService.ENUM_VIEW_NAME.ROBUX_UPSELL,s.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,s.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.BUY_ROBUX);var a=0,o=[];e.forEach((function(e){if("Success"===e.data.reason){var t=void 0;void 0!==e.data.itemData.assetId?(t=m[e.data.itemData.assetId],g(t)?void 0!==t.collectibleItemId&&void 0!==t.collectibleItemDetails.lowestResalePrice?a+=t.collectibleItemDetails.lowestResalePrice:void 0!==t.lowestPrice&&(a+=t.lowestPrice):void 0!==t&&t.price&&(a+=t.price),o.push({itemType:t.itemType,itemId:t.id,resalePurchase:g(t)}),f(Xe({itemId:e.data.itemData.assetId,itemType:"Asset"})).catch((function(){console.error("Failed to remove item")}))):void 0!==e.data.itemData.bundleId&&(t=m[e.data.itemData.bundleId],g(t)?void 0!==t.collectibleItemId&&void 0!==t.collectibleItemDetails.lowestResalePrice?a+=t.collectibleItemDetails.lowestResalePrice:void 0!==t.lowestPrice&&(a+=t.lowestPrice):void 0!==t&&t.price&&(a+=t.price),o.push({itemType:t.itemType,itemId:t.id,resalePurchase:g(t)}),f(Xe({itemId:e.data.itemData.bundleId,itemType:"Bundle"})).catch((function(){console.error("Failed to remove item")})))}}));var c={totalTransactionValue:a,transactionItems:JSON.stringify(o),purchaseType:"shopping-cart",userId:i.CurrentUser.userId};s.eventStreamService.sendEvent({name:"marketplaceWebPurchaseSuccess",type:"marketplaceWebPurchaseSuccess",context:"marketplaceWebPurchase"},c)}),[]),y=new Map;return t().createElement("div",{className:"shopping-cart-footer"},t().createElement("div",{className:"cart-total-section-container"},t().createElement("div",{className:"total-label"},Ie({itemCount:""+u.length})),t().createElement("div",{className:"total-price-container"},t().createElement("span",{className:"icon-robux-16x16"}),t().createElement("span",{className:"price-text"},o.toLocaleString()))),u.length>Z.maxSelectedItems&&t().createElement(_.Button,{className:"action-button batch-buy-purchase-button",variant:_.Button.variants.growth,size:_.Button.sizes.large,onClick:function(){d.warning(Te({purchaseLimit:""+Z.maxSelectedItems}),0,2e3)}},ve()),u.length<=Z.maxSelectedItems&&t().createElement(fr.BatchBuyPriceContainer,{items:(a=[],u.forEach((function(e){a.push({id:e.itemId,itemType:e.itemType})})),a),purchaseMetadata:y,onTransactionComplete:function(e){v(e,u.length,o)},systemFeedbackService:d}),t().createElement("div",{className:"balance-disclaimer-container"},c>=0?t().createElement("div",{className:"balance-disclaimer-text",dangerouslySetInnerHTML:{__html:Ee({remainingBalance:"<span class='icon-robux-16x16'></span><span class='text-robux'>"+(0,n.escapeHtml)()(c.toLocaleString())+"</span>"})}}):t().createElement("div",{className:"balance-disclaimer-text"},Se())))}function Ir(r){var n,a=nt(),o=a.cart,i=a.dispatch,c=o.items,s=o.currentUserBalance,l=o.itemDetails,u=Math.max(null!==(n=s)&&void 0!==n?n:0,0),d=(0,e.useRef)(null),p=(0,e.useState)({windowHeight:window.innerHeight,width:null,height:null,top:null,left:null}),m=p[0],f=p[1],g=(0,e.useState)(0),v=g[0],y=g[1],h=(0,e.useState)(0),b=h[0],E=h[1],S=(0,e.useState)([]),C=S[0],I=S[1],T=(0,e.useState)({}),w=T[0],x=T[1];(0,e.useEffect)((function(){var e=ae();x(e.selectedItems)}),[]),(0,e.useEffect)((function(){var e=ae();x(e.selectedItems)}),[c]),(0,e.useEffect)((function(){var e,t=[];c.forEach((function(e){w[""+e.itemType.toLowerCase()+e.itemId]&&t.push(e)})),e=se(o,t),y(e),E(u-v),I(t)}),[w]);var N=function(e){var t,n=null==e?void 0:e.target,a=null==d?void 0:d.current;if(n instanceof Element){if(a&&a.contains(n))return;if(function(e){return ue(e,".shopping-cart-btn")||ue(e,".modal-backdrop.in")||ue(e,".in.modal")||ue(e,".add-to-cart-btn-container")}(n))return;null===(t=null==r?void 0:r.setIsCartOpen)||void 0===t||t.call(r,!1)}},k=(0,e.useCallback)((function(e){if(e&&e instanceof HTMLElement){var t=function(e){var t,r,n,a=null===(t=null==e?void 0:e.getBoundingClientRect)||void 0===t?void 0:t.call(e);if(a&&(null==a?void 0:a.width)&&(null==a?void 0:a.height)){var o={windowHeight:window.innerHeight,width:null==a?void 0:a.width,height:null==a?void 0:a.height,top:null!==(r=null==a?void 0:a.top)&&void 0!==r?r:null==a?void 0:a.y,left:null!==(n=null==a?void 0:a.left)&&void 0!==n?n:null==a?void 0:a.x};f(o)}};t(e);var r=new IntersectionObserver((function(r){var n=null==r?void 0:r[0];(null==n?void 0:n.target)&&t(e)}),{root:null,rootMargin:"0px",threshold:[.9,.99,1]}),n=new ResizeObserver((function(r){t(e)}));r.observe(e),n.observe(document.body,{box:"border-box"})}}),[]),A=(0,e.useMemo)((function(){var e=m.height,t=m.top;if("number"!=typeof e||"number"!=typeof t)return 600;var r=e+t;if(r>m.windowHeight){var n=r-m.windowHeight;return Math.max(460,e-n-20)}if(r<m.windowHeight-20){var a=m.windowHeight-20-t;if(a>=460)return Math.min(600,a)}return m.height?m.height:0}),[m.windowHeight,m.height,m.top]),P=function(e,t){var n=w,a=""+e.itemType.toLowerCase()+e.itemId,i=!1;(i=void 0===t?void 0===n[a]||!n[a]:t)&&C.length>=Z.maxSelectedItems&&(i=!1,r.systemFeedbackService.warning(Te({purchaseLimit:""+Z.maxSelectedItems}),0,2e3)),n[a]=i,x(gr({},n)),oe(gr(gr({},o),{selectedItems:w}))};(0,e.useEffect)((function(){return window.addEventListener("click",N,!0),function(){window.removeEventListener("click",N,!0)}}),[]);var F="("+c.length+")";return t().createElement("div",{ref:d,className:"shopping-cart-modal-container"},t().createElement("div",{ref:k,className:"shopping-cart-modal",style:{height:A+"px"}},t().createElement("div",{className:"shopping-cart-title-container"},t().createElement("h2",{className:"shopping-cart-title"},t().createElement("span",{className:"shopping-cart-title-text"},Ce())," ",t().createElement("span",{className:"shopping-cart-title-item-count"},F))),t().createElement(_.ScrollBar,{className:"rbx-scrollbar"},t().createElement("div",{className:"shopping-cart-items-list"},c.map((function(e){return t().createElement(Sr,{key:e.itemId,item:e,itemDetails:l[e.itemId],dispatch:i,onCheckboxClicked:P,selectedItemsRecord:w})})))),t().createElement(Cr,{totalPrice:v,totalCartValue:se(o,o.items),remainingBalance:b,items:c,selectedItemsList:C,systemFeedbackService:r.systemFeedbackService,itemDetails:l,dispatch:i})))}Ir.propTypes={};var Tr=Ir;function wr(e){var r=e.totalCartItems,n=e.isCartOpen;return t().createElement("div",{className:"shopping-cart-icon-container"},t().createElement("div",{className:(n?"cart-open":"")+" shopping-cart-icon"}),t().createElement("span",{className:"cart-number-container"},t().createElement("span",{className:"cart-number"},r||0)))}var xr=(0,_.createSystemFeedback)(),Nr=xr[0],kr=xr[1];function Ar(){var r=(0,e.useState)(!1),n=r[0],a=r[1],o=nt().cart;de=kr;var i=o.items;return t().createElement(e.Fragment,null,t().createElement(Nr,null),t().createElement("div",{className:"shopping-cart-btn-container"},t().createElement("button",{className:"shopping-cart-btn",onClick:function(){a(!n)},type:"button"},t().createElement(wr,{totalCartItems:null==i?void 0:i.length,isCartOpen:n})),!!n&&t().createElement(Tr,{setIsCartOpen:a,systemFeedbackService:kr})))}Ar.propTypes={};var Pr=Ar;var Fr=(0,L.withTranslations)((function(r){var n=r.searchInputValue,a=r.setSearchInputValue,o=r.autocompleteSuggestions,i=r.categories,c=r.hasSearchOptionsError,s=(r.library,r.onClickOutsideAutocomplete),l=r.onKeywordKeydown,u=r.onKeywordInputClicked,d=r.onKeywordClear,p=r.onAutocompleteSuggestionClicked,m=r.updateCategory,f=r.search,g=r.buyRobuxButtonOnClick,v=r.buyRobuxButtonUrl,y=r.getCategoryDropdownValue,h=r.isSearchOnBlurEnabled,b=r.translate,E=V()("search-container","search-container-no-categories","search-container-original"),S=V()("form-control","input-field","search-input","input-rounded"),C=(0,e.useState)([]),I=C[0],T=C[1],w=(0,e.useRef)(null),x=(0,e.useRef)(null);(0,e.useEffect)((function(){if(i){var e=(null==i?void 0:i.filter((function(e){var t;return null===(t=e.isSearchable)||void 0===t||t})).sort((function(e,t){return e.orderIndex-t.orderIndex})))||[];T(e)}}),[i]);var N=(0,e.useState)(!1),k=N[0],A=N[1];return(0,e.useEffect)((function(){var e=function(e){var t=e.target;w.current&&!w.current.contains(t)&&A(!1),x.current&&!x.current.contains(t)&&s()};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}}),[A,s]),t().createElement("div",{className:E,id:"search-bar"},t().createElement("div",{className:"input-group"},t().createElement("div",{id:"search-bar-container",ref:x},t().createElement("input",{id:"avatar-shop-keyword-input",className:S,placeholder:b("Label.SearchField"),maxLength:50,onKeyDown:l,value:n,onChange:function(e){var t=e.target.value;a(t),h&&f(t)},onClick:u,autoComplete:"off",autoCorrect:"off",spellCheck:"false",name:"searchField",type:"text"}),!!n.length&&t().createElement("span",{id:"navbar-search-clear-btn",tabIndex:0,role:"button","aria-label":"Clear Search",className:"clear-search icon-actions-clear-sm",onClick:function(e){d(e)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),d(e))}}),!!n.length&&o.show&&t().createElement("div",{className:"autocomplete-dropdown-menu open"},t().createElement("ul",{id:"autocomplete-list",className:"dropdown-menu",role:"menu"},o.suggestions.map((function(e,r){return t().createElement("li",{id:"autocomplete-suggestion-li-"+r,key:e.Query},t().createElement("button",{type:"button",id:"autocomplete-suggestion-"+r,onClick:function(){return p(e.Query,r)}},t().createElement("span",{className:"icon navbar-list-option-icon icon-search"}),t().createElement("span",null,e.Query)))}))))),t().createElement("div",{ref:w,className:"input-group-btn-category input-group-btn"},!c&&t().createElement("button",{type:"button",className:"input-dropdown-btn category-options",disabled:c,"aria-haspopup":"true","aria-expanded":k?"true":"false",onClick:function(){A(!k)}},t().createElement("span",{className:"text-overflow rbx-selection-label"},y()),t().createElement("span",{className:"icon-down-16x16"})),t().createElement("ul",{className:"dropdown-menu",role:"menu",style:{display:k?"block":"none"}},I.map((function(e){return t().createElement("li",{key:e.name},t().createElement("button",{onClick:function(t){m(t,!0,!1,e,void 0),A(!1)},type:"button"},e.name))}))),t().createElement("button",{className:"input-addon-btn",type:"submit",onClick:function(){return f(n)}},t().createElement("span",{className:"icon-search"}))),t().createElement("div",{className:"buy-btns-container"},t().createElement("a",{className:"btn-growth-md buy-robux",href:v,target:"_self",onClick:g},b("Action.BuyRobux")),t().createElement(Pr,null))))}),K),Or=function(){return(Or=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Dr=new i.Intl;function Ur(r){var n=r.keywordForDisplay,a=r.setKeywordForDisplay,o=r.search,i=r.catalogQuery,c=r.categories,s=r.hasSearchOptionsError,l=r.autocompleteAvatarSearchNumToDisplay,u=r.library,d=r.updateCategory,p=r.buyRobuxButtonOnClick,m=r.buyRobuxButtonUrl,f=r.getCategoryDropdownValue,g=r.isSearchOnBlurEnabled,v=(0,e.useState)(),y=v[0],h=v[1],b=(0,e.useState)({show:!1,timeSinceLastSearchAutocompleteEvent:0,suggestions:[],textSuggestions:[],previousQuery:"",previousQueryBeforeRemoval:"",previousCharInput:-1,backspaceInput:!1,startTime:0,keyboardPosition:-1,locale:""}),E=b[0],S=b[1],C=(0,e.useState)(),I=C[0],T=C[1];(0,e.useEffect)((function(){!function(){var e=Dr.locale;S((function(t){return Or(Or({},t),{locale:e})}));var t=e.indexOf("-");(e=e.substring(0,-1!==t?t:e.length))!==z.englishLanguageCode&&(e+=","+z.englishLanguageCode),h(e)}()}),[]);var w=(0,e.useCallback)((function(e){var t=Date.now();Dt.getAvatarRequestSuggestion(e,y,z.autocompleteQueryAmount,E.previousQuery,I).then((function(e){var r=e.data;r.Args.Prefix===n&&S((function(e){var n=Or({},e);n.suggestions=[],n.textSuggestions=[];var a=r.Data;return(a=a.slice(0,l)).forEach((function(e){n.suggestions.push(e),n.textSuggestions.push(e.Query)})),(Date.now()>n.timeSinceLastSearchAutocompleteEvent+z.autocompleteSuggestionEventData.autocompleteSuggestionEventTimeoutDelay||null===n.timeSinceLastSearchAutocompleteEvent)&&(n.previousQuery=r.Args.Prefix,ft.sendSearchAutocompleteEvent(r.Args.Algo,n.textSuggestions,r.Args.Prefix,n.previousQuery,n.locale,Date.now()-t,l,""!==E.previousQuery)),!0===n.backspaceInput&&ft.sendSearchTextTrimEvent(n.previousQueryBeforeRemoval,r.Args.Prefix),n.timeSinceLastSearchAutocompleteEvent=Date.now(),n.backspaceInput=!1,n}))}),(function(){T(!0)}))}),[l,y,E.previousQuery,n,I]);return(0,e.useEffect)((function(){n?w(n):S((function(e){return Or(Or({},e),{suggestions:[],textSuggestions:[]})}))}),[w,n]),t().createElement(Fr,{searchInputValue:n,setSearchInputValue:a,search:o,autocompleteSuggestions:E,categories:c,hasSearchOptionsError:s,library:u,onClickOutsideAutocomplete:function(){S((function(e){return Or(Or({},e),{show:!1,keyboardPosition:-1})}))},onKeywordKeydown:function(e){var t;if("Backspace"===e.key)S((function(t){return Or(Or({},t),{previousQueryBeforeRemoval:i.keyword,backspaceInput:!0,previousCharInput:e.which})}));else if("ArrowDown"===e.key||"Tab"===e.key){var r=E.keyboardPosition+1,a=document.querySelector("#autocomplete-suggestion-li-"+r);if(r<E.suggestions.length)e.stopPropagation(),e.preventDefault(),null==(c=document.querySelector("#autocomplete-suggestion-li-"+E.keyboardPosition))||c.classList.remove("selected"),S((function(t){return Or(Or({},t),{keyboardPosition:r,previousCharInput:e.which})})),null==a||a.classList.add("selected");else"ArrowDown"===e.key?(e.stopPropagation(),e.preventDefault(),S((function(t){return Or(Or({},t),{previousCharInput:e.which})}))):(null===(t=document.querySelector("#autocomplete-suggestion-li-"+(E.suggestions.length-1)))||void 0===t||t.classList.remove("selected"),S((function(t){return Or(Or({},t),{show:!1,keyboardPosition:-1,previousCharInput:e.which})})))}else if("ArrowUp"===e.key){var c;e.stopPropagation(),e.preventDefault(),null==(c=document.querySelector("#autocomplete-suggestion-li-"+E.keyboardPosition))||c.classList.remove("selected");var s=E.keyboardPosition-1;a=document.querySelector("#autocomplete-suggestion-li-"+s);s>-1?(S((function(t){return Or(Or({},t),{keyboardPosition:s,previousCharInput:e.which})})),null==a||a.classList.add("selected")):S((function(e){return Or(Or({},e),{keyboardPosition:-1})}))}else"Enter"===e.key?-1===E.keyboardPosition?(e.target.blur(),o(n),S((function(e){return Or(Or({},e),{show:!1})})),ft.sendCatalogSearchEvent(0)):setTimeout((function(){var e=document.querySelector("#autocomplete-suggestion-"+E.keyboardPosition);e&&e instanceof HTMLElement&&e.click()}),0):S((function(t){return Or(Or({},t),{previousCharInput:e.which})}))},onKeywordInputClicked:function(e){e.stopPropagation(),S((function(e){return Or(Or({},e),{show:!0})}))},onKeywordClear:function(e){var t;e.stopPropagation(),ft.sendSearchClearEvent(n),null===(t=document.getElementById("avatar-shop-keyword-input"))||void 0===t||t.focus(),o(""),S((function(e){return Or(Or({},e),{show:!1,suggestions:[],textSuggestions:[]})}))},onAutocompleteSuggestionClicked:function(e,t){o(e),w(e),ft.sendSearchSuggestionClickedEvent(n,t,e,E.textSuggestions),ft.sendCatalogSearchEvent(1),S((function(e){return Or(Or({},e),{show:!1,keyboardPosition:-1})}))},updateCategory:d,buyRobuxButtonOnClick:p,buyRobuxButtonUrl:m,getCategoryDropdownValue:f,isSearchOnBlurEnabled:g})}var Rr=function(){var t=(0,e.useState)(""),r=t[0],n=t[1],a=(0,e.useState)(!1),o=a[0],i=a[1],c=(0,e.useState)(""),s=c[0],l=c[1],u=(0,e.useState)(""),d=u[0],p=u[1],m=(0,e.useState)(""),f=m[0];return{keywordForDisplay:r,setKeywordForDisplay:n,isKeywordCensored:o,setIsKeywordCensored:i,minPriceForDisplay:s,setMinPriceForDisplay:l,maxPriceForDisplay:d,setMaxPriceForDisplay:p,creatorNameForDisplay:f,setCreatorNameForDisplay:m[1],displayedQuery:{keyword:r,isKeywordCensored:o,minPrice:s,maxPrice:d,creatorName:f}}},Lr=r(8149),_r=r.n(Lr),Mr=function(e,t,r,n){var a,o=mt.formatQueries(t,e.cursor),i=mt.translateToEnumStrings(r.categoryEnumLibrary,o),c=(a=i,Object.entries(a).reduce((function(e,t){var r=t[0],n=t[1];return null!=n&&(e[r]=n),e}),{})),s=!1;return c.category&&z.expandedCategoryList.includes(c.category)?s=!0:c.category&&z.expandedCategoryList.includes(c.category)||n||(s=!0),{query:c,showExpandedResults:s}},Br=function(){return(Br=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},jr=function(e,t){var r,n=Br({Keyword:e.keyword||void 0},(null==(r=e.topics)?void 0:r.length)?{TriggeredByTopicDiscovery:!0,topics:mt.buildTopicKeyword(r,",")}:{});n=function(e,t){var r=Br({},e),n=t.salesTypeFilter;return r.salesTypeFilter=null==n?void 0:n.filter,r}(n=function(e,t,r){var n,a=Br({},e),o=t.currencyType,i=t.minPrice,c=t.maxPrice,s=r.customRobuxFilterId,l=r.freeFilterId,u=r.defaultCurrencyId;if(null!=o&&o.currencyType!==u){if(a.CurrencyType=o.currencyType,o.currencyType===s){var d=i&&i.toString().length>9?null:i,p=c&&c.toString().length>9?null:c;p&&d&&d>p&&(d=(n=[p,d])[0],p=n[1]),a.pxMin=null===d?0:d,a.pxMax=p}o.currencyType===l&&(a.pxMin=0,a.pxMax=0)}return a}(n=function(e,t,r){var n=Br({},e),a=t.creator,o=t.creatorName,i=r.defaultCreatorId,c=r.robloxUserId,s=r.customText;return a&&a.userId!==i&&(a.userId===c?n.CreatorID=a.userId:a.userId===s?o&&(n.CreatorName=o):a.userId&&(n.CreatorID=a.userId)),a&&a.type&&(n.CreatorType=a.type),n}(n=function(e,t,r){var n=Br({},e),a=t.category,o=t.subcategory,i=r.gearCategoryId;if(a&&(n.Category=a.categoryId,null!=o))if(a.categoryId===i){var c=parseInt(z.defaults.subcategory,10);o.subcategoryId!==c&&(n.Gears=o.subcategoryId,n.Subcategory=o.subcategoryId)}else n.Subcategory=o.subcategoryId;return n}(n,e,t),e,t),e,t),e);var a=e.sortType,o=e.sortAggregation,i=e.includeNotForSale,c=t.defaultSortTypeId,s=t.defaultSortAggregationId;return null!=a&&a.sortType!==c&&(n.SortType=a.sortType),null!=a&&a.hasSubMenu&&null!=o&&o.sortAggregation!==s&&(n.SortAggregation=o.sortAggregation),i&&(n.IncludeNotForSale=i),n},Vr=window.GoogleAnalyticsEvents||null;var Gr=function(){return{sendErrorsToLogCount:function(e,t){var r,a,o=e.errors,i=z.errorMessages.categoryName,c=[];o.forEach((function(e){var r=e.code,n=""+t+r;c.push({featureName:i,measureName:n,value:1})})),c.length>0&&(r=c,a=z.endpoints.performanceMeasurements,n.httpService.post(a,r))},sendErrorsToGoogleAnalytics:function(e,t){var r=e.errors,n=z.errorMessages.categoryName,a=navigator&&navigator.userAgent?navigator.userAgent:"",o=mt.buildErrorMessages(r,a);Vr.FireEvent([n,t,o])}}},Wr=function(){var t=(0,e.useState)(!1),r=t[0],n=t[1],a=(0,e.useState)(null),o=a[0],i=a[1],c=(0,e.useCallback)((function(){n(!1),i(null)}),[]);return{startPaging:r,setStartPaging:n,nextPageCursor:o,setNextPageCursor:i,resetPagination:c}},Hr=function(){return(Hr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},zr=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},Qr=function(t){var r=t.catalogQuery,n=t.searchOptions,a=t.isInfiniteScrollDisabled,o=t.library,i=t.layout,c=t.isPaginationEnabled,s=t.keyword,l=t.setCurrentUrl,u=t.setIsKeywordCensored,d=t.setIsSearchItemsLoaded,p=t.setLayoutInitialized,m=t.setSearchItemsError,f=t.setCursor,g=t.setLoading,v=t.clearTopics,y=t.setTopics,h=t.translate,b=Gr(),E=Wr(),S=E.startPaging,C=E.setStartPaging,I=E.nextPageCursor,T=E.setNextPageCursor,w=E.resetPagination,x=(0,e.useState)(null),N=x[0],k=x[1],A=(0,e.useState)(null),P=A[0],F=A[1],O=(0,e.useState)(null),D=O[0],U=O[1],R=function(){k(null),F([])},L=(0,e.useCallback)((function(e){m(null),e&&(R(),S||w())}),[m,w,S]),_=(0,e.useCallback)((function(e,t){if(t&&(!e||0===e.length))return m("no_results"),d(!0),void g(!1);var r=z.itemTypes,n={},a=Hr({},N),o=[];null==e||e.forEach((function(e){var t=mt.getCatalogContentKey(e),i=Hr(Hr({},e),{key:t});a[t]=i,null===P||P.indexOf(t),o.push(t);var c=i.id;n[c]=Hr(Hr({},i),{thumbnailType:i&&i.itemType===r.bundle?M.ThumbnailTypes.bundleThumbnail:M.ThumbnailTypes.assetThumbnail})})),F((function(e){return null==e?o:zr(zr([],e),o)})),Dt.getCatalogItemDetails(n,h).then((function(e){mt.updateSearchItemDetails(e,a),k((function(e){return Hr(Hr({},e),a)}))}),(function(e){m("error");var t=null==e?void 0:e.data;if(t){var r=z.errorMessages.endpointNames;b.sendErrorsToGoogleAnalytics(t,r.getCatalogItemDetails),b.sendErrorsToLogCount(t,r.getCatalogItemDetails)}})).finally((function(){d(!0),g(!1)}))}),[b,N,P,d,g,m,h]),B=(0,e.useCallback)((function(e,t){var r=[],n=[],a=0;t.length>0?t.forEach((function(e){var t=mt.formatTopic(e.displayName);n.push(t)})):e.length>0&&e.forEach((function(e){a<z.topics.numberOfItemsToSend&&r.push({targetId:e.id,itemType:"Asset"===e.itemType?z.itemTypeIds.asset:z.itemTypeIds.bundle}),a+=1})),y([]),Dt.postGetTopics(r,n,s).then((function(e){y(e.data.topics||[])}),(function(){v()}))}),[v,s,y]),j=(0,e.useCallback)((function(e,t){var i=jr(r,n);mt.appendQueryParamsToUrl(i,l);var c=Mr(r,i,n,a),s=c.query,f=c.showExpandedResults;return _r()(D,s)?(g(!1),d(!0),!0):(e&&d(!1),g(!0),e&&!t&&R(),U(s),Dt.getSearchItems(Hr({},s),!!o.isFullScreen,f).then((function(t){var n=r.topics,a=r.topicBasedBrowsingEnabledForCategory;L(e);var o=t.data;if(o){var i=o.data,c=o.keyword;n.length<=0&&(mt.isKeywordResultCensored(c)?u(!0):u(!1)),a&&e&&(n.length?B([],n):(null==i?void 0:i.length)&&B(i,[])),T(o.nextPageCursor),_(i,e)}}),(function(t){g(!1),L(e),m("error");var r=null==t?void 0:t.data;if(r){var n=z.errorMessages.endpointNames;b.sendErrorsToGoogleAnalytics(r,n.getSearchItems),b.sendErrorsToLogCount(r,n.getSearchItems)}})).finally((function(){p(!0),C(!1)})),!1)}),[r,n,l,a,D,d,g,o.isFullScreen,L,T,_,u,B,m,b,p,C]),V=(0,e.useCallback)((function(e,t){return e&&!t&&R(),j(e,t)}),[j]),G=(0,e.useState)(!1),W=G[0],H=G[1];(0,e.useEffect)((function(){H(!i.loading&&!!I&&!i.searchItemsError&&i.isSearchItemsLoaded&&!!c)}),[i.loading,I,i.searchItemsError,i.isSearchItemsLoaded,c]);var Q=(0,e.useCallback)((function(){W&&I&&(f(I),T(null))}),[W,I,f,T]);return{canLoadNextPage:W,getPagedItems:V,fetchNextPage:Q,searchResultDict:N,searchResultList:P}},Kr=function(t){var r=(0,e.useState)(0),n=r[0],a=r[1];return(0,e.useEffect)((function(){var e=document.querySelector("."+t);if(e){var r=e,n=function(){a(r.offsetHeight)};n();var o=new ResizeObserver((function(){n()}));return o.observe(r),function(){o.disconnect()}}}),[t]),n},qr=function(){var t=Kr("search-bars")+Kr("rbx-header"),r=(0,e.useState)(null),n=r[0],a=r[1];return(0,e.useEffect)((function(){a(t)}),[t]),{searchFiltersStickyTop:n}},Xr=function(){function e(){}return e.getVngBuyRobuxPolicy=function(){return n.httpService.get(z.endpoints.getVngBuyRobuxBehavior)},e.getAppPolicy=function(){return n.httpService.get(z.endpoints.getAppPolicyBehavior)},e}(),$r=(0,L.withTranslations)((function(e){var r=e.showModal,n=e.onModalClosed,a=e.onModalContinue,o=e.translate,i=t().createElement(t().Fragment,null,t().createElement("p",{className:"modal-body"},o("Description.RedirectToPartnerWebsite",{linebreak:"\n\n"})));return t().createElement(_.SimpleModal,{title:o("Heading.LeavingRoblox"),body:i,show:r,actionButtonShow:!0,actionButtonText:o("Action.ContinueToPayment"),neutralButtonText:o("Action.Cancel"),onAction:a,onNeutral:n,onClose:n})}),{common:[""],feature:"Purchasing.PurchaseDialog"}),Jr=(0,L.withTranslations)((function(r){var n=r.toggleSearchOptions,a=r.search,o=r.searchInputValue,i=r.setSearchInputValue,c=r.isSearchOnBlurEnabled,s=r.numberOfAppliedFilters,l=r.topicBasedBrowsingEnabledForCategory,u=r.catalogQuery,d=r.topics,p=r.setSelectedTopics,m=r.onClearFilters,f=r.clearTopics,g=(0,e.useCallback)((function(e){e.preventDefault(),a(o)}),[o,a]);return t().createElement("div",{className:V()("mobile-search-container")},t().createElement("div",{className:"search-bar"},t().createElement("button",{id:"search-options-button",type:"button",className:"btn-generic-menu-black-md mobile-menu-button",onClick:function(){return n(!0)}},t().createElement("span",{className:"icon-filter-menu-black"}),!!s&&t().createElement("span",{className:"mobile-menu-number-container"},t().createElement("span",{className:"mobile-menu-number"},s))),t().createElement("form",{name:"forms.keywordForm",className:"form-horizontal search-form",onSubmit:g},t().createElement("div",{className:"form-group"},t().createElement("div",{className:"input-group"},t().createElement("input",{className:"form-control input-field",placeholder:"Search",type:"text",maxLength:50,value:o,onChange:function(e){var t=e.target.value;i(t),c&&a(t)}}),t().createElement("div",{className:"input-group-btn"},t().createElement("button",{className:"input-addon-btn",type:"button"},t().createElement("span",{className:"icon-search"}))))))),t().createElement(yt,{topicBasedBrowsingEnabledForCategory:l,catalogQuery:u,topics:d,setSelectedTopics:p,onClearFilters:m,clearTopics:f}))}),K),Yr=function(){var t=Kr("rbx-header")||0,r=Kr("heading-container")||0,n=(0,e.useState)(null),a=n[0],o=n[1];return(0,e.useEffect)((function(){t&&o("calc(100% - "+t+"px)")}),[t]),{mobileSearchOptionsContainerHeight:a,rbxHeaderHeight:t,headingContainerHeight:r}},Zr=function(){function e(){}return e.getVngShopSignedUrl=function(){return n.httpService.get(z.endpoints.getSignedVngShopUrl)},e}(),en=i.AXAnalyticsService.AXAnalyticsConstants,tn=function(t){var r=t.catalogQuery,n=t.numberOfAppliedFilters,a=t.searchItemsError,c=(0,o.useLocation)(),s=new URLSearchParams(c.search),l=!!r.keyword||!!s.get("Keyword"),u=i.AXAnalyticsService.useIsElementVisible(),d=u[0],p=u[1];return(0,e.useEffect)((function(){p&&!a&&i.AXAnalyticsService.sendAXTracking({itemName:en.CatalogView})}),[p]),(0,e.useEffect)((function(){p&&l&&!a&&i.AXAnalyticsService.sendAXTracking({itemName:en.CatalogSearchView})}),[p,a,l]),(0,e.useEffect)((function(){n>0&&!a&&(l?i.AXAnalyticsService.sendAXTracking({itemName:en.CatalogSearchFiltersApplied}):i.AXAnalyticsService.sendAXTracking({itemName:en.CatalogFiltersApplied}))}),[l,n,a,r]),[d]},rn=function(){return(rn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};var nn,an=(0,L.withTranslations)((function(r){var n,a,o=r.translate,l=Kt(),u=l.isMetadataInitialized,d=l.autocompleteAvatarSearchNumToDisplay,p=Rt(),m=zt(),f=m.topUp,g=m.setTopUp,v=m.isSearchOnBlurEnabled,y=m.getAvatarEnrollments,h=tr(u).searchOptions,b=Rr(),E=b.keywordForDisplay,S=b.setKeywordForDisplay,C=b.isKeywordCensored,I=b.setIsKeywordCensored,T=b.setMinPriceForDisplay,w=b.setMaxPriceForDisplay,x=b.setCreatorNameForDisplay,k=b.displayedQuery,P=mr(h,S),F=P.setCategory,D=P.setSubcategory,U=P.setCreator,L=P.setCreatorName,M=P.setCurrencyType,B=P.setMinPrice,j=P.setMaxPrice,V=P.setIncludeNotForSale,G=P.setSalesTypeFilter,W=P.setSortType,H=P.setSortAggregation,Q=P.setSelectedTopics,K=P.setKeyword,q=P.setCursor,X=P.catalogQuery,$=P.keyword,J=P.isCatalogQueryInitialized,Y=P.numberOfAppliedFilters,Z=P.initializeCatalogQuery,ee=Qt(),te=ee.initialized,re=ee.setInitialized,ne=ee.setIsSearchItemsLoaded,ae=ee.searchItemsError,oe=ee.setSearchItemsError,ie=ee.setLoading,ce=ee.adsInitialized,se=ee.setAdsInitialized,le=ee.showError,ue=ee.setShowError,de=ee.layout,pe=_t(),me=pe.library,fe=pe.setupLibrary,ge=(0,e.useState)([]),ve=ge[0],ye=ge[1],he=(0,e.useCallback)((function(e){var t=Z(h,e);S(t.keyword||""),x(t.creatorName||"")}),[Z,h,x,S]),be=(0,e.useState)(window.location.href),Ee=be[0],Se=be[1];(0,e.useEffect)((function(){var e=function(){var e=window.location.href;e!==Ee&&(Se(e),he())};return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[he,Ee,h]);var Ce=tn({catalogQuery:X,numberOfAppliedFilters:Y,searchItemsError:ae})[0],Ie=(0,e.useState)(),Te=Ie[0],we=Ie[1],xe=(0,e.useState)(!0),Ne=xe[0],ke=xe[1];(0,e.useEffect)((function(){we(me.initialized&&!me.isPhone)}),[me]),(0,e.useEffect)((function(){Xr.getAppPolicy().then((function(e){"boolean"==typeof e.data.EnableContinuousLoad?ke(!e.data.EnableContinuousLoad):ke(!0)})).catch((function(){ke(!0)}))}),[]);var Ae=(0,e.useState)(),Pe=Ae[0],Fe=Ae[1];(0,e.useEffect)((function(){var e,t;Fe(null===(t=null===(e=X.category)||void 0===e?void 0:e.isSearchable)||void 0===t||t)}),[X]);var Oe=(0,e.useCallback)((function(){p.refreshAllAds()}),[p]),De=(0,e.useCallback)((function(){Q([])}),[Q]),Ue=(0,e.useCallback)((function(){he()}),[he]);(0,e.useEffect)((function(){h.isSearchOptionsLoaded&&Ue()}),[h]);var Re=Qr({catalogQuery:X,searchOptions:h,isInfiniteScrollDisabled:Ne,library:me,layout:de,isPaginationEnabled:Te,keyword:$,setCurrentUrl:Se,setIsKeywordCensored:I,setIsSearchItemsLoaded:ne,setLayoutInitialized:re,setSearchItemsError:oe,setCursor:q,setLoading:ie,clearTopics:De,setTopics:ye,translate:o}),Le=Re.getPagedItems,_e=Re.fetchNextPage,Me=Re.canLoadNextPage,Be=Re.searchResultDict,je=Re.searchResultList;(0,e.useEffect)((function(){if(J){var e=!!X.cursor;if(Le(!e,!0))return;Oe(),e||window.scrollTo({top:0,behavior:"smooth"})}}),[X,J]);var Ve=(0,e.useState)(!1),Ge=Ve[0],We=Ve[1],He=(0,e.useState)(z.buyRobuxUrl),ze=He[0],Qe=He[1],Ke=(0,e.useState)(!1),qe=Ke[0],Xe=Ke[1],$e=(0,e.useState)(!1),Je=$e[0],Ye=$e[1];(0,e.useEffect)((function(){Xr.getVngBuyRobuxPolicy().then((function(e){We(e.data.shouldShowVng),Qe("#")})).catch((function(){We(!1),Qe(z.buyRobuxUrl)}))}),[]);var Ze=function(){K("")},et=function(e,t){var r;U(null===(r=h.creators)||void 0===r?void 0:r.find((function(e){return e.userId===h.defaultCreatorId}))),e?Ze():function(e){M(h.currencyTypes?h.currencyTypes[0]:void 0),e||Ze()}(t)},tt=function(e){!function(e,t){e?Ze():et(!1,t)}(!1,e)},rt=function(){s.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(s.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_ROBUX_PURCHASE,!1,s.paymentFlowAnalyticsService.ENUM_VIEW_NAME.CATALOG_LIST_PAGE,s.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,s.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.BUY_ROBUX),Ge?Xe(!0):window.location.href=z.buyRobuxUrl},nt=function(e){return mt.getCategoryMenu(h.categories,null==e?void 0:e.categoryId)},at=function(e,t,r,n,a){var o;r&&(K(null),De()),a&&e.stopPropagation();var i=a;if(!i){var c=nt(n);c&&c.subcategories&&(i=null===(o=c.subcategories)||void 0===o?void 0:o[0])}F(n),D(i),t&&tt(!r)},ot=function(){te||(!function(e,t){var r,n=function(t){e.logWebVitalsEvent(function(e){return{eventName:"webPerformance",metricName:e.name,metricValue:e.value}}(t))},a={},o=function(e){a[e.name]?a[e.name].push(e):a[e.name]=[e]},i=function(){Object.keys(a).forEach((function(e){var t=a[e];n(t.pop()),delete a[e]}))},c=window.setTimeout(i,(null==t?void 0:t.reportThreshold)||1e4);window.addEventListener("beforeunload",(function(){window.clearTimeout(c),i()})),R(n),N(n),r=n,window.performance&&window.addEventListener("load",(function(){var e=performance.getEntriesByType("navigation")[0];r({name:"DCL",value:e.domContentLoadedEventStart})})),function(e){window.performance&&window.addEventListener("load",(function(){var t=performance.getEntriesByType("navigation")[0];e({name:"LT",value:t.domComplete})}))}(n),A(o,{reportAllChanges:!0}),O(o,{reportAllChanges:!0})}({logWebVitalsEvent:function(e){c().EventStream.SendEventWithTarget(e.eventName,"RobloxWWW",{metricName:e.metricName,metricValue:e.metricValue},c().EventStream.TargetTypes.WWW)}}),fe(),ce||(se(!0),p.registerAd(p.adIds.leaderboardAbp)),!0===i.CurrentUser.isAuthenticated&&Dt.getUserCurrency().then((function(e){g((function(t){return rn(rn({},t),{currentUserBalance:e.data.robux})}))}),(function(){})),y())};(0,e.useEffect)((function(){ot()}),[]);var it=(0,e.useCallback)((function(e){var t,r=null===(t=h.salesTypeFilters)||void 0===t?void 0:t.find((function(t){return t.filter===e}));G(r)}),[h.salesTypeFilters,G]),ct=(0,e.useCallback)((function(e){var t,r=null===(t=h.sortMenus)||void 0===t?void 0:t.sortOptions.find((function(t){return t.sortType===e}));W(r)}),[null===(n=h.sortMenus)||void 0===n?void 0:n.sortOptions,W]),st=(0,e.useCallback)((function(e){var t,r=null===(t=h.sortMenus)||void 0===t?void 0:t.sortAggregations.find((function(t){return t.sortAggregation===e}));H(r)}),[null===(a=h.sortMenus)||void 0===a?void 0:a.sortAggregations,H]),lt=me.isFullScreen,ut=me.catalogUrl,dt=qr().searchFiltersStickyTop,pt=Yr(),ft=pt.mobileSearchOptionsContainerHeight,gt=pt.rbxHeaderHeight,vt=gt-pt.headingContainerHeight,yt={searchOptions:h,catalogQuery:X,displayedQuery:k,setCreatorNameForDisplay:x,setMinPriceForDisplay:T,setMaxPriceForDisplay:w,updateCategory:at,categoryClick:function(e,t){t.subcategories&&0!==t.subcategories.length||(De(),F(t),D(void 0),tt(!1))},categoryNameClick:function(e,t){var r;De(),F(t),D(void 0),tt(!1),"true"===(null===(r=null===document||void 0===document?void 0:document.getElementById("expandable-menu-category-"+t.categoryId))||void 0===r?void 0:r.getAttribute("aria-expanded"))&&e.stopPropagation()},isCurrentCategorySearchable:Pe||!1,menuConstantsCategoryTypesCommunityCreations:qt.categoryTypes.CommunityCreations,onSalesTypeFilterChanged:it,onSortTypeChanged:ct,onSortAggregationChanged:st,onUnavailableFilterChanged:function(e){V(e)},onCreatorChanged:function(e){U(e)},applyCreatorNameToQuery:function(e){L(e)},applyMinPriceToQuery:function(e){B(e)},applyMaxPriceToQuery:function(e){j(e)},onCurrencyTypeChanged:function(e){M(e)},isSearchOnBlurEnabled:v,closeSearchOptions:function(){Ye(!1)},resetFilters:function(){he(!0)},isPhone:me.isPhone};return t().createElement("div",{id:"catalog-react-page",ref:Ce},t().createElement("div",{className:"alert-system-feedback"},t().createElement("div",{className:"alert alert-warning "+(le?"on":"")},t().createElement("span",{className:"alert-content"},o("Response.Error.Filter")),t().createElement("button",{type:"button","aria-label":"Close",onClick:function(){ue(!1)},className:"icon-close-white"}))),t().createElement("div",{id:"angular-react-purchase-handoff","data-identifier":"direct-purchase"}),t().createElement("div",{id:"catalog-content",className:"clearfix catalog-content sticky shopping-cart "+(lt?"catalog-full-screen":"")},t().createElement("div",{className:"search-bars search-bar-placement-right",style:{"--heading-container-mobile-height":vt+"px"}},t().createElement("div",{className:"heading-container"},t().createElement("h1",{className:"heading"},t().createElement("a",{href:ut,target:"_self"},o("Heading.Marketplace"))),t().createElement("a",{className:"btn-growth-md buy-robux",href:ze,target:"_self",onClick:rt},o("Action.BuyRobux")),Ge&&t().createElement($r,{showModal:qe,onModalClosed:function(){Xe(!1)},onModalContinue:function(){s.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(s.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_ROBUX_PURCHASE,!1,s.paymentFlowAnalyticsService.ENUM_VIEW_NAME.CATALOG_LIST_PAGE,s.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,s.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.CONTINUE_TO_VNG),Xe(!1),Zr.getVngShopSignedUrl().then((function(e){e?window.open(e.data.vngShopRedirectUrl,"_blank"):window.open(z.fallbackVngShopUrl,"_blank")}),(function(e){window.open(z.fallbackVngShopUrl,"_blank")}))}})),t().createElement("div",{hidden:!te},t().createElement(Jr,{searchInputValue:E,setSearchInputValue:S,toggleSearchOptions:function(){Ye((function(e){return!e}))},search:K,isSearchOnBlurEnabled:v,numberOfAppliedFilters:Y,topicBasedBrowsingEnabledForCategory:X.topicBasedBrowsingEnabledForCategory,catalogQuery:X,topics:ve,setSelectedTopics:Q,onClearFilters:tt,clearTopics:De}),t().createElement(Ur,{keywordForDisplay:E,setKeywordForDisplay:S,search:K,catalogQuery:X,categories:h.categories,hasSearchOptionsError:h.hasSearchOptionsError,autocompleteAvatarSearchNumToDisplay:d,library:me,updateCategory:at,buyRobuxButtonOnClick:rt,buyRobuxButtonUrl:ze,getCategoryDropdownValue:function(){var e=X.category,t=X.subcategory;return e?e.categoryId===h.gearCategoryId&&t&&t.subcategoryId!==h.defaultGearSubcategoryId?t.name:e.name:""},isSearchOnBlurEnabled:v}))),t().createElement("div",{id:"main-view"},t().createElement(bt,{layout:de,topicBasedBrowsingEnabledForCategory:X.topicBasedBrowsingEnabledForCategory,setSelectedTopics:Q,onClearFilters:tt,clearTopics:De,topUp:f,catalogQuery:X,isKeywordCensored:C,searchOptions:h,fetchNextPage:_e,canLoadNextPage:Me,searchResultDict:Be,searchResultList:je,isInfiniteScrollDisabled:Ne,isPaginationEnabled:!!Te,library:me,topics:ve,getCategoryOption:nt,setSubcategory:D,setCreator:U,setCurrencyType:M,clearKeyword:Ze,onTopUpClear:function(){s.localStorageService.setLocalStorage("Roblox.AvatarMarketplace.TopUpClearDate-"+i.CurrentUser.userId,Date.now()),g((function(e){return rn(rn({},e),{showTopUp:!1})}))}})),h.isSearchOptionsLoaded&&t().createElement("div",{id:"search-options-scrollbar-container",className:"search-options-scrollbar-container",style:null!==dt?{top:dt+"px",position:"sticky",maxHeight:"calc(100vh - "+dt+"px)"}:void 0},t().createElement(_.ScrollBar,{className:"rbx-scrollbar"},t().createElement(kt,rn({},yt,{isMobile:!1})))),!h.isSearchOptionsLoaded&&t().createElement("div",{id:"shimmer-menu-container"},t().createElement(Ft,null))),Je&&t().createElement("div",{className:"mobile-search-options-container",style:{top:gt,height:null!==ft?ft:"auto"},role:"button",onClick:function(e){e.stopPropagation(),Ye(!1)}},t().createElement("div",{className:"mobile-search-options",onClick:function(e){e.stopPropagation()}},t().createElement(kt,rn({},yt,{isMobile:!0})))))}),K),on=(nn=function(e,t){return(nn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}nn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return on(t,e),t.prototype.componentDidCatch=function(e,t){var r,n,a=this.props.containerName,o=(null===(n=null===(r=t.componentStack)||void 0===r?void 0:r.split("\n")[1])||void 0===n?void 0:n.trim())||"Unknown Component",c=/at (\w+)/.exec(o),s=(c?c[1]:"UnknownComponent")+"_"+e.message.toLowerCase().replace(/\s+/g,"_").slice(0,30),l=JSON.stringify({message:e.message,stack:e.stack,componentStack:t.componentStack});i.AXAnalyticsService.reportAXError({itemName:s,counterName:a,log:l})},t.prototype.render=function(){return this.props.children},t}(t().Component);var sn=function(){return t().createElement(cn,{containerName:"CatalogPageContainer"},t().createElement(an,null))};(0,n.ready)((function(){var e=document.getElementById("catalog-react-container");e&&(0,a.render)(t().createElement(o.BrowserRouter,null,t().createElement(sn,null)),e)}))}()}();
//# sourceMappingURL=https://js.rbxcdn.com/35380973487d9935e48f869bb2b74a34-catalogReact.bundle.min.js.map

!function(){"use strict";var e,t={n:function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},n=React,r=t.n(n),i=(ReactDOM,ReactStyleGuide),a=RobloxThumbnails,l=CoreUtilities,o=RobloxItemPurchase,c=Roblox,s=CoreRobloxUtilities,u="catalog",m="bundles",d="bundle",f={maxSelectedItems:20},v=function(){return(v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},p=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},h=(e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",function(t){void 0===t&&(t=12);for(var n="",r=0;r<t;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return n});function b(){return"Roblox.AvatarMarketplace.Cart:"+(c.CurrentUser.isAuthenticated&&c.CurrentUser.userId||"")}function I(){var e=b();return v({totalPrice:null,currentUserBalance:null,items:[],selectedItems:{},resellers:{},purchaseParams:{},itemDetails:{}},s.localStorageService.getLocalStorage(e))}function y(e){var t=b();s.localStorageService.setLocalStorage(t,e)}function g(e){var t,n,r=e.lowestPrice;return void 0!==e.collectibleItemId&&"ExperiencesDevApiOnly"===e.collectibleItemDetails.saleLocationType?r=e.collectibleItemDetails.lowestResalePrice:c.CurrentUser.isPremiumUser&&void 0!==e.premiumPricing&&void 0!==(null===(t=e.premiumPricing)||void 0===t?void 0:t.premiumPriceInRobux)?r=null===(n=e.premiumPricing)||void 0===n?void 0:n.premiumPriceInRobux:void 0===r&&(r=e.price),r||0}function E(e){var t=e.items,n=e.itemDetails,r=t.reduce((function(e,t){var r=n[t.itemId];if(void 0===r)return e;var i=g(r);return i<0&&(i=0),e+(i||0)}),0);return v(v({},e),{totalPrice:r})}function w(e,t){var n=e.itemDetails;return t.reduce((function(e,t){if(void 0===n[t.itemId])return e;var r=g(n[t.itemId]);return r<0&&(r=0),e+(r||0)}),0)}function C(e){return v(v({},e),{creatorType:"Group"===e.creatorType?"Group":"User",itemType:"Bundle"===e.itemType?"Bundle":"Asset",price:void 0===e.price?-1:e.price,bundledItems:[]})}function S(e,t){var n,r=document.querySelectorAll(t);if(null==r?void 0:r.length)for(var i=0;i<r.length;i++){var a=r[i];if(null===(n=a.contains)||void 0===n?void 0:n.call(a,e))return!0}return!1}var T,N=function(e,t,n){var r=u;return function(e){return e.toLowerCase().includes(d)}(n)&&(r=m),c.EnvironmentUrls.websiteUrl+"/"+r+"/"+e+"/"+l.seoName.formatSeoName(t)},x={common:[""],feature:"Feature.Catalog"},R=new c.TranslationResourceProvider,P={featureCatalog:R.getTranslationResource(x.feature),featureItem:R.getTranslationResource("Feature.Item"),featureItemModel:R.getTranslationResource("Feature.ItemModel")},k=function(){return P.featureCatalog.get("Action.Buy",{})},D=function(){return P.featureCatalog.get("LabelNoResellers",{})},A=function(){return P.featureCatalog.get("Action.AddToCart",{})},U=function(){return P.featureCatalog.get("Action.RemoveFromCart",{})},F=function(e){return P.featureCatalog.get("Heading.ItemAddedToCart",e)},O=function(e){return P.featureCatalog.get("Heading.ItemRemovedFromCart",e)},L=function(e){return P.featureCatalog.get("Message.RemainingBalance",e)},M=function(){return P.featureCatalog.get("Message.InsufficientFundsForTransaction",{})},_=function(){return P.featureCatalog.get("Label.ShoppingCart",{})},B=function(e){return P.featureCatalog.get("Label.TotalItems",e)},H=function(e){return P.featureCatalog.get("Message.PurchaseLimit",e)},j=function(e){return P.featureCatalog.get("Heading.ItemsRemovedFromCart",e)},G=function(e){return P.featureCatalog.get("Heading.ItemsAddedToCart",e)},V=function(){return P.featureItem.get("Label.Free",{})},W=function(){return P.featureItem.get("Label.ItemNotForSale",{})},z=function(){return(z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},q=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function l(e){try{c(r.next(e))}catch(e){a(e)}}function o(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}c((r=r.apply(e,t||[])).next())}))},X=function(e,t){var n,r,i,a,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,r=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!(i=l.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){l=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){l.label=a[1];break}if(6===a[0]&&l.label<i[1]){l.label=i[1],i=a;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(a);break}i[2]&&l.ops.pop(),l.trys.pop();continue}a=t.call(e,l)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}},J=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};function Y(e){var t;return q(this,void 0,Promise,(function(){var n,r,i,a,l,o;return X(this,(function(c){switch(c.label){case 0:return n=I(),(null==e?void 0:e.item)?(null===(t=n.items)||void 0===t?void 0:t.find((function(t){return t.itemId&&t.itemId===e.item.itemId})))?[2,n]:[4,le([r={itemId:e.item.itemId,itemType:e.item.itemType,itemName:e.item.itemName,collectibleItemId:e.item.collectibleItemId,addedToCardAt:Date.now()}])]:[2,n];case 1:return i=c.sent(),(a=n.itemDetails)[r.itemId]=i[r.itemId],(l=n.selectedItems)[""+e.item.itemType.toLowerCase()+e.item.itemId]=!0,y(o=E(z(z({},n),{itemDetails:a,items:J(J([],n.items),[r]),selectedItems:l}))),e.displaySystemFeedback&&void 0!==T&&T.success(F({itemName:r.itemName?r.itemName:""}),0,2e3),[2,o]}}))}))}function K(e){return q(this,void 0,Promise,(function(){var t,n,r,i,a;return X(this,(function(l){switch(l.label){case 0:return t=I(),(null==e?void 0:e.items)?(n=t.selectedItems,r=t.itemDetails,i=e.items.map((function(e){var r;if(null===(r=t.items)||void 0===r?void 0:r.find((function(t){return t.itemId&&t.itemId===e.itemId&&t.itemType===e.itemType})))return null;var i={itemId:e.itemId,itemType:e.itemType,itemName:e.itemName,collectibleItemId:e.collectibleItemId,addedToCardAt:Date.now()};return n[""+e.itemType.toLowerCase()+e.itemId]=!0,i})).filter((function(e){return null!==e})),[4,Promise.all(i.map((function(e){return le([e])})))]):[2,t];case 1:return l.sent().forEach((function(e,t){r[i[t].itemId]=e[i[t].itemId]})),y(a=E(z(z({},t),{itemDetails:r,items:J(J([],t.items),i),selectedItems:n}))),e.displaySystemFeedback&&void 0!==T&&T.success(G({itemCount:""+e.items.length}),0,2e3),[2,a]}}))}))}function Q(e){var t,n,r,i=null===(t=null==e?void 0:e.item)||void 0===t?void 0:t.itemId,a=null===(n=null==e?void 0:e.item)||void 0===n?void 0:n.itemType,l=I(),o="";if(!i)return l;var c=null===(r=(null==l?void 0:l.items)||[])||void 0===r?void 0:r.filter((function(e){return!e.itemId||e.itemId!==i||!e.itemType||e.itemType!==a||(e,o=e.itemName?e.itemName:"",!1)})),s=l.selectedItems,u=l.resellers;delete s[""+a.toLowerCase()+i],delete u[i];var m=E(z(z({},l),{selectedItems:z({},s),resellers:z({},u),items:c}));return y(m),e.displaySystemFeedback&&void 0!==T&&T.success(O({itemName:o}),0,2e3),m}function Z(e){var t=I(),n=t.selectedItems,r=t.resellers,i=t.items;e.items.forEach((function(e){var t,a=null==e?void 0:e.itemId,l=null==e?void 0:e.itemType;return!!a&&(i=null===(t=i||[])||void 0===t?void 0:t.filter((function(e){return!e.itemId||e.itemId!==a||!e.itemType||e.itemType!==l||(e,e.itemName?e.itemName:"",!1)})),delete n[""+l.toLowerCase()+a],delete r[a],!0)}));var a=E(z(z({},t),{selectedItems:z({},n),resellers:z({},r),items:i}));return y(a),e.displaySystemFeedback&&void 0!==T&&T.success(j({itemCount:""+e.items.length}),0,2e3),a}function $(){var e;return q(this,void 0,Promise,(function(){var t,n,r,i,a,l,o,c,s;return X(this,(function(u){switch(u.label){case 0:t=I(),u.label=1;case 1:return u.trys.push([1,6,,7]),(n={items:t.items,selectedItems:t.selectedItems,totalPrice:t.totalPrice,currentUserBalance:t.currentUserBalance,resellers:t.resellers,itemDetails:t.itemDetails}).items||(n.items=[]),(null===(e=n.items)||void 0===e?void 0:e.length)?[4,le(n.items)]:[3,4];case 2:return r=u.sent(),n.items=n.items.map((function(e){var t=null==r?void 0:r[e.itemId];return t?z(z({},e),{itemName:t.name,collectibleItemId:t.collectibleItemId||null}):e})),Object.keys(r).length&&(n.itemDetails=z(z({},n.itemDetails),r)),[4,oe(n)];case 3:i=u.sent(),Object.keys(i).length&&(n.resellers=z(z({},n.resellers),i)),u.label=4;case 4:return a=n.items.map((function(e){return e.itemId.toString()})),l=Object.keys(n.itemDetails),o=Object.keys(n.resellers),a.length!==l.length&&l.forEach((function(e){a.includes(e)||delete n.itemDetails[e]})),a.length!==o.length&&o.forEach((function(e){a.includes(e)||delete n.resellers[e]})),[4,ce()];case 5:return c=u.sent(),n.currentUserBalance=c,y(s=E(n)),[2,s];case 6:return u.sent(),[2,t];case 7:return[2]}}))}))}function ee(e){return q(this,void 0,Promise,(function(){return X(this,(function(t){return(null==e?void 0:e.type)?"ADD_ITEM"===e.type?[2,Y(e)]:"ADD_ITEMS"===e.type?[2,K(e)]:"REMOVE_ITEM"===e.type?[2,Q(e)]:"REMOVE_ITEMS"===e.type?[2,Z(e)]:"REFRESH_CART"===e.type?[2,$()]:[2,console.error('reducer action unknown a "type" property',e)]:[2,console.error('reducer action missing a "type" property',e)]}))}))}var te=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function l(e){try{c(r.next(e))}catch(e){a(e)}}function o(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}c((r=r.apply(e,t||[])).next())}))},ne=function(e,t){var n,r,i,a,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,r=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!(i=l.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){l=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){l.label=a[1];break}if(6===a[0]&&l.label<i[1]){l.label=i[1],i=a;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(a);break}i[2]&&l.ops.pop(),l.trys.pop();continue}a=t.call(e,l)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}},re=c.EnvironmentUrls.economyApi,ie=[];function ae(e){return void 0===e&&(e=[]),te(this,void 0,Promise,(function(){var t,n;return ne(this,(function(r){switch(r.label){case 0:return t=e.map((function(e){return{id:e.itemId,itemType:e.itemType}})),[4,c.ItemDetailsHydrationService.getItemDetails(t,!1,!0)];case 1:return(n=r.sent())?[2,n.map(C)]:[2,[]]}}))}))}function le(e){return void 0===e&&(e=[]),te(this,void 0,Promise,(function(){var t,n;return ne(this,(function(r){switch(r.label){case 0:return t={},(null==e?void 0:e.length)?(n=function(e){return void 0===e&&(e=[]),e.reduce((function(e,t){var n=e[0],r=e[1];return t.collectibleItemId?[n,p(p([],r),[t])]:[p(p([],n),[t]),r]}),[[],[]])}(e),n[0],n[1],[4,ae(e)]):[2,t];case 1:return r.sent().forEach((function(e){t[e.id]=e})),[2,t]}}))}))}function oe(e){return te(this,void 0,Promise,(function(){var t,n,r,i,a,o,s,u;return ne(this,(function(m){switch(m.label){case 0:return t={},e.items,e.itemDetails,n=function(e){var t=e.items,n=e.itemDetails;return t.reduce((function(e,t){var r=e.limited1,i=e.limited2,a=n[t.itemId],l=t.collectibleItemId||a.collectibleItemId;if(l){var o=v(v({},t),{collectibleItemId:l});return{limited1:r,limited2:p(p([],i),[o])}}return(null==a?void 0:a.itemRestrictions.includes("Limited"))||(null==a?void 0:a.itemRestrictions.includes("LimitedUnique"))?{limited1:p(p([],r),[t]),limited2:i}:{limited1:r,limited2:i}}),{limited1:[],limited2:[]})}(e),r=n.limited1,i=n.limited2,r.length||i.length?r.length?[4,Promise.all(r.map((function(e){return function(e){var t;return te(this,void 0,Promise,(function(){var n,r;return ne(this,(function(i){switch(i.label){case 0:return e?(n={url:re+"/v1/assets/"+e+"/resellers?cursor=&limit=100",withCredentials:!0},[4,l.httpService.get(n)]):[2,{itemId:e,resellers:[]}];case 1:return 200===(r=i.sent()).status&&(null===(t=r.data)||void 0===t?void 0:t.data)?[2,{itemId:e,resellers:r.data.data||[]}]:[2,{itemId:e,resellers:[]}]}}))}))}(e.itemId)})))]:[3,2]:[2,t];case 1:return o=m.sent(),[3,3];case 2:o=[],m.label=3;case 3:return a=o,i.length?[4,Promise.all(i.map((function(e){return function(e,t){var n;return te(this,void 0,Promise,(function(){var r,i;return ne(this,(function(a){switch(a.label){case 0:return e&&t?[4,l.httpService.get({url:c.EnvironmentUrls.apiGatewayUrl+"/marketplace-sales/v1/item/"+t+"/resellers?limit=30",retryable:!0,withCredentials:!0})]:[2,{itemId:e,collectibleItemId:t,resellers:[]}];case 1:return r=a.sent(),i=((null===(n=r.data)||void 0===n?void 0:n.data)||[]).filter((function(e){var t,n;return(null===(n=null===(t=e.seller)||void 0===t?void 0:t.sellerId)||void 0===n?void 0:n.toString())!==c.CurrentUser.userId})),[2,{itemId:e,collectibleItemId:t,resellers:i}]}}))}))}(e.itemId,e.collectibleItemId)})))]:[3,5];case 4:return u=m.sent(),[3,6];case 5:u=[],m.label=6;case 6:return s=u,a.forEach((function(e){e.itemId&&(t[e.itemId]=e.resellers)})),s.forEach((function(e){e.itemId&&(t[e.itemId]=e.resellers)})),[2,t]}}))}))}function ce(){var e,t;return te(this,void 0,Promise,(function(){var n,r;return ne(this,(function(i){switch(i.label){case 0:return n={url:re+"/v1/users/"+c.CurrentUser.userId+"/currency",withCredentials:!0},[4,l.httpService.get(n)];case 1:return 200===(r=i.sent()).status?[2,null!==(t=null===(e=null==r?void 0:r.data)||void 0===e?void 0:e.robux)&&void 0!==t?t:null]:[2,null]}}))}))}var se=function(){var e={state:{items:[],selectedItems:{},totalPrice:null,currentUserBalance:null,resellers:{},itemDetails:{}}};function t(e){var t=function(e){var t="s_"+h(8)+Date.now(),n={subscriptionId:t,handler:e};return ie.push(n),{listeners:ie,listener:n,subscriptionId:t}}(e);return{remove:function(){var e;e=t.subscriptionId,ie=ie.filter((function(t){var n=t.subscriptionId;return!(n&&n===e)}))}}}var n=function(t){return te(void 0,void 0,void 0,(function(){var n;return ne(this,(function(r){switch(r.label){case 0:return[4,ee(t)];case 1:return(n=r.sent())&&(e.state=n,i=n,ie.forEach((function(e){e.subscriptionId;var t=e.handler;try{null==t||t(i)}catch(e){console.error("emitStateChange err:",e)}}))),[2]}var i}))}))};return function(){return{getCartState:I,onCartStateChange:t,dispatch:n,getLatestCachedState:function(){return e.state}}}}(),ue=function(){return(ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},me=function(e,t){var n,r,i;return{type:"REMOVE_ITEM",item:ue(ue({},e),{itemId:null!==(r=null!==(n=e.itemId)&&void 0!==n?n:e.id)&&void 0!==r?r:null===(i=null==e?void 0:e.item)||void 0===i?void 0:i.id}),displaySystemFeedback:t}},de=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function l(e){try{c(r.next(e))}catch(e){a(e)}}function o(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,o)}c((r=r.apply(e,t||[])).next())}))},fe=function(e,t){var n,r,i,a,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,r=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!(i=l.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){l=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){l.label=a[1];break}if(6===a[0]&&l.label<i[1]){l.label=i[1],i=a;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(a);break}i[2]&&l.ops.pop(),l.trys.pop();continue}a=t.call(e,l)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}},ve=se(),pe=ve.getCartState,he=ve.onCartStateChange,be=ve.dispatch,Ie=ve.getLatestCachedState;function ye(){var e=this,t=(0,n.useState)(Ie()),r=t[0],i=t[1],a=r.items.map((function(e){return e.itemId})).sort();(0,n.useEffect)((function(){var e=pe();i(e),be({type:"REFRESH_CART"}).catch((function(){console.error("could not refresh cart state")}))}),[]),(0,n.useEffect)((function(){var e=he((function(e){return i(e)}));return function(){var t;return null===(t=null==e?void 0:e.remove)||void 0===t?void 0:t.call(e)}}),[]);var l=(0,n.useCallback)((function(e){return a.includes(e)}),[JSON.stringify(a)]);return{dispatch:be,cart:r,isItemInCart:l,addItemToCart:function(t,n){return de(e,void 0,void 0,(function(){return fe(this,(function(e){switch(e.label){case 0:return[4,be({type:"ADD_ITEM",item:t,displaySystemFeedback:n})];case 1:return e.sent(),[2,be({type:"REFRESH_CART"})]}}))}))},addItemsToCart:function(t,n){return de(e,void 0,void 0,(function(){return fe(this,(function(e){switch(e.label){case 0:return[4,be({type:"ADD_ITEMS",items:t,displaySystemFeedback:n})];case 1:return e.sent(),[2,be({type:"REFRESH_CART"})]}}))}))},removeItemFromCart:function(t,n,r){return de(e,void 0,void 0,(function(){return fe(this,(function(e){switch(e.label){case 0:return[4,be({type:"REMOVE_ITEM",item:{itemId:t,itemType:n},displaySystemFeedback:r})];case 1:return e.sent(),[2,be({type:"REFRESH_CART"})]}}))}))},removeItemsFromCart:function(t,n){return de(e,void 0,void 0,(function(){return fe(this,(function(e){switch(e.label){case 0:return[4,be({type:"REMOVE_ITEMS",items:t,displaySystemFeedback:n})];case 1:return e.sent(),[2,be({type:"REFRESH_CART"})]}}))}))}}}var ge=function(){return(ge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ee=a.Thumbnail2d,we=a.DefaultThumbnailSize,Ce=a.ThumbnailTypes,Se=a.ThumbnailFormat;function Te(e){e.item;var t=e.itemDetails,n=g(t);if(void 0!==t.collectibleItemId){var i="ShopAndAllExperiences"===t.saleLocationType||"ShopOnly"===t.saleLocationType,a=t.hasResellers;if(!i&&!a)return r().createElement("div",{className:"item-price"},r().createElement("span",{className:"price-text text-alert"},W()))}if("number"==typeof n&&n>0)return r().createElement("div",{className:"item-price"},r().createElement("span",{className:"icon-robux-16x16"}),r().createElement("span",{className:"price-text text"},l.numberFormat.getNumberFormat(n)));if("number"==typeof n&&n<0)return r().createElement("div",{className:"item-price"},r().createElement("span",{className:"price-text text"},t.priceStatus));if("number"==typeof n&&0===n)return r().createElement("div",{className:"item-price"},r().createElement("span",{className:"price-text text"},V()));var o=((null==t?void 0:t.itemRestrictions)||[]).some((function(e){return"Limited"===e||"LimitedUnique"===e||"Collectible"===e}));if(o){if(o&&!!(null==t?void 0:t.lowestPrice)&&"number"!=typeof(null==t?void 0:t.lowestPrice))return r().createElement("div",{className:"item-price"},r().createElement("span",{className:"price-text text-alert"},D()))}else if("number"!=typeof n)return r().createElement("div",{className:"item-price"},r().createElement("span",{className:"price-text text-alert"},W()));return r().createElement("div",{className:"item-price"},r().createElement("span",{className:"price-text"}))}function Ne(e){var t,n=e.item,i=e.itemDetails,a=e.dispatch,l=e.onCheckboxClicked,o=e.selectedItemsRecord,c=(null==i?void 0:i.name)||n.itemName,s=null==i?void 0:i.creatorName;return r().createElement("div",{className:"cart-item-container"},r().createElement("div",{className:"cart-item"},r().createElement("div",{className:"thumbnail-container",onClick:function(){return l(n)},"aria-hidden":"true"},r().createElement(Ee,{type:"bundle"===(null===(t=n.itemType)||void 0===t?void 0:t.toLowerCase())?Ce.bundleThumbnail:Ce.assetThumbnail,size:we,targetId:n.itemId,containerClass:"cart-item-thumb",format:Se.webp,altName:(c||"Cart Item")+(s?" by "+s:"")})),r().createElement("div",{className:"checkbox purchase-checkbox-container"},r().createElement("input",{className:"input-checkbox",id:"checkbox-"+n.itemId,type:"checkbox",checked:o[""+n.itemType.toLowerCase()+n.itemId],onChange:function(){l(n)},disabled:!1}),r().createElement("label",{htmlFor:"checkbox-"+n.itemId})),r().createElement("div",{className:"item-details-container"},r().createElement("a",{href:N(n.itemId,c,n.itemType),target:"_self",className:"item-name"},c),r().createElement(Te,{item:n,itemDetails:i}))),r().createElement("div",{className:"rm-item-btn-container icon-actions-clear-sm"},r().createElement("button",{type:"button",onClick:function(){a(me(n,!0)).catch((function(){console.error("Failed to remove item")}))}})))}function xe(e){var t,a=e.totalPrice,u=e.remainingBalance,m=e.items,d=e.selectedItemsList,v=e.systemFeedbackService,p=e.totalCartValue,h=e.itemDetails,b=e.dispatch,I=function(e){var t;if(e.itemRestrictions.includes("LimitedUnique")||e.itemRestrictions.includes("Limited"))return!0;if(void 0!==e.collectibleItemId&&void 0!==e.collectibleItemDetails&&e.itemRestrictions.includes("Collectible")){if(!(void 0!==e.collectibleItemDetails.unitsAvailableForConsumption&&e.collectibleItemDetails.unitsAvailableForConsumption>0))return!0;if(void 0!==e.collectibleItemDetails.lowestResalePrice&&e.collectibleItemDetails.lowestResalePrice>(null===(t=e.collectibleItemDetails)||void 0===t?void 0:t.price)||"ExperiencesDevApiOnly"===e.collectibleItemDetails.saleLocationType)return!0}return!1},y=(0,n.useCallback)((function(e,t,n){var r={totalNumberOfItemsInCart:m.length,totalValueOfItemsInCart:p,totalNumberOfSelectedItemsInCheckout:t,totalValueOfSelectedItemsInCheckout:n,purchaseData:JSON.stringify(e),userId:c.CurrentUser.userId};s.eventStreamService.sendEvent({name:"shoppingCartPurchaseResult",type:"shoppingCartPurchaseResult",context:"shoppingCart"},r),s.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(s.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_CATALOG_CART_ROBUX_UPSELL,!0,s.paymentFlowAnalyticsService.ENUM_VIEW_NAME.ROBUX_UPSELL,s.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,s.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.BUY_ROBUX);var i=0,a=[];e.forEach((function(e){if("Success"===e.data.reason){var t=void 0;void 0!==e.data.itemData.assetId?(t=h[e.data.itemData.assetId],I(t)?void 0!==t.collectibleItemId&&void 0!==t.collectibleItemDetails.lowestResalePrice?i+=t.collectibleItemDetails.lowestResalePrice:void 0!==t.lowestPrice&&(i+=t.lowestPrice):void 0!==t&&t.price&&(i+=t.price),a.push({itemType:t.itemType,itemId:t.id,resalePurchase:I(t)}),b(me({itemId:e.data.itemData.assetId,itemType:"Asset"})).catch((function(){console.error("Failed to remove item")}))):void 0!==e.data.itemData.bundleId&&(t=h[e.data.itemData.bundleId],I(t)?void 0!==t.collectibleItemId&&void 0!==t.collectibleItemDetails.lowestResalePrice?i+=t.collectibleItemDetails.lowestResalePrice:void 0!==t.lowestPrice&&(i+=t.lowestPrice):void 0!==t&&t.price&&(i+=t.price),a.push({itemType:t.itemType,itemId:t.id,resalePurchase:I(t)}),b(me({itemId:e.data.itemData.bundleId,itemType:"Bundle"})).catch((function(){console.error("Failed to remove item")})))}}));var l={totalTransactionValue:i,transactionItems:JSON.stringify(a),purchaseType:"shopping-cart",userId:c.CurrentUser.userId};s.eventStreamService.sendEvent({name:"marketplaceWebPurchaseSuccess",type:"marketplaceWebPurchaseSuccess",context:"marketplaceWebPurchase"},l)}),[]),g=new Map;return r().createElement("div",{className:"shopping-cart-footer"},r().createElement("div",{className:"cart-total-section-container"},r().createElement("div",{className:"total-label"},B({itemCount:""+d.length})),r().createElement("div",{className:"total-price-container"},r().createElement("span",{className:"icon-robux-16x16"}),r().createElement("span",{className:"price-text"},a.toLocaleString()))),d.length>f.maxSelectedItems&&r().createElement(i.Button,{className:"action-button batch-buy-purchase-button",variant:i.Button.variants.growth,size:i.Button.sizes.large,onClick:function(){v.warning(H({purchaseLimit:""+f.maxSelectedItems}),0,2e3)}},k()),d.length<=f.maxSelectedItems&&r().createElement(o.BatchBuyPriceContainer,{items:(t=[],d.forEach((function(e){t.push({id:e.itemId,itemType:e.itemType})})),t),purchaseMetadata:g,onTransactionComplete:function(e){y(e,d.length,a)},systemFeedbackService:v}),r().createElement("div",{className:"balance-disclaimer-container"},u>=0?r().createElement("div",{className:"balance-disclaimer-text",dangerouslySetInnerHTML:{__html:L({remainingBalance:"<span class='icon-robux-16x16'></span><span class='text-robux'>"+(0,l.escapeHtml)()(u.toLocaleString())+"</span>"})}}):r().createElement("div",{className:"balance-disclaimer-text"},M())))}function Re(e){var t,a=ye(),l=a.cart,o=a.dispatch,c=l.items,s=l.currentUserBalance,u=l.itemDetails,m=Math.max(null!==(t=s)&&void 0!==t?t:0,0),d=(0,n.useRef)(null),v=(0,n.useState)({windowHeight:window.innerHeight,width:null,height:null,top:null,left:null}),p=v[0],h=v[1],b=(0,n.useState)(0),g=b[0],E=b[1],C=(0,n.useState)(0),T=C[0],N=C[1],x=(0,n.useState)([]),R=x[0],P=x[1],k=(0,n.useState)({}),D=k[0],A=k[1];(0,n.useEffect)((function(){var e=I();A(e.selectedItems)}),[]),(0,n.useEffect)((function(){var e=I();A(e.selectedItems)}),[c]),(0,n.useEffect)((function(){var e,t=[];c.forEach((function(e){D[""+e.itemType.toLowerCase()+e.itemId]&&t.push(e)})),e=w(l,t),E(e),N(m-g),P(t)}),[D]);var U=function(t){var n,r=null==t?void 0:t.target,i=null==d?void 0:d.current;if(r instanceof Element){if(i&&i.contains(r))return;if(function(e){return S(e,".shopping-cart-btn")||S(e,".modal-backdrop.in")||S(e,".in.modal")||S(e,".add-to-cart-btn-container")}(r))return;null===(n=null==e?void 0:e.setIsCartOpen)||void 0===n||n.call(e,!1)}},F=(0,n.useCallback)((function(e){if(e&&e instanceof HTMLElement){var t=function(e){var t,n,r,i=null===(t=null==e?void 0:e.getBoundingClientRect)||void 0===t?void 0:t.call(e);if(i&&(null==i?void 0:i.width)&&(null==i?void 0:i.height)){var a={windowHeight:window.innerHeight,width:null==i?void 0:i.width,height:null==i?void 0:i.height,top:null!==(n=null==i?void 0:i.top)&&void 0!==n?n:null==i?void 0:i.y,left:null!==(r=null==i?void 0:i.left)&&void 0!==r?r:null==i?void 0:i.x};h(a)}};t(e);var n=new IntersectionObserver((function(n){var r=null==n?void 0:n[0];(null==r?void 0:r.target)&&t(e)}),{root:null,rootMargin:"0px",threshold:[.9,.99,1]}),r=new ResizeObserver((function(n){t(e)}));n.observe(e),r.observe(document.body,{box:"border-box"})}}),[]),O=(0,n.useMemo)((function(){var e=p.height,t=p.top;if("number"!=typeof e||"number"!=typeof t)return 600;var n=e+t;if(n>p.windowHeight){var r=n-p.windowHeight;return Math.max(460,e-r-20)}if(n<p.windowHeight-20){var i=p.windowHeight-20-t;if(i>=460)return Math.min(600,i)}return p.height?p.height:0}),[p.windowHeight,p.height,p.top]),L=function(t,n){var r=D,i=""+t.itemType.toLowerCase()+t.itemId,a=!1;(a=void 0===n?void 0===r[i]||!r[i]:n)&&R.length>=f.maxSelectedItems&&(a=!1,e.systemFeedbackService.warning(H({purchaseLimit:""+f.maxSelectedItems}),0,2e3)),r[i]=a,A(ge({},r)),y(ge(ge({},l),{selectedItems:D}))};(0,n.useEffect)((function(){return window.addEventListener("click",U,!0),function(){window.removeEventListener("click",U,!0)}}),[]);var M="("+c.length+")";return r().createElement("div",{ref:d,className:"shopping-cart-modal-container"},r().createElement("div",{ref:F,className:"shopping-cart-modal",style:{height:O+"px"}},r().createElement("div",{className:"shopping-cart-title-container"},r().createElement("h2",{className:"shopping-cart-title"},r().createElement("span",{className:"shopping-cart-title-text"},_())," ",r().createElement("span",{className:"shopping-cart-title-item-count"},M))),r().createElement(i.ScrollBar,{className:"rbx-scrollbar"},r().createElement("div",{className:"shopping-cart-items-list"},c.map((function(e){return r().createElement(Ne,{key:e.itemId,item:e,itemDetails:u[e.itemId],dispatch:o,onCheckboxClicked:L,selectedItemsRecord:D})})))),r().createElement(xe,{totalPrice:g,totalCartValue:w(l,l.items),remainingBalance:T,items:c,selectedItemsList:R,systemFeedbackService:e.systemFeedbackService,itemDetails:u,dispatch:o})))}Re.propTypes={};var Pe=Re;function ke(e){var t=e.totalCartItems,n=e.isCartOpen;return r().createElement("div",{className:"shopping-cart-icon-container"},r().createElement("div",{className:(n?"cart-open":"")+" shopping-cart-icon"}),r().createElement("span",{className:"cart-number-container"},r().createElement("span",{className:"cart-number"},t||0)))}var De=(0,i.createSystemFeedback)(),Ae=De[0],Ue=De[1];function Fe(){var e=(0,n.useState)(!1),t=e[0],i=e[1],a=ye().cart;T=Ue;var l=a.items;return r().createElement(n.Fragment,null,r().createElement(Ae,null),r().createElement("div",{className:"shopping-cart-btn-container"},r().createElement("button",{className:"shopping-cart-btn",onClick:function(){i(!t)},type:"button"},r().createElement(ke,{totalCartItems:null==l?void 0:l.length,isCartOpen:t})),!!t&&r().createElement(Pe,{setIsCartOpen:i,systemFeedbackService:Ue})))}Fe.propTypes={};var Oe=function(e){var t=e.itemId,n=e.itemType,i=e.collectibleItemId,a=e.itemName,l=e.buttonClass,o=ye(),c=o.isItemInCart,s=o.addItemToCart,u=o.removeItemFromCart,m=c(t);return r().createElement("div",{className:"btn-container shopping-cart-add-remove-btn-container"},r().createElement("button",{className:(void 0!==l?l:"")+" "+(m?"btn-secondary-lg":"btn-primary-lg"),type:"button",onClick:function(){m?u(t,n,!0).catch((function(){m=!0})):s({itemId:t,itemType:n,collectibleItemId:i,itemName:a},!0).catch((function(){m=!1}))}},m?U():A()))};Oe.defaultProps={collectibleItemId:null,buttonClass:""};c.EnvironmentUrls.avatarApi,c.EnvironmentUrls.avatarApi,c.EnvironmentUrls.avatarApi,c.EnvironmentUrls.catalogApi,c.EnvironmentUrls.catalogApi,c.EnvironmentUrls.catalogApi,c.EnvironmentUrls.catalogApi,c.EnvironmentUrls.catalogApi,c.EnvironmentUrls.catalogApi,c.EnvironmentUrls.catalogApi,c.EnvironmentUrls.thumbnailsApi,c.EnvironmentUrls.thumbnailsApi,c.EnvironmentUrls.thumbnailsApi,c.EnvironmentUrls.thumbnailsApi,c.EnvironmentUrls.thumbnailsApi,c.EnvironmentUrls.apiGatewayUrl}();
//# sourceMappingURL=https://js.rbxcdn.com/cb240f435d3f3715946b3ae726064618-shoppingCart.bundle.min.js.map

!function(){"use strict";var e={n:function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,{a:r}),r},d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=React,r=e.n(t),n=CoreUtilities,a=ReactDOM,c=ReactStyleGuide,i=RobloxItemPurchase,s=ReactUtilities,l=RobloxThumbnails,u=CoreRobloxUtilities,o=Roblox,d={common:[""],feature:"Feature.Catalog"},m=function(){return(m=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},p=(0,i.createItemPurchase)(),f=p[0],b=p[1],h=(0,s.withTranslations)((function(e){var n=e.identifier,a=e.translate,i=(0,t.useState)(),s=i[0],d=i[1],p=(0,t.useState)(),h=p[0],I=p[1],y=(0,c.createSystemFeedback)(),T=y[0];y[1];function P(e){return I(e.identifier),{translate:a,productId:e.productId,expectedPrice:e.expectedPrice,thumbnail:r().createElement(l.Thumbnail2d,{type:"asset"===e.itemType.toLowerCase()?l.ThumbnailTypes.assetThumbnail:l.ThumbnailTypes.bundleThumbnail,size:l.DefaultThumbnailSize,targetId:e.assetId,imgClassName:"",format:l.ThumbnailFormat.webp}),assetName:e.name,assetType:e.assetType,sellerName:e.expectedSellerName,sellerType:e.expectedSellerType,expectedCurrency:1,expectedSellerId:e.expectedSellerId,collectibleItemId:e.collectibleItemId,collectibleProductId:e.collectibleProductId,collectibleItemInstanceId:e.collectibleItemInstanceId,showSuccessBanner:!0,userAssetId:e.userAssetId,isLimited:!0,onPurchaseSuccess:function(){var t={totalTransactionValue:e.expectedPrice,transactionItems:JSON.stringify([{itemType:e.itemType,itemId:e.assetId,resalePurchase:e.resalePurchase}]),purchaseType:e.identifier,userId:o.CurrentUser.userId};u.eventStreamService.sendEvent({name:"marketplaceWebPurchaseSuccess",type:"marketplaceWebPurchaseSuccess",context:"marketplaceWebPurchase"},t),e.refreshPage?window.location.reload():window.dispatchEvent(new CustomEvent("navigation-update-user-currency"))}}}return(0,t.useEffect)((function(){window.addEventListener("angular-to-react-purchase-event",(function(e){d(P(e.detail))}))}),[]),(0,t.useEffect)((function(){n===h&&s&&b.start()}),[s,h,n]),r().createElement(r().Fragment,null,r().createElement(T,null),s&&r().createElement(f,m({},s)))}),d),I=function(e){return e.getAttribute("data-identifier")};function y(){var e=document.getElementById("angular-react-purchase-handoff");e?(0,a.render)(r().createElement(h,{identifier:I(e)}),e):window.requestAnimationFrame(y)}(0,n.ready)((function(){y()}))}();
//# sourceMappingURL=https://js.rbxcdn.com/98a4fd867628bec0e3530597aa1615bc-angularToReactPurchaseHandoff.bundle.min.js.map

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("Catalog");